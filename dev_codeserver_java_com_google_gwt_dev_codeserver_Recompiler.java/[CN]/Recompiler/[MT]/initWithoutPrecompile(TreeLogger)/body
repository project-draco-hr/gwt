{
  long startTime=System.currentTimeMillis();
  CompileDir compileDir=makeCompileDir(++compilesDone,logger);
  TreeLogger compileLogger=makeCompileLogger(compileDir,logger);
  ModuleDef module=loadModule(compileLogger);
  logger.log(TreeLogger.INFO,"Loading Java files in " + inputModuleName + ".");
  CompilerOptions loadOptions=new CompilerOptionsImpl(compileDir,inputModuleName,options);
  compilerContext=compilerContextBuilder.options(loadOptions).unitCache(Compiler.getOrCreateUnitCache(logger,loadOptions)).build();
  module.getCompilationState(compileLogger,compilerContext);
  setUpCompileDir(compileDir,module,compileLogger);
  outputModuleName.set(module.getName());
  lastBuild.set(compileDir);
  long elapsedTime=System.currentTimeMillis() - startTime;
  compileLogger.log(TreeLogger.Type.INFO,"Module setup completed in " + elapsedTime + " ms");
  return new Result(compileDir,null);
}
