{
  String snippet=Joiner.on("\n").join(mainMethodSnippet);
  JProgram program=compileSnippet(mainMethodReturnType,snippet);
  JMethod method=findMethod(program,methodName);
  boolean madeChanges=optimizeMethod(program,method);
  if (madeChanges && runDeadCodeElimination) {
    DeadCodeElimination.exec(program);
  }
  return new Result(program,mainMethodReturnType,methodName,snippet,madeChanges);
}
