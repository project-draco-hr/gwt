{
  Settings settings;
  try {
    settings=Settings.fromArgumentList(args);
  }
 catch (  Settings.ArgumentListException e) {
    System.err.println(e.getMessage());
    System.err.println("Usage: " + "java com.google.gwt.soyc.SoycDashboard -resources dir -soycDir dir -symbolMaps dir [-out dir]");
    System.err.println("(Legacy usage: " + "java com.google.gwt.soyc.SoycDashboard options stories0.xml[.gz] [dependencies0.xml[.gz]] [splitpoints0.xml[.gz]])");
    System.err.println("Options:");
    System.err.println(Settings.settingsHelp());
    System.exit(1);
    return;
  }
  System.out.println("Generating the Story of Your Compile...");
  OutputDirectory outDir=new FileSystemOutputDirectory(new File(settings.out.get()));
  try {
    Map<String,List<String>> permInfo=readPermutationInfo(settings);
    SoycDashboard dashboard=new SoycDashboard(outDir);
    for (    String permutationId : permInfo.keySet()) {
      dashboard.startNewPermutation(permutationId);
      if (settings.symbolMapsDir.get() == null) {
        dashboard.readFromFilesNamed(settings.storiesFileName,settings.depFileName,settings.splitPointsFileName);
      }
 else {
        String soycDir=settings.soycDir.get();
        dashboard.readFromFilesNamed(soycInputFile(soycDir,"stories",permutationId),soycInputFile(soycDir,"dependencies",permutationId),soycInputFile(soycDir,"splitPoints",permutationId));
      }
      dashboard.generateForOnePermutation();
      System.out.println("Finished creating reports for permutation.");
    }
    dashboard.generateCrossPermutationFiles(permInfo);
    System.out.println("Finished creating reports. To see the dashboard, open index.html in your browser.");
  }
 catch (  ParserConfigurationException e) {
    System.err.println("Could not parse document. " + e.getMessage());
    System.exit(1);
  }
catch (  SAXException e) {
    System.err.println("Could not create SAX parser. " + e.getMessage());
    System.exit(1);
  }
catch (  FileNotFoundException e) {
    System.err.println("Cannot open file " + e.getMessage());
    System.exit(1);
  }
catch (  IOException e) {
    System.err.println("Error creating html file. " + e.getMessage());
    System.exit(1);
  }
}
