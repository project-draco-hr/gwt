{
  delayTestFinish(5000);
  req.simpleBarRequest().findSimpleBarById(999L).fire(new Receiver<SimpleBarProxy>(){
    @Override public void onSuccess(    final SimpleBarProxy barProxy,    Set<SyncResult> syncResults){
      req.simpleFooRequest().findSimpleFooById(999L).fire(new Receiver<SimpleFooProxy>(){
        @Override public void onSuccess(        SimpleFooProxy fooProxy,        Set<SyncResult> syncResults){
          RequestObject<Void> updReq=req.simpleFooRequest().persist(fooProxy);
          fooProxy=updReq.edit(fooProxy);
          fooProxy.setBarField(barProxy);
          updReq.fire(new Receiver<Void>(){
            @Override public void onSuccess(            Void response,            Set<SyncResult> syncResults){
              finishTestAndReset();
            }
          }
);
        }
      }
);
    }
  }
);
}
