{
  SimpleFooProxy foo=req.create(SimpleFooProxy.class);
  Request<SimpleFooProxy> r=req.simpleFooRequest().persistAndReturnSelf(foo);
  foo=r.edit(foo);
  SimpleBarProxy immutableBar=req.create(SimpleBarProxy.class);
  SimpleBarProxy mutableBar=r.edit(immutableBar);
  mutableBar.setUserName("userName");
  foo.setBarField(mutableBar);
  r.edit(immutableBar).setUserName("Reset");
  assertEquals("Reset",foo.getBarField().getUserName());
}
