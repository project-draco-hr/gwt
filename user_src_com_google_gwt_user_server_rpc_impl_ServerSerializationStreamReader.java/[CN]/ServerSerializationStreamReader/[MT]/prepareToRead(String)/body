{
  tokenList.clear();
  tokenListIndex=0;
  stringTable=null;
  int idx=0, nextIdx;
  while (-1 != (nextIdx=encodedTokens.indexOf('\uffff',idx))) {
    String current=encodedTokens.substring(idx,nextIdx);
    tokenList.add(current);
    idx=nextIdx + 1;
  }
  super.prepareToRead(encodedTokens);
  if (getVersion() != SERIALIZATION_STREAM_VERSION) {
    throw new IncompatibleRemoteServiceException("Expecting version " + SERIALIZATION_STREAM_VERSION + " from client, got "+ getVersion()+ ".");
  }
  deserializeStringTable();
  String moduleBaseURL=readString();
  String strongName=readString();
  if (serializationPolicyProvider != null) {
    serializationPolicy=serializationPolicyProvider.getSerializationPolicy(moduleBaseURL,strongName);
    if (serializationPolicy == null) {
      throw new NullPointerException("serializationPolicyProvider.getSerializationPolicy()");
    }
  }
}
