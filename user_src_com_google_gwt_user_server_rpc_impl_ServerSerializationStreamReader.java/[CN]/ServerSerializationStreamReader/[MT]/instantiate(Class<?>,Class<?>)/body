{
  if (customSerializer != null) {
    try {
      Method instantiate=customSerializer.getMethod("instantiate",SerializationStreamReader.class);
      return instantiate.invoke(null,this);
    }
 catch (    NoSuchMethodException e) {
    }
  }
  if (instanceClass.isArray()) {
    int length=readInt();
    Class<?> componentType=instanceClass.getComponentType();
    return Array.newInstance(componentType,length);
  }
 else   if (instanceClass.isEnum()) {
    Enum[] enumConstants=(Enum[])instanceClass.getEnumConstants();
    int ordinal=readInt();
    assert(ordinal >= 0 && ordinal < enumConstants.length);
    return enumConstants[ordinal];
  }
 else {
    Constructor<?> constructor=instanceClass.getDeclaredConstructor();
    constructor.setAccessible(true);
    return constructor.newInstance();
  }
}
