{
  JReferenceType result;
  if (program.typeOracle.canTriviallyCast(source.getUnderlyingType(),target.getUnderlyingType())) {
    result=source;
  }
 else {
    result=target;
  }
  if ((!target.canBeNull())) {
    result=result.getNonNull();
  }
  return result;
}
