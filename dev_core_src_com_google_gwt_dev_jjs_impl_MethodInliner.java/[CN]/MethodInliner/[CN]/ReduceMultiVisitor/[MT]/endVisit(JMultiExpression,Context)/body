{
  ArrayList exprs=x.exprs;
  final int c=exprs.size();
  if (c == 0) {
    return;
  }
  int countSideEffectsBeforeLast=0;
  for (int i=0; i < c - 1; ++i) {
    JExpression expr=(JExpression)exprs.get(i);
    if (expr.hasSideEffects()) {
      ++countSideEffectsBeforeLast;
    }
  }
  if (countSideEffectsBeforeLast == 0) {
    ctx.replaceMe((JExpression)x.exprs.get(c - 1));
  }
 else {
    JMultiExpression newMulti=new JMultiExpression(program,x.getSourceInfo());
    for (int i=0; i < c - 1; ++i) {
      JExpression expr=(JExpression)exprs.get(i);
      if (expr.hasSideEffects()) {
        newMulti.exprs.add(expr);
      }
    }
    newMulti.exprs.add(x.exprs.get(c - 1));
    if (newMulti.exprs.size() < x.exprs.size()) {
      ctx.replaceMe(newMulti);
    }
  }
}
