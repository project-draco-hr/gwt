{
  if (interpreter == null) {
    throw new NullPointerException("interpreter must not be null");
  }
  StringBuffer buf=new StringBuffer();
  GetInnerTextVisitor.getEscapedInnerText(elem,buf,interpreter,writer);
  for (  XMLElement child : consumeChildElements()) {
    if (child.hasChildNodes() || child.getAttributeCount() > 0) {
      writer.die("Text value of \"%s\" has illegal child \"%s\"",this,child);
    }
  }
  clearChildren(elem);
  return buf.toString().trim();
}
