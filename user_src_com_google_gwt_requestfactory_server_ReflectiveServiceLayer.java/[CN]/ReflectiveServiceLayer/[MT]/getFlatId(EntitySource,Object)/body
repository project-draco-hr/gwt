{
  Object id=getProperty(domainObject,"id");
  if (id == null) {
    report("Could not retrieve id property for domain object");
  }
  if (!isKeyType(id.getClass())) {
    die(null,"The type %s is not a valid key type",id.getClass().getCanonicalName());
  }
  return EntityCodex.encode(source,id).getPayload();
}
