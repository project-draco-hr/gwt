{
  if (c instanceof EnumSet) {
    return EnumSet.copyOf((EnumSet<E>)c);
  }
  Iterator<E> it=c.iterator();
  E first=it.next();
  Class<E> clazz=first.getDeclaringClass();
  EnumSet<E> set=EnumSet.noneOf(clazz);
  set.add(first);
  while (it.hasNext()) {
    set.add(it.next());
  }
  return set;
}
