{
  LinkedList worklist=new LinkedList();
  worklist.add(new Instantiation(null,mainSubroutine));
  InsnList newInstructions=new InsnList();
  List newTryCatchBlocks=new ArrayList();
  List newLocalVariables=new ArrayList();
  while (!worklist.isEmpty()) {
    Instantiation inst=(Instantiation)worklist.removeFirst();
    emitSubroutine(inst,worklist,newInstructions,newTryCatchBlocks,newLocalVariables);
  }
  instructions=newInstructions;
  tryCatchBlocks=newTryCatchBlocks;
  localVariables=newLocalVariables;
}
