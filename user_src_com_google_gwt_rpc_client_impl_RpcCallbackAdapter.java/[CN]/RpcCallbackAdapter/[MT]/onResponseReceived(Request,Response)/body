{
  T result=null;
  Throwable caught=null;
  try {
    String encodedResponse=response.getText();
    int statusCode=response.getStatusCode();
    boolean toss=RemoteServiceProxy.isStatsAvailable() && RemoteServiceProxy.stats(RemoteServiceProxy.bytesStat(methodName,requestId,encodedResponse.length(),"responseReceived"));
    if (statusCode != Response.SC_OK) {
      caught=new StatusCodeException(statusCode,encodedResponse);
    }
 else     if (encodedResponse == null) {
      caught=new InvocationException("No response payload");
    }
 else {
      result=(T)streamFactory.createStreamReader(encodedResponse).readObject();
    }
  }
 catch (  RemoteException e) {
    caught=e.getCause();
  }
catch (  SerializationException e) {
    caught=new IncompatibleRemoteServiceException("The response could not be deserialized",e);
  }
catch (  Throwable e) {
    caught=e;
  }
 finally {
    boolean toss=RemoteServiceProxy.isStatsAvailable() && RemoteServiceProxy.stats(RemoteServiceProxy.timeStat(methodName,requestId,"responseDeserialized"));
  }
  try {
    if (caught == null) {
      callback.onSuccess(result);
    }
 else {
      callback.onFailure(caught);
    }
  }
  finally {
    boolean toss=RemoteServiceProxy.isStatsAvailable() && RemoteServiceProxy.stats(RemoteServiceProxy.timeStat(methodName,requestId,"end"));
  }
}
