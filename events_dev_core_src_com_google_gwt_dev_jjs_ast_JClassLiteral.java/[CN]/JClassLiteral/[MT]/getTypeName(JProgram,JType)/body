{
  String typeName;
  if (type instanceof JArrayType) {
    typeName=type.getJsniSignatureName().replace('/','.');
    if (program.isJavaScriptObject(((JArrayType)type).getLeafType())) {
      typeName=typeName.replace(";","$;");
    }
  }
 else {
    typeName=type.getName();
    if (program.isJavaScriptObject(type)) {
      typeName+='$';
    }
  }
  return typeName;
}
