{
  Statements benchmarkCode=new StatementsList();
  List benchStatements=benchmarkCode.getStatements();
  ForLoop loop=new ForLoop("int numLoops = 1","true","");
  benchStatements.add(loop);
  List loopStatements=loop.getStatements();
  loopStatements.add(new Statement("long start = System.currentTimeMillis()"));
  ForLoop runLoop=new ForLoop("int i = 0","i < numLoops","++i",stmts);
  loopStatements.add(runLoop);
  String benchCode="long duration = System.currentTimeMillis() - start;\n\n" + "if ( duration < 150 ) {\n" + "  numLoops += numLoops;\n"+ "  continue;\n"+ "}\n\n"+ "double durationMillis = duration * 1.0;\n"+ "double numLoopsAsDouble = numLoops * 1.0;\n" + timeMillisName + " = durationMillis / numLoopsAsDouble";
  loopStatements.add(new Statement(benchCode));
  if (recordCode != null) {
    loopStatements.add(recordCode);
  }
  if (generateEscape) {
    loopStatements.add(new Statement("if ( numLoops == 1 && duration > 1000 ) {\n" + breakCode.toString() + "\n"+ "}\n\n"));
  }
  loopStatements.add(new Statement("break"));
  return benchmarkCode;
}
