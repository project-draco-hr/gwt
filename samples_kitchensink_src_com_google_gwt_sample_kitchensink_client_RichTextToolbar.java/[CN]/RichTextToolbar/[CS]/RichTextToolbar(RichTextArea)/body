{
  this.richText=richText;
  this.basic=richText.getBasicFormatter();
  this.extended=richText.getExtendedFormatter();
  initWidget(panel);
  setStyleName("gwt-RichTextToolbar");
  if (basic != null) {
    panel.add(bold=createToggleButton(images.bold(),strings.bold()));
    panel.add(italic=createToggleButton(images.italic(),strings.italic()));
    panel.add(underline=createToggleButton(images.underline(),strings.underline()));
    panel.add(subscript=createToggleButton(images.subscript(),strings.subscript()));
    panel.add(superscript=createToggleButton(images.superscript(),strings.superscript()));
    panel.add(justifyLeft=createPushButton(images.justifyLeft(),strings.justifyLeft()));
    panel.add(justifyCenter=createPushButton(images.justifyCenter(),strings.justifyCenter()));
    panel.add(justifyRight=createPushButton(images.justifyRight(),strings.justifyRight()));
  }
  if (extended != null) {
    panel.add(strikethrough=createToggleButton(images.strikeThrough(),strings.strikeThrough()));
    panel.add(indent=createPushButton(images.indent(),strings.indent()));
    panel.add(outdent=createPushButton(images.outdent(),strings.outdent()));
    panel.add(hr=createPushButton(images.hr(),strings.hr()));
    panel.add(ol=createPushButton(images.ol(),strings.ol()));
    panel.add(ul=createPushButton(images.ul(),strings.ul()));
    panel.add(insertImage=createPushButton(images.insertImage(),strings.insertImage()));
    panel.add(createLink=createPushButton(images.createLink(),strings.createLink()));
    panel.add(removeLink=createPushButton(images.removeLink(),strings.removeLink()));
    panel.add(removeFormat=createPushButton(images.removeFormat(),strings.removeFormat()));
  }
  if (basic != null) {
    panel.add(backColors=createColorList("Background"));
    panel.add(foreColors=createColorList("Foreground"));
    panel.add(fonts=createFontList());
    panel.add(fontSizes=createFontSizes());
    richText.addChangeListener(listener);
    richText.addKeyboardListener(listener);
    richText.addClickListener(listener);
  }
}
