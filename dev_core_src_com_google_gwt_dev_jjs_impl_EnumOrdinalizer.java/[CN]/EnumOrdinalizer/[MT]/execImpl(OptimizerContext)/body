{
  OptimizerStats stats=new OptimizerStats(NAME);
  if (tracker != null) {
    tracker.incrementRunCount();
    tracker.maybeDumpAST(program,0);
  }
  CannotBeOrdinalAnalyzer ordinalAnalyzer=new CannotBeOrdinalAnalyzer(program);
  ordinalAnalyzer.accept(program);
  if (enumsVisited.size() == ordinalizationBlackList.size()) {
    if (tracker != null) {
      for (      JEnumType type : enumsVisited) {
        tracker.addVisited(type.getName());
      }
    }
    return stats;
  }
  ReplaceOrdinalizedEnumTypes replaceEnums=new ReplaceOrdinalizedEnumTypes(optimizerCtx);
  replaceEnums.accept(program);
  stats.recordModified(replaceEnums.getNumMods());
  if (tracker != null) {
    tracker.maybeDumpAST(program,1);
  }
  for (  JEnumType type : enumsVisited) {
    if (tracker != null) {
      tracker.addVisited(type.getName());
    }
    if (!ordinalizationBlackList.contains(type)) {
      if (tracker != null) {
        tracker.addOrdinalized(type.getName());
      }
      type.setOrdinalized();
    }
  }
  JavaAstVerifier.assertProgramIsConsistent(program);
  return stats;
}
