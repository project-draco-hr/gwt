{
  super(viewModel);
  if (template == null) {
    template=GWT.create(Template.class);
  }
  this.style=resources.cellTreeStyle();
  this.style.ensureInjected();
  initWidget(new SimplePanel());
  setStyleName(this.style.cellTreeWidget());
  ImageResource treeOpen=resources.cellTreeOpenItem();
  ImageResource treeClosed=resources.cellTreeClosedItem();
  ImageResource treeLoading=resources.cellTreeLoading();
  openImageHtml=getImageHtml(treeOpen,false);
  closedImageHtml=getImageHtml(treeClosed,false);
  openImageTopHtml=getImageHtml(treeOpen,true);
  closedImageTopHtml=getImageHtml(treeClosed,true);
  loadingImageHtml=getImageHtml(treeLoading,false);
  imageWidth=Math.max(Math.max(treeOpen.getWidth(),treeClosed.getWidth()),treeLoading.getWidth());
  setAnimation(SlideAnimation.create());
  Set<String> eventTypes=new HashSet<String>();
  eventTypes.add("focus");
  eventTypes.add("blur");
  eventTypes.add("keydown");
  eventTypes.add("keyup");
  eventTypes.add("mousedown");
  eventTypes.add("click");
  CellBasedWidgetImpl.get().sinkEvents(this,eventTypes);
  CellTreeNodeView<T> root=new CellTreeNodeView<T>(this,null,null,getElement(),rootValue);
  keyboardSelectedNode=rootNode=root;
  root.setOpen(true,false);
}
