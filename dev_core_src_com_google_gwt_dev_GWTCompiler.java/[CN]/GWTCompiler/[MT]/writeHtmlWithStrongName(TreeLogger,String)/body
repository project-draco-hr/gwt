{
  try {
    byte[] prefix=getHtmlPrefix().getBytes("UTF-8");
    byte[] scriptBytes=js.getBytes("UTF-8");
    byte[] suffix=getHtmlSuffix().getBytes("UTF-8");
    String strongName=Util.computeStrongName(scriptBytes);
    File outFile=new File(outDir,strongName + ".cache.html");
    Util.writeBytesToFile(logger,outFile,new byte[][]{prefix,scriptBytes,suffix});
    String msg="Compilation written to " + outFile.getAbsolutePath();
    logger.log(TreeLogger.TRACE,msg,null);
    return strongName;
  }
 catch (  UnsupportedEncodingException e) {
    logger.log(TreeLogger.ERROR,"Unable to encode compiled script as UTF-8",e);
    throw new UnableToCompleteException();
  }
}
