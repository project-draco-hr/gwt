{
  if (options.isValidateOnly()) {
    return new Precompile(options).run(logger);
  }
 else {
    PerfLogger.start("compile");
    logger=logger.branch(TreeLogger.INFO,"Compiling module " + options.getModuleName());
    if (new Precompile(options).run(logger)) {
      CompilePermsOptionsImpl permsOptions=new CompilePermsOptionsImpl();
      permsOptions.copyFrom(options);
      if (new CompilePerms(permsOptions).run(logger)) {
        if (new Link(options).run(logger)) {
          logger.log(TreeLogger.INFO,"Compilation succeeded");
          PerfLogger.end();
          return true;
        }
      }
    }
    logger.log(TreeLogger.ERROR,"Compilation failed");
    PerfLogger.end();
    return false;
  }
}
