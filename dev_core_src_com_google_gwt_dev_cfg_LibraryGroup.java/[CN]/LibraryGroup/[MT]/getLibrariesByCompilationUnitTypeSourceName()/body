{
  if (librariesByCompilationUnitTypeSourceName == null) {
    librariesByCompilationUnitTypeSourceName=Maps.newLinkedHashMap();
    for (    Library library : libraries) {
      for (      String compilationUnitTypeSourceName : library.getRegularCompilationUnitTypeSourceNames()) {
        librariesByCompilationUnitTypeSourceName.put(compilationUnitTypeSourceName,library);
        Collection<String> nestedTypeSourceNames=library.getNestedNamesByCompilationUnitName().get(compilationUnitTypeSourceName);
        for (        String nestedTypeSourceName : nestedTypeSourceNames) {
          librariesByCompilationUnitTypeSourceName.put(nestedTypeSourceName,library);
        }
      }
    }
    for (    Library library : libraries) {
      for (      String superSourceCompilationUnitTypeSourceName : library.getSuperSourceCompilationUnitTypeSourceNames()) {
        librariesByCompilationUnitTypeSourceName.put(superSourceCompilationUnitTypeSourceName,library);
        Collection<String> nestedTypeSourceNames=library.getNestedNamesByCompilationUnitName().get(superSourceCompilationUnitTypeSourceName);
        for (        String nestedTypeSourceName : nestedTypeSourceNames) {
          librariesByCompilationUnitTypeSourceName.put(nestedTypeSourceName,library);
        }
      }
    }
    librariesByCompilationUnitTypeSourceName=Collections.unmodifiableMap(librariesByCompilationUnitTypeSourceName);
  }
  return librariesByCompilationUnitTypeSourceName;
}
