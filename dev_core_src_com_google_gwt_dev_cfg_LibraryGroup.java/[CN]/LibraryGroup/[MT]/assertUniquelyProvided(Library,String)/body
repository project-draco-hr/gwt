{
  if (librariesByCompilationUnitTypeSourceName.containsKey(compilationUnitTypeSourceName)) {
    Library oldLibrary=librariesByCompilationUnitTypeSourceName.get(compilationUnitTypeSourceName);
    throw new CollidingCompilationUnitException(formatDuplicateCompilationUnitMessage(compilationUnitTypeSourceName,oldLibrary.getLibraryName(),newLibrary.getLibraryName()));
  }
}
