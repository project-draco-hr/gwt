{
  if (librariesByCompilationUnitTypeBinaryName == null) {
    librariesByCompilationUnitTypeBinaryName=Maps.newLinkedHashMap();
    for (    Library library : libraries) {
      for (      String compilationUnitTypeSourceName : library.getRegularCompilationUnitTypeSourceNames()) {
        librariesByCompilationUnitTypeSourceName.put(compilationUnitTypeSourceName,library);
        Collection<String> nestedTypeBinaryNames=library.getNestedBinaryNamesByCompilationUnitName().get(compilationUnitTypeSourceName);
        for (        String nestedTypeBinaryName : nestedTypeBinaryNames) {
          librariesByCompilationUnitTypeBinaryName.put(nestedTypeBinaryName,library);
        }
      }
    }
    for (    Library library : libraries) {
      for (      String superSourceCompilationUnitTypeSourceName : library.getSuperSourceCompilationUnitTypeSourceNames()) {
        librariesByCompilationUnitTypeSourceName.put(superSourceCompilationUnitTypeSourceName,library);
        Collection<String> nestedTypeBinaryNames=library.getNestedBinaryNamesByCompilationUnitName().get(superSourceCompilationUnitTypeSourceName);
        for (        String nestedTypeBinaryName : nestedTypeBinaryNames) {
          librariesByCompilationUnitTypeBinaryName.put(nestedTypeBinaryName,library);
        }
      }
    }
  }
  return Collections.unmodifiableMap(librariesByCompilationUnitTypeBinaryName);
}
