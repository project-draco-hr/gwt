{
  if (librariesByCompilationUnitTypeName == null) {
    librariesByCompilationUnitTypeName=Maps.newLinkedHashMap();
    for (    Library library : libraries) {
      for (      String compilationUnitTypeName : library.getRegularCompilationUnitTypeNames()) {
        librariesByCompilationUnitTypeName.put(compilationUnitTypeName,library);
      }
    }
    for (    Library library : libraries) {
      for (      String superSourceCompilationUnitTypeName : library.getSuperSourceCompilationUnitTypeNames()) {
        librariesByCompilationUnitTypeName.put(superSourceCompilationUnitTypeName,library);
      }
    }
    librariesByCompilationUnitTypeName=Collections.unmodifiableMap(librariesByCompilationUnitTypeName);
  }
  return librariesByCompilationUnitTypeName;
}
