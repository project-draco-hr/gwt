{
  if (librariesByCompilationUnitTypeSourceName.containsKey(compilationUnitTypeSourceName)) {
    Library oldLibrary=librariesByCompilationUnitTypeSourceName.get(compilationUnitTypeSourceName);
    throw new CollidingCompilationUnitException(String.format("Compilation units must be unique but '%s' is being " + "provided by both the '%s' and '%s' library.",compilationUnitTypeSourceName,oldLibrary.getLibraryName(),newLibrary.getLibraryName()));
  }
}
