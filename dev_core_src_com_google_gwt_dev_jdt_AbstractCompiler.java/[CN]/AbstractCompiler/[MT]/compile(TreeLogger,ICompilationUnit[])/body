{
  sandbox.logger=logger;
  try {
    Set<CompilationUnitDeclaration> cuds=new TreeSet<CompilationUnitDeclaration>(CUD_COMPARATOR);
    sandbox.compiler.compile(units,cuds);
    int size=cuds.size();
    CompilationUnitDeclaration[] cudArray=new CompilationUnitDeclaration[size];
    return cuds.toArray(cudArray);
  }
  finally {
    sandbox.clear();
    sandbox=null;
  }
}
