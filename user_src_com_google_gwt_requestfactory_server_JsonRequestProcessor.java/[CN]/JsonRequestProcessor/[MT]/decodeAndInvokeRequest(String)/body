{
  try {
    Logger.getLogger(this.getClass().getName()).finest("Incoming request " + encodedRequest);
    String response=processJsonRequest(encodedRequest).toString();
    Logger.getLogger(this.getClass().getName()).finest("Outgoing response " + response);
    return response;
  }
 catch (  InvocationTargetException e) {
    JSONObject exceptionResponse=buildExceptionResponse(e.getCause());
    throw new RequestProcessingException("Unexpected exception",e,exceptionResponse.toString());
  }
catch (  Exception e) {
    JSONObject exceptionResponse=buildExceptionResponse(e);
    throw new RequestProcessingException("Unexpected exception",e,exceptionResponse.toString());
  }
}
