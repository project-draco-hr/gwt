{
  if (beforeArray.length() != afterArray.length()) {
    return true;
  }
 else {
    for (int i=0; i < beforeArray.length(); i++) {
      Object bVal=beforeArray.get(i);
      Object aVal=afterArray.get(i);
      if (aVal != null && bVal != null) {
        if (aVal == bVal || aVal.equals(bVal)) {
          continue;
        }
        if (aVal.getClass() != bVal.getClass()) {
          return true;
        }
        if (aVal instanceof JSONObject) {
          if (hasChanged((JSONObject)bVal,(JSONObject)aVal)) {
            return true;
          }
        }
        if (aVal instanceof JSONArray) {
          if (hasChanged((JSONArray)bVal,(JSONArray)aVal)) {
            return true;
          }
        }
      }
      if (aVal != bVal) {
        return true;
      }
    }
  }
  return false;
}
