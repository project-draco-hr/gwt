{
  if (value == null) {
    return null;
  }
  Class<?> type=value.getClass();
  if (Boolean.class == type) {
    return value;
  }
  if (Date.class.isAssignableFrom(type)) {
    return String.valueOf(((Date)value).getTime());
  }
  if (Enum.class.isAssignableFrom(type)) {
    return Double.valueOf(((Enum<?>)value).ordinal());
  }
  if (BigDecimal.class == type || BigInteger.class == type || Long.class == type) {
    return String.valueOf(value);
  }
  if (Number.class.isAssignableFrom(type)) {
    return ((Number)value).doubleValue();
  }
  return String.valueOf(value);
}
