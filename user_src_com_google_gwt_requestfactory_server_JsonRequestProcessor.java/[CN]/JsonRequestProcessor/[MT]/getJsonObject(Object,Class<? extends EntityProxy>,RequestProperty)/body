{
  JSONObject jsonObject=new JSONObject();
  jsonObject.put(ENCODED_ID_PROPERTY,isEntityReference(entityElement,entityKeyClass));
  for (  Property<?> p : allProperties(entityKeyClass)) {
    if (requestedProperty(p,propertyContext)) {
      String propertyName=p.getName();
      jsonObject.put(propertyName,encodePropertyValueFromDataStore(entityElement,p.getType(),propertyName,propertyContext));
    }
  }
  return jsonObject;
}
