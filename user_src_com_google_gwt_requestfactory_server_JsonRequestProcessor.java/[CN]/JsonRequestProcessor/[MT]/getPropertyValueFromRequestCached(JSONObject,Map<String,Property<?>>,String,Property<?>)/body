{
  Object propertyValue;
  if (!recordObject.isNull(key) && EntityProxy.class.isAssignableFrom(dtoProperty.getType())) {
    EntityKey propKey=getEntityKey(recordObject.getString(key));
    Object cacheValue=cachedEntityLookup.get(propKey);
    if (cachedEntityLookup.containsKey(propKey)) {
      propertyValue=cacheValue;
    }
 else {
      propertyValue=getPropertyValueFromRequest(recordObject,key,propertiesInProxy.get(key).getType());
    }
  }
 else {
    propertyValue=getPropertyValueFromRequest(recordObject,key,propertiesInProxy.get(key).getType());
  }
  return propertyValue;
}
