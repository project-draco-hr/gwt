{
  JSONObject jsonObject=new JSONObject();
  for (  Property<?> p : allProperties(entityKeyClass)) {
    if (requestedProperty(p,propertyContext)) {
      String propertyName=p.getName();
      jsonObject.put(propertyName,encodePropertyValueFromDataStore(entityElement,p.getType(),propertyName,propertyContext));
    }
  }
  return jsonObject;
}
