{
  if (propertyContext == null) {
    return false;
  }
  Class<?> leafType=p.getType();
  if (p instanceof CollectionProperty<?,?>) {
    leafType=((CollectionProperty<?,?>)p).getLeafType();
  }
  if (EntityProxy.class.isAssignableFrom(leafType)) {
    return propertyContext.hasProperty(p.getName());
  }
  return true;
}
