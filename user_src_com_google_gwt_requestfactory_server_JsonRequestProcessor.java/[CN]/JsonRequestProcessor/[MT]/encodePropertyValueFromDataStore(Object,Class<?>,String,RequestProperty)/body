{
  Object returnValue=getRawPropertyValueFromDatastore(entityElement,propertyName,propertyContext);
  String encodedEntityId=isEntityReference(returnValue,proxyPropertyType);
  if (encodedEntityId != null) {
    String keyRef=operationRegistry.getSecurityProvider().encodeClassType(proxyPropertyType) + "-" + encodedEntityId;
    addRelatedObject(keyRef,returnValue,castToRecordClass(proxyPropertyType),propertyContext.getProperty(propertyName));
    return keyRef;
  }
  return encodePropertyValue(returnValue);
}
