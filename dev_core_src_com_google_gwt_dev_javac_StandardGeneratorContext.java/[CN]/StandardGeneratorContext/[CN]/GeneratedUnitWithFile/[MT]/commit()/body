{
  super.commit();
  FileOutputStream fos=null;
  try {
    fos=new FileOutputStream(file);
    diskCache.transferToStream(sourceToken,fos);
  }
 catch (  IOException e) {
    throw new RuntimeException("Error writing out generated unit at '" + file.getAbsolutePath() + "'",e);
  }
 finally {
    Utility.close(fos);
  }
}
