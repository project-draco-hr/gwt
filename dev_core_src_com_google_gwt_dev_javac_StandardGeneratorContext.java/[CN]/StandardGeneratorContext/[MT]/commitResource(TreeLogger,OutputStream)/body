{
  PendingResource pendingResource=null;
  String partialPath=null;
  if (os instanceof PendingResource) {
    pendingResource=(PendingResource)os;
    partialPath=pendingResource.getPartialPath();
    if (pendingResource != pendingResources.get(partialPath)) {
      pendingResource=null;
    }
  }
  if (pendingResource == null) {
    logger.log(TreeLogger.WARN,"Generator attempted to commit an unknown OutputStream",null);
    throw new UnableToCompleteException();
  }
  GeneratedResource toReturn=new StandardGeneratedResource(currentGenerator,partialPath,pendingResource.takeBytes());
  commitArtifact(logger,toReturn);
  pendingResources.remove(pendingResource.getPartialPath());
  return toReturn;
}
