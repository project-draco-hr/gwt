{
  WebClient webClient=new WebClient(browser);
  webClient.setAlertHandler(this);
  webClient.setIncorrectnessListener(this);
  webClient.setThrowExceptionOnFailingStatusCode(false);
  webClient.setThrowExceptionOnScriptError(true);
  webClient.setOnbeforeunloadHandler(this);
  setupWebClient(webClient);
  try {
    Page page=webClient.getPage(url);
    webClient.waitForBackgroundJavaScriptStartingBefore(2000);
    page.getEnclosingWindow().getJobManager().waitForJobs(60000);
    treeLogger.log(TreeLogger.SPAM,"getPage returned " + ((HtmlPage)page).asXml());
  }
 catch (  FailingHttpStatusCodeException e) {
    treeLogger.log(TreeLogger.ERROR,"HTTP request failed",e);
    return;
  }
catch (  MalformedURLException e) {
    treeLogger.log(TreeLogger.ERROR,"Bad URL",e);
    return;
  }
catch (  IOException e) {
    treeLogger.log(TreeLogger.ERROR,"I/O error on HTTP request",e);
    return;
  }
}
