{
  WebClient webClient=new WebClient(browser);
  webClient.setAlertHandler(this);
  webClient.setCssErrorHandler(new ErrorHandler(){
    public void error(    CSSParseException exception){
    }
    public void fatalError(    CSSParseException exception){
      treeLogger.log(TreeLogger.WARN,"CSS fatal error: " + exception.getURI() + " ["+ exception.getLineNumber()+ ":"+ exception.getColumnNumber()+ "] "+ exception.getMessage());
    }
    public void warning(    CSSParseException exception){
    }
  }
);
  webClient.setIncorrectnessListener(this);
  webClient.setThrowExceptionOnFailingStatusCode(false);
  webClient.setThrowExceptionOnScriptError(true);
  webClient.setOnbeforeunloadHandler(this);
  setupWebClient(webClient);
  try {
    Page page=webClient.getPage(url);
    webClient.waitForBackgroundJavaScriptStartingBefore(2000);
    if (treeLogger.isLoggable(TreeLogger.SPAM)) {
      treeLogger.log(TreeLogger.SPAM,"getPage returned " + ((HtmlPage)page).asXml());
    }
  }
 catch (  FailingHttpStatusCodeException e) {
    treeLogger.log(TreeLogger.ERROR,"HTTP request failed",e);
    return;
  }
catch (  MalformedURLException e) {
    treeLogger.log(TreeLogger.ERROR,"Bad URL",e);
    return;
  }
catch (  IOException e) {
    treeLogger.log(TreeLogger.ERROR,"I/O error on HTTP request",e);
    return;
  }
}
