{
  checkCriticalNotNull(mapper);
  if (isPresent()) {
    return ofNullable(mapper.apply(ref));
  }
  return empty();
}
