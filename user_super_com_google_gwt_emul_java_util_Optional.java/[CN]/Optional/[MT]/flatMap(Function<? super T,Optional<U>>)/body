{
  checkNotNull(mapper);
  if (isPresent()) {
    return checkNotNull(mapper.apply(ref));
  }
  return empty();
}
