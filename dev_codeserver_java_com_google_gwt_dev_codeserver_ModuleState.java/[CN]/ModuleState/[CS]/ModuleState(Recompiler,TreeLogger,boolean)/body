{
  this.recompiler=recompiler;
  this.logger=logger;
  CompileDir compileDir;
  if (noPrecompile) {
    compileDir=recompiler.noCompile();
  }
 else {
    Map<String,String> defaultProps=new HashMap<String,String>();
    defaultProps.put("user.agent","safari");
    defaultProps.put("locale","en");
    defaultProps.put("compiler.useSourceMaps","true");
    compileDir=recompiler.compile(defaultProps);
  }
  current.set(compileDir);
}
