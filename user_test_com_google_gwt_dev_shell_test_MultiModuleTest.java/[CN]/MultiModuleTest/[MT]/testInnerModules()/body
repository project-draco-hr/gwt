{
  String url=getURL();
  Map params=getURLParams(url);
  if (!params.containsKey("gwt.junit.testfuncname")) {
    return;
  }
  String frameName=(String)params.get("frame");
  VerticalPanel panel=new VerticalPanel();
  RootPanel.get().add(panel);
  if (frameName.equals("top")) {
    setupDoneLoading(this);
    mainPanel=panel;
    panel.add(new Label("Top level frame"));
    state=0;
    params.put("frame","1a");
    frame[0]=new Frame(buildURL(url,params));
    panel.add(frame[0]);
    params.put("frame","2a");
    frame[1]=new Frame(buildURL(url,params));
    panel.add(frame[1]);
    addToBeLoaded(0,2);
  }
 else   if (frameName.equals("1a")) {
    panel.add(new Label("Frame 1a"));
    markLoaded(1);
  }
 else   if (frameName.equals("1b")) {
    panel.add(new Label("Frame 1b"));
    markLoaded(1);
  }
 else   if (frameName.equals("2a")) {
    panel.add(new Label("Frame 2a"));
    params.put("frame","2suba");
    Frame sub=new Frame(buildURL(url,params));
    panel.add(sub);
  }
 else   if (frameName.equals("2b")) {
    panel.add(new Label("Frame 2b"));
    params.put("frame","2subb");
    Frame sub=new Frame(buildURL(url,params));
    panel.add(sub);
  }
 else   if (frameName.equals("2suba")) {
    panel.add(new Label("Frame 2a inner"));
    markLoaded(2);
  }
 else   if (frameName.equals("2subb")) {
    panel.add(new Label("Frame 2b inner"));
    markLoaded(2);
  }
 else {
    GWT.log("Unexpected frame name " + frameName);
  }
}
