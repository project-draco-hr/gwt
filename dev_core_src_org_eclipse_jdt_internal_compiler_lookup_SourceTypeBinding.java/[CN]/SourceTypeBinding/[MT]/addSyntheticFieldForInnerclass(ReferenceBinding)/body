{
  if (this.synthetics == null)   this.synthetics=new HashMap[MAX_SYNTHETICS];
  if (this.synthetics[SourceTypeBinding.FIELD_EMUL] == null)   this.synthetics[SourceTypeBinding.FIELD_EMUL]=new HashMap(5);
  FieldBinding synthField=(FieldBinding)this.synthetics[SourceTypeBinding.FIELD_EMUL].get(enclosingType);
  if (synthField == null) {
    synthField=new SyntheticFieldBinding(CharOperation.concat(TypeConstants.SYNTHETIC_ENCLOSING_INSTANCE_PREFIX,String.valueOf(enclosingType.depth()).toCharArray()),enclosingType,ClassFileConstants.AccDefault | ClassFileConstants.AccFinal | ClassFileConstants.AccSynthetic,this,Constant.NotAConstant,this.synthetics[SourceTypeBinding.FIELD_EMUL].size());
    this.synthetics[SourceTypeBinding.FIELD_EMUL].put(enclosingType,synthField);
  }
  boolean needRecheck;
  do {
    needRecheck=false;
    FieldBinding existingField;
    if ((existingField=this.getField(synthField.name,true)) != null) {
      TypeDeclaration typeDecl=this.scope.referenceContext;
      for (int i=0, max=typeDecl.fields.length; i < max; i++) {
        FieldDeclaration fieldDecl=typeDecl.fields[i];
        if (fieldDecl.binding == existingField) {
          if (this.scope.compilerOptions().complianceLevel >= ClassFileConstants.JDK1_5) {
            synthField.name=CharOperation.concat(synthField.name,"$".toCharArray());
            needRecheck=true;
          }
 else {
            this.scope.problemReporter().duplicateFieldInType(this,fieldDecl);
          }
          break;
        }
      }
    }
  }
 while (needRecheck);
  return synthField;
}
