{
  if (typesSentToBrowser.maybeEnhanced(serializableClass) && typesSentFromBrowser.maybeEnhanced(serializableClass)) {
    sourceWriter.println(WEAK_MAPPING_CLASS_NAME + ".set(instance, " + "\"server-enhanced-data\", streamReader.readString());");
  }
  for (  JField serializableField : serializableFields) {
    JType fieldType=serializableField.getType();
    String readMethodName=Shared.getStreamReadMethodNameFor(fieldType);
    String streamReadExpression="streamReader." + readMethodName + "()";
    if (Shared.typeNeedsCast(fieldType)) {
      streamReadExpression="(" + fieldType.getQualifiedSourceName() + ") "+ streamReadExpression;
    }
    if (needsAccessorMethods(serializableField)) {
      sourceWriter.print("set");
      sourceWriter.print(Shared.capitalize(serializableField.getName()));
      sourceWriter.print("(instance, ");
      sourceWriter.print(streamReadExpression);
      sourceWriter.println(");");
    }
 else {
      sourceWriter.print("instance.");
      sourceWriter.print(serializableField.getName());
      sourceWriter.print(" = ");
      sourceWriter.print(streamReadExpression);
      sourceWriter.println(";");
    }
  }
  sourceWriter.println();
  JClassType superClass=serializableClass.getSuperclass();
  if (superClass != null && (typesSentFromBrowser.isSerializable(superClass) || typesSentToBrowser.isSerializable(superClass))) {
    String fieldSerializerName=SerializationUtils.getFieldSerializerName(typeOracle,superClass);
    sourceWriter.print(fieldSerializerName);
    sourceWriter.println(".deserialize(streamReader, instance);");
  }
}
