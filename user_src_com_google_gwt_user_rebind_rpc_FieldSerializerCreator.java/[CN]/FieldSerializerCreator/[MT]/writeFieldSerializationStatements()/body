{
  JType type=getSerializableClass();
  JArrayType isArray=type.isArray();
  if (isArray != null) {
    sourceWriter.println("int itemCount = instance.length;");
    sourceWriter.println();
    sourceWriter.println("streamWriter.writeInt(itemCount);");
    sourceWriter.println();
    sourceWriter.println("for (int itemIndex = 0; itemIndex < itemCount; ++itemIndex) {");
    sourceWriter.indent();
    String writeMethodName="write" + Shared.getCallSuffix(isArray.getComponentType());
    sourceWriter.print("streamWriter.");
    sourceWriter.print(writeMethodName);
    sourceWriter.println("(instance[itemIndex]);");
    sourceWriter.outdent();
    sourceWriter.println("}");
  }
 else {
    JField[] jFields=getSerializableFields();
    int fieldCount=jFields.length;
    for (int fieldIndex=0; fieldIndex < fieldCount; ++fieldIndex) {
      JField serializableField=jFields[fieldIndex];
      JType fieldType=serializableField.getType();
      String writeMethodName="write" + Shared.getCallSuffix(fieldType);
      sourceWriter.print("streamWriter.");
      sourceWriter.print(writeMethodName);
      sourceWriter.print("(");
      if (needsAccessorMethods(serializableField)) {
        sourceWriter.print("get");
        sourceWriter.print(Shared.capitalize(serializableField.getName()));
        sourceWriter.println("(instance));");
      }
 else {
        sourceWriter.print("instance.");
        sourceWriter.print(serializableField.getName());
        sourceWriter.println(");");
      }
    }
  }
  sourceWriter.println();
}
