{
  JType type=getSerializableClass();
  JArrayType isArray=type.isArray();
  if (isArray != null) {
    fSourceWriter.println("int itemCount = instance.length;");
    fSourceWriter.println();
    fSourceWriter.println("streamWriter.writeInt(itemCount);");
    fSourceWriter.println();
    fSourceWriter.println("for (int itemIndex = 0; itemIndex < itemCount; ++itemIndex) {");
    fSourceWriter.indent();
    String writeMethodName="write" + Shared.getCallSuffix(isArray.getComponentType());
    fSourceWriter.print("streamWriter.");
    fSourceWriter.print(writeMethodName);
    fSourceWriter.println("(instance[itemIndex]);");
    fSourceWriter.outdent();
    fSourceWriter.println("}");
  }
 else {
    JField[] serializableFields=getSerializableFields();
    int fieldCount=serializableFields.length;
    for (int fieldIndex=0; fieldIndex < fieldCount; ++fieldIndex) {
      JField serializableField=serializableFields[fieldIndex];
      JType fieldType=serializableField.getType();
      String writeMethodName="write" + Shared.getCallSuffix(fieldType);
      fSourceWriter.print("streamWriter.");
      fSourceWriter.print(writeMethodName);
      fSourceWriter.print("(");
      if (needsAccessorMethods(serializableField)) {
        fSourceWriter.print("get");
        fSourceWriter.print(Shared.capitalize(serializableField.getName()));
        fSourceWriter.println("(instance));");
      }
 else {
        fSourceWriter.print("instance.");
        fSourceWriter.print(serializableField.getName());
        fSourceWriter.println(");");
      }
    }
  }
  fSourceWriter.println();
}
