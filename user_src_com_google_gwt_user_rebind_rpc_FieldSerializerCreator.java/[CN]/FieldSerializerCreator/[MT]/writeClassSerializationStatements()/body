{
  if (serializableClass.isEnhanced()) {
    sourceWriter.println("streamWriter.writeString((String) " + WEAK_MAPPING_CLASS_NAME + ".get(instance, \"server-enhanced-data-"+ getDepth(serializableClass)+ "\"));");
  }
  for (  JField serializableField : serializableFields) {
    JType fieldType=serializableField.getType();
    String writeMethodName=Shared.getStreamWriteMethodNameFor(fieldType);
    sourceWriter.print("streamWriter.");
    sourceWriter.print(writeMethodName);
    sourceWriter.print("(");
    if (needsAccessorMethods(serializableField)) {
      sourceWriter.print("get");
      sourceWriter.print(Shared.capitalize(serializableField.getName()));
      sourceWriter.println("(instance));");
    }
 else {
      sourceWriter.print("instance.");
      sourceWriter.print(serializableField.getName());
      sourceWriter.println(");");
    }
  }
  sourceWriter.println();
  JClassType superClass=serializableClass.getSuperclass();
  if (superClass != null && (typesSentFromBrowser.isSerializable(superClass) || typesSentToBrowser.isSerializable(superClass))) {
    String superFieldSerializer=SerializationUtils.getFieldSerializerName(typeOracle,superClass);
    sourceWriter.print(superFieldSerializer);
    sourceWriter.println(".serialize(streamWriter, instance);");
  }
}
