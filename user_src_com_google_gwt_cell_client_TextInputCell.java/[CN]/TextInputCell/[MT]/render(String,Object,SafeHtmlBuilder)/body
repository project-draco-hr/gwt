{
  ViewData viewData=getViewData(key);
  if (viewData != null && viewData.getCurrentValue().equals(value)) {
    clearViewData(key);
    viewData=null;
  }
  String s=(viewData != null) ? viewData.getCurrentValue() : value;
  if (s != null) {
    SafeHtml html=renderer.render(s);
    sb.append(template.input(html.asString()));
  }
 else {
    sb.appendHtmlConstant("<input type=\"text\" tabindex=\"-1\"></input>");
  }
}
