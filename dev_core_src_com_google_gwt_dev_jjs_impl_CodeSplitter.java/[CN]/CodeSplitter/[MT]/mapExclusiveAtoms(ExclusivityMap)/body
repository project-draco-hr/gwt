{
  List<ControlFlowAnalyzer> allButOnes=computeAllButOneCfas();
  ControlFlowAnalyzer everything=computeCompleteCfa();
  Set<JField> allFields=new HashSet<JField>();
  Set<JMethod> allMethods=new HashSet<JMethod>();
  for (  JNode node : everything.getLiveFieldsAndMethods()) {
    if (node instanceof JField) {
      allFields.add((JField)node);
    }
    if (node instanceof JMethod) {
      allMethods.add((JMethod)node);
    }
  }
  allFields.addAll(everything.getFieldsWritten());
  for (  JRunAsync runAsync : jprogram.getRunAsyncs()) {
    int splitPoint=runAsync.getSplitPoint();
    if (isInitial(splitPoint)) {
      continue;
    }
    ControlFlowAnalyzer allButOne=allButOnes.get(splitPoint - 1);
    Set<JNode> allLiveNodes=union(allButOne.getLiveFieldsAndMethods(),allButOne.getFieldsWritten());
    fragmentMap.updateFields(splitPoint,allLiveNodes,allFields);
    fragmentMap.updateMethods(splitPoint,allButOne.getLiveFieldsAndMethods(),allMethods);
    fragmentMap.updateStrings(splitPoint,allButOne.getLiveStrings(),everything.getLiveStrings());
    fragmentMap.updateTypes(splitPoint,declaredTypesIn(allButOne.getInstantiatedTypes()),declaredTypesIn(everything.getInstantiatedTypes()));
  }
}
