{
  int numFixups=0;
  Queue<JDeclaredType> typesToCheck=new ArrayBlockingQueue<JDeclaredType>(jprogram.getDeclaredTypes().size());
  typesToCheck.addAll(jprogram.getDeclaredTypes());
  while (!typesToCheck.isEmpty()) {
    JDeclaredType type=typesToCheck.remove();
    if (type.getSuperClass() != null) {
      int typeFrag=getOrZero(fragmentMap.types,type);
      int supertypeFrag=getOrZero(fragmentMap.types,type.getSuperClass());
      if (typeFrag != supertypeFrag && supertypeFrag != 0) {
        numFixups++;
        fragmentMap.types.put(type.getSuperClass(),0);
        typesToCheck.add(type.getSuperClass());
      }
    }
  }
  if (logger.isLoggable(TreeLogger.DEBUG)) {
    logger.log(TreeLogger.DEBUG,"Fixed up load-order dependencies on supertypes by moving " + numFixups + " types to fragment 0, out of "+ jprogram.getDeclaredTypes().size());
  }
}
