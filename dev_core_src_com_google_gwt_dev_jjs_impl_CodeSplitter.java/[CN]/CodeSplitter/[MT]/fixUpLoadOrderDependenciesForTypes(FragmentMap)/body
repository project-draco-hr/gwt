{
  int numFixups=0;
  Queue<JReferenceType> typesToCheck=new ArrayBlockingQueue<JReferenceType>(jprogram.getDeclaredTypes().size());
  typesToCheck.addAll(jprogram.getDeclaredTypes());
  while (!typesToCheck.isEmpty()) {
    JReferenceType type=typesToCheck.remove();
    if (type.extnds != null) {
      int typeFrag=getOrZero(fragmentMap.types,type);
      int supertypeFrag=getOrZero(fragmentMap.types,type.extnds);
      if (typeFrag != supertypeFrag && supertypeFrag != 0) {
        numFixups++;
        fragmentMap.types.put(type.extnds,0);
        typesToCheck.add(type.extnds);
      }
    }
  }
  logger.log(TreeLogger.DEBUG,"Fixed up load-order dependencies by moving " + numFixups + " types to fragment 0, out of "+ jprogram.getDeclaredTypes().size());
}
