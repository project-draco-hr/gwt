{
  assertEquals("overall dir matches context dir (LTR)",en + "<",ltrFmt.unicodeWrapWithKnownDir(LTR,en + "<"));
  assertEquals("overall dir matches context dir (LTR), HTML",en + "<br>",ltrFmt.unicodeWrapWithKnownDir(LTR,en + "<br>",true));
  assertEquals("overall dir matches context dir (RTL)",he + "<",rtlFmt.unicodeWrapWithKnownDir(RTL,he + "<"));
  assertEquals("overall dir matches context dir (RTL), HTML",he + " <some strange tag>",rtlFmt.unicodeWrapWithKnownDir(RTL,he + " <some strange tag>",true));
  assertEquals("overall dir (RTL) doesnt match context dir (LTR), dirReset",RLE + he + PDF+ LRM,ltrFmt.unicodeWrapWithKnownDir(RTL,he));
  assertEquals("overall dir (RTL) doesnt match context dir (LTR), no dirReset",RLE + he + PDF,ltrFmt.unicodeWrapWithKnownDir(RTL,he,false,false));
  assertEquals("overall dir (LTR) doesnt match context dir (RTL), dirReset",LRE + en + PDF+ RLM,rtlFmt.unicodeWrapWithKnownDir(LTR,en));
  assertEquals("overall dir (LTR) doesnt match context dir (RTL), no dirReset",LRE + en + PDF,rtlFmt.unicodeWrapWithKnownDir(LTR,en,false,false));
  assertEquals("overall dir (RTL) doesnt match context dir (unknown), dirReset",RLE + he + PDF,unkFmt.unicodeWrapWithKnownDir(RTL,he));
  assertEquals("overall dir (LTR) doesnt match context dir (unknown), no dirReset",LRE + en + PDF,unkFmt.unicodeWrapWithKnownDir(LTR,en,false,false));
  assertEquals("overall dir (neutral) doesnt match context dir (LTR), dirReset",".",ltrFmt.unicodeWrapWithKnownDir(DEFAULT,"."));
  assertEquals("exit dir (but not overall dir) is opposite to context dir",longEn + he + LRM,ltrFmt.unicodeWrapWithKnownDir(LTR,longEn + he));
  assertEquals("overall dir (but not exit dir) is opposite to context dir",LRE + longEn + he+ PDF+ RLM,rtlFmt.unicodeWrapWithKnownDir(LTR,longEn + he));
  assertEquals("plain text overall and exit dir same as context dir",html + " " + he+ " "+ html,ltrFmt.unicodeWrapWithKnownDir(LTR,html + " " + he+ " "+ html,false));
  assertEquals("HTML overall and exit dir opposite to context dir",RLE + html + " "+ he+ " "+ html+ PDF+ LRM,ltrFmt.unicodeWrapWithKnownDir(RTL,html + " " + he+ " "+ html,true));
}
