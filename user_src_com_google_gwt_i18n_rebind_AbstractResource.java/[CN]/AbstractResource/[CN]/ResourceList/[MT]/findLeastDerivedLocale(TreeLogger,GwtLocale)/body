{
  List<GwtLocale> searchList=locale.getCompleteSearchList();
  Map<GwtLocale,Integer> derivedIndex=new HashMap<GwtLocale,Integer>();
  for (int i=0; i < searchList.size(); ++i) {
    derivedIndex.put(searchList.get(i),i);
  }
  GwtLocale best=LocaleUtils.getLocaleFactory().getDefault();
  int bestIdx=Integer.MAX_VALUE;
  for (int i=0; i < list.size(); ++i) {
    GwtLocale matchLocale=list.get(i).getMatchLocale();
    Integer wrappedIdx=derivedIndex.get(matchLocale);
    if (wrappedIdx == null) {
      logger.log(TreeLogger.WARN,"Locale " + matchLocale + " not in searchlist "+ searchList);
      continue;
    }
    int idx=wrappedIdx;
    if (idx < bestIdx) {
      bestIdx=idx;
      best=matchLocale;
    }
  }
  return best;
}
