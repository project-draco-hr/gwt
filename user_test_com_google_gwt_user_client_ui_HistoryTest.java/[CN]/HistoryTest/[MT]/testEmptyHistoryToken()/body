{
  final ArrayList<Object> counter=new ArrayList<Object>();
  addHistoryListenerImpl(new HistoryListener(){
    public void onHistoryChanged(    String historyToken){
      counter.add(new Object());
      assertFalse("Browser is borked by empty history token",isBorked());
    }
  }
);
  History.newItem("x");
  History.newItem("");
  assertEquals("Expected two history events",2,counter.size());
}
