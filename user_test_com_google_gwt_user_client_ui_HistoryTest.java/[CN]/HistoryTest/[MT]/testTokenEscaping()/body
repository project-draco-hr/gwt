{
  final String shouldBeEncoded="% ^[]|\"<>{}\\`";
  final String shouldBeEncodedAs="%25%20%5E%5B%5D%7C%22%3C%3E%7B%7D%5C%60";
  delayTestFinish(5000);
  History.addHistoryListener(new HistoryListener(){
    public void onHistoryChanged(    String token){
      assertEquals(shouldBeEncodedAs,getCurrentLocationHash());
      assertEquals(shouldBeEncoded,token);
      finishTest();
      History.removeHistoryListener(this);
    }
  }
);
  History.newItem(shouldBeEncoded);
}
