{
  delayTestFinish(5000);
  final String token="foo?bar";
  addHistoryListenerImpl(new ValueChangeHandler<String>(){
    @Override public void onValueChange(    ValueChangeEvent<String> event){
      String historyToken=event.getValue();
      if (historyToken == null) {
        fail("historyToken should not be null");
      }
      assertEquals(token,historyToken);
      finishTest();
    }
  }
);
  History.newItem(token);
}
