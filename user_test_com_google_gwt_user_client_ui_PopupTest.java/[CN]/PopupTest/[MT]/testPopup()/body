{
  Window.setMargin("0px");
  PopupPanel popup=new PopupPanel();
  Label lbl=new Label("foo");
  popup.setSize("384px","128px");
  popup.setPopupPosition(128,64);
  popup.setWidget(lbl);
  popup.show();
  assertEquals(384,popup.getOffsetWidth());
  assertEquals(128,popup.getOffsetHeight());
  assertEquals(128,popup.getPopupLeft());
  assertEquals(64,popup.getPopupTop());
  popup.setSize("","");
  popup.setPopupPosition(16,16);
  assertEquals(lbl.getOffsetWidth(),popup.getOffsetWidth());
  assertEquals(lbl.getOffsetHeight(),popup.getOffsetHeight());
  assertEquals(16,popup.getAbsoluteLeft());
  assertEquals(16,popup.getAbsoluteTop());
  delayTestFinish(1000);
  popup.addPopupListener(new PopupListener(){
    public void onPopupClosed(    PopupPanel sender,    boolean autoClosed){
      finishTest();
    }
  }
);
  popup.hide();
}
