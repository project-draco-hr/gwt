{
  Window.setMargin("0px");
  PopupPanel popup=new PopupPanel();
  Label lbl=new Label("foo");
  popup.setSize("384px","128px");
  popup.setPopupPosition(128,64);
  popup.setWidget(lbl);
  popup.show();
  assertEquals(popup.getOffsetWidth(),384);
  assertEquals(popup.getOffsetHeight(),128);
  assertEquals(popup.getPopupLeft(),128);
  assertEquals(popup.getPopupTop(),64);
  popup.setSize("","");
  popup.setPopupPosition(16,16);
  assertEquals(popup.getOffsetWidth(),lbl.getOffsetWidth());
  assertEquals(popup.getOffsetHeight(),lbl.getOffsetHeight());
  assertEquals(popup.getAbsoluteLeft(),16);
  assertEquals(popup.getAbsoluteTop(),16);
  delayTestFinish(1000);
  popup.addPopupListener(new PopupListener(){
    public void onPopupClosed(    PopupPanel sender,    boolean autoClosed){
      finishTest();
    }
  }
);
  popup.hide();
}
