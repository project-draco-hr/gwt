{
  MockLoadStrategy reqs=new MockLoadStrategy();
  MockProgressLogger progress=new MockProgressLogger();
  int numEntries=6;
  AsyncFragmentLoader loader=new AsyncFragmentLoader(numEntries,new int[]{1,2,3},reqs,progress,null);
  for (int i=0; i < 10; i++) {
    MockErrorHandler error=new MockErrorHandler();
    loader.inject(4,error);
    reqs.assertFragmentsRequested(1);
    progress.assertEvent("download1",BEGIN,1);
    loadFailed(reqs,1);
    assertTrue(error.getWasCalled());
    progress.assertNoEvents();
  }
}
