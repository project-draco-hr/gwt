{
  final Set<CompilationUnit> visited=new HashSet<CompilationUnit>();
  final Queue<CompilationUnit> toVisit=new LinkedList<CompilationUnit>();
  Map<String,CompiledClass> classMap=compilationState.getClassFileMapBySource();
  addUnitToVisit(classMap,missingType,toVisit,visited);
  while (!toVisit.isEmpty()) {
    CompilationUnit unit=toVisit.remove();
    CompilationProblemReporter.reportErrors(logger,unit,false);
    for (    String apiRef : unit.getDependencies().getApiRefs()) {
      addUnitToVisit(classMap,apiRef,toVisit,visited);
    }
  }
  logger.log(TreeLogger.DEBUG,"Checked " + visited.size() + " dependencies for errors.");
}
