{
  Map<Integer,Integer> simpleMap=new ReferenceMap(AbstractReferenceMap.HARD,AbstractReferenceMap.WEAK,true);
  Integer bar=new Integer(42);
  simpleMap.put(new Integer(32),bar);
  Runtime.getRuntime().gc();
  assertEquals(1,simpleMap.size());
  bar=null;
  Runtime.getRuntime().gc();
  assertEquals(0,simpleMap.size());
  simpleMap=new ReferenceMap(AbstractReferenceMap.WEAK,AbstractReferenceMap.WEAK,true);
  Map<Integer,Integer> reverseMap=new ReferenceMap(AbstractReferenceMap.WEAK,AbstractReferenceMap.WEAK,true);
  Integer foo=new Integer(32);
  bar=new Integer(42);
  simpleMap.put(foo,bar);
  reverseMap.put(bar,foo);
  Runtime.getRuntime().gc();
  assertEquals(1,simpleMap.size());
  assertEquals(1,reverseMap.size());
  bar=null;
  Runtime.getRuntime().gc();
  assertEquals(0,simpleMap.size());
  assertEquals(0,reverseMap.size());
}
