{
  String name;
synchronized (validator) {
    name=validator.getEntityProxyTypeName(domainClass.getName(),clientClass.getName());
  }
  if (name != null) {
    return forName(name).asSubclass(clientClass);
  }
  if (List.class.isAssignableFrom(domainClass)) {
    return List.class.asSubclass(clientClass);
  }
  if (Set.class.isAssignableFrom(domainClass)) {
    return Set.class.asSubclass(clientClass);
  }
  if (TypeUtils.isValueType(domainClass)) {
    return domainClass.asSubclass(clientClass);
  }
  if (required) {
    die(null,"The domain type %s cannot be sent to the client",domainClass.getCanonicalName());
  }
  return null;
}
