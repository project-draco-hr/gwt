{
  long employeeId=1;
  try {
    String value=Window.Location.getParameter(EMPLOYEE_ID_PARAM);
    if (value != null && value.length() > 0) {
      employeeId=Long.parseLong(value);
    }
  }
 catch (  NumberFormatException e) {
    RootPanel.get().add(new Label("employeeId is invalid"));
    return;
  }
  final HandlerManager eventBus=new HandlerManager(null);
  final ExpensesRequestFactory requestFactory=GWT.create(ExpensesRequestFactory.class);
  requestFactory.init(eventBus);
  requestFactory.employeeRequest().findEmployee(Value.of(employeeId)).fire(new Receiver<EmployeeRecord>(){
    public void onSuccess(    EmployeeRecord employee,    Set<SyncResult> syncResults){
      final ExpensesMobileShell shell=new ExpensesMobileShell(eventBus,requestFactory,employee);
      RootPanel.get().add(shell);
      eventBus.addHandler(RequestEvent.TYPE,new AuthenticationFailureHandler());
      final LoginWidget login=shell.getLoginWidget();
      Receiver<UserInformationRecord> receiver=new Receiver<UserInformationRecord>(){
        public void onSuccess(        UserInformationRecord userInformationRecord,        Set<SyncResult> syncResults){
          login.setUserInformation(userInformationRecord);
        }
      }
;
      requestFactory.userInformationRequest().getCurrentUserInformation(Location.getHref()).fire(receiver);
    }
  }
);
}
