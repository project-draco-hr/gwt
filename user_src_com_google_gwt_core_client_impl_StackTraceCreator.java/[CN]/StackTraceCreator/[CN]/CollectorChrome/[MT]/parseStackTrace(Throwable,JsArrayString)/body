{
  StackTraceElement[] stackTrace=new StackTraceElement[stack.length()];
  for (int i=0, j=stackTrace.length; i < j; i++) {
    String stackElements[]=stack.get(i).split("@@");
    int line=LINE_NUMBER_UNKNOWN;
    int col=-1;
    String fileName="Unknown";
    if (stackElements.length == 2 && stackElements[1] != null) {
      String location=stackElements[1];
      int lastColon=location.lastIndexOf(':');
      int endFileUrl=location.lastIndexOf(':',lastColon - 1);
      fileName=location.substring(0,endFileUrl);
      if (lastColon != -1 && endFileUrl != -1) {
        line=parseInt(location.substring(endFileUrl + 1,lastColon));
        col=parseInt(location.substring(lastColon + 1));
      }
    }
    stackTrace[i]=new StackTraceElement("Unknown",stackElements[0],fileName,line < 0 ? -1 : col * MAX_LINE_NUMBER + line);
  }
  e.setStackTrace(stackTrace);
}
