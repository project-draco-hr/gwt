{
  JsArrayString stack=collect();
  JsArrayString locations=getLocation();
  StackTraceElement[] stackTrace=new StackTraceElement[stack.length()];
  for (int i=0, j=stackTrace.length; i < j; i++) {
    String location=locations.get(j - i - 1);
    String fileName="Unknown source";
    int lineNumber=0;
    if (location != null) {
      int idx=location.indexOf(':');
      if (idx != -1) {
        fileName=location.substring(0,idx);
        lineNumber=Integer.parseInt(location.substring(idx + 1));
      }
 else {
        lineNumber=Integer.parseInt(location);
      }
    }
    stackTrace[i]=new StackTraceElement("Unknown",stack.get(i),fileName,lineNumber);
  }
  t.setStackTrace(stackTrace);
}
