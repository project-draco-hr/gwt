{
  JavaScriptObject e=(thrown instanceof JavaScriptObject) ? (JavaScriptObject)thrown : null;
  Collector collector=newCollector();
  JsArrayString stack=collector.inferFrom(e);
  StackTraceElement[] stackTrace=collector.getStackTrace(stack);
  if (stackTrace != null) {
    if (strip) {
      stackTrace=dropInternalFrames(stackTrace);
    }
    t.setStackTrace(stackTrace);
  }
}
