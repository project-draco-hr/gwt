{
  this.incrementalCompile=compilerContext.getOptions().isIncrementalCompileEnabled();
  this.logger=logger;
  this.compilerContext=compilerContext;
  this.program=program;
  this.jsProgram=jsProgram;
  this.rpo=precompilationContext.getRebindPermutationOracle();
  this.permutations=precompilationContext.getPermutations();
  this.compilationState=rpo.getCompilationState();
  this.compiledClassesByInternalName=compilationState.getClassFileMap();
  this.compiledClassesBySourceName=compilationState.getClassFileMapBySource();
  initializeNameBasedLocators();
  this.minimalRebuildCache=compilerContext.getMinimalRebuildCache();
  if (incrementalCompile) {
    this.staleTypeNames=minimalRebuildCache.computeAndClearStaleTypesCache(logger,program.typeOracle);
    checkPreambleTypesStillFresh(logger);
  }
}
