{
  JReferenceType enclosingType=method.getEnclosingType();
  if (enclosingType != null) {
    if (method.isStatic() && nameRef.getQualifier() != null) {
      reportJsniError(info,methodDecl,"Cannot make a qualified reference to the static method " + method.getName());
    }
 else     if (!method.isStatic() && nameRef.getQualifier() == null) {
      reportJsniError(info,methodDecl,"Cannot make an unqualified reference to the instance method " + method.getName());
    }
 else     if (!method.isStatic() && program.isJavaScriptObject(enclosingType)) {
      reportJsniError(info,methodDecl,"Illegal reference to instance method '" + method.getName() + "' in type '"+ enclosingType.getName()+ "', which is an overlay type; only static references to overlay types are allowed from JSNI");
    }
  }
  if (ctx.isLvalue()) {
    reportJsniError(info,methodDecl,"Cannot reassign the Java method " + method.getName());
  }
  JsniMethodRef methodRef=new JsniMethodRef(program,info,nameRef.getIdent(),method);
  nativeMethodBody.jsniMethodRefs.add(methodRef);
}
