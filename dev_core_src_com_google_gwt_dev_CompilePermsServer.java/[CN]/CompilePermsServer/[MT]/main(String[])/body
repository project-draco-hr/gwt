{
  int exitCode=-1;
  final CompileServerOptions options=new CompileServerOptionsImpl();
  if (new ArgProcessor(options).processArgs(args)) {
    PrintWriterTreeLogger logger=new PrintWriterTreeLogger();
    logger.setMaxDetail(options.getLogLevel());
    if (run(options,logger)) {
      exitCode=0;
    }
  }
  PerfCounter.print();
  System.exit(exitCode);
}
