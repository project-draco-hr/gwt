{
  Permutation p=(Permutation)in.readObject();
  logger.log(TreeLogger.SPAM,"Permutation read");
  Throwable caught=null;
  try {
    PermutationResult result=CompilePerms.compile(logger.branch(TreeLogger.DEBUG,"Compiling"),p,ast);
    out.writeObject(result);
    out.flush();
    logger.log(TreeLogger.DEBUG,"Successfully compiled permutation");
    return;
  }
 catch (  UnableToCompleteException e) {
    caught=e;
  }
catch (  Throwable e) {
    logger.log(TreeLogger.ERROR,"Compile failed",e);
    caught=e;
  }
  out.writeObject(caught);
  out.flush();
  logger.log(TreeLogger.SPAM,"Sent result");
}
