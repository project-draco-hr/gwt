{
  if (other == null) {
    throw new NullPointerException();
  }
  if (toffset < 0 || ooffset < 0 || len <= 0) {
    return false;
  }
  if (toffset + len > this.length() || ooffset + len > other.length()) {
    return false;
  }
  String left=__substr(this,toffset,len);
  String right=__substr(other,ooffset,len);
  return ignoreCase ? left.equalsIgnoreCase(right) : left.equals(right);
}
