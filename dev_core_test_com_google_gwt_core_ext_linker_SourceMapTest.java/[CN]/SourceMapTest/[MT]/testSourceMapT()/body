{
  String benchmark="hello";
  String module="com.google.gwt.sample.hello.Hello";
  File work=Utility.makeTemporaryDirectory(null,benchmark + "work");
  try {
    options.setSoycEnabled(true);
    options.setJsonSoycEnabled(true);
    options.addModuleName(module);
    options.setWarDir(new File(work,"war"));
    options.setExtraDir(new File(work,"extra"));
    PrintWriterTreeLogger logger=new PrintWriterTreeLogger();
    logger.setMaxDetail(TreeLogger.ERROR);
    new com.google.gwt.dev.Compiler(options).run(logger);
    String parentDir=options.getExtraDir() + "/" + benchmark;
    testSymbolMapsCorrespondence(new File(parentDir + "/symbolMaps/"));
    testSoycCorrespondence(new File(parentDir + "/soycReport/"));
  }
  finally {
    Util.recursiveDelete(work,false);
  }
}
