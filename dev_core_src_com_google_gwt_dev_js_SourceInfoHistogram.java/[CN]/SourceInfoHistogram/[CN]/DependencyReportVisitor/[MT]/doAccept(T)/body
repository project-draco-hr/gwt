{
  boolean createScope=((Object)node) instanceof JsProgram || ((Object)node) instanceof JsFunction;
  if (createScope) {
    currentContext.push((HasSourceInfo)node);
  }
  if (!(((Object)node) instanceof JsValueLiteral) && !currentContext.isEmpty()) {
    Set<Correlation> toAdd=((HasSourceInfo)node).getSourceInfo().getAllCorrelations();
    HasSourceInfo context=currentContext.peek();
    for (    Correlation c : context.getSourceInfo().getAllCorrelations()) {
      Set<Correlation> set=deps.get(c);
      if (set == null) {
        deps.put(c,set=new TreeSet<Correlation>(Correlation.AXIS_IDENT_COMPARATOR));
      }
      set.addAll(toAdd);
    }
  }
  T toReturn=super.doAccept(node);
  if (createScope) {
    currentContext.pop();
  }
  return toReturn;
}
