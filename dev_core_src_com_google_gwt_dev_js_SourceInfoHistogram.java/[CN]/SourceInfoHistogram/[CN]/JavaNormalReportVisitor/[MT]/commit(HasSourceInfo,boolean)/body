{
  SourceInfo info=x.getSourceInfo();
  List<StringBuilder> builders=new ArrayList<StringBuilder>();
  for (  Correlation c : info.getPrimaryCorrelations()) {
    StringBuilder builder=sourceByCorrelation.get(c);
    if (builder == null) {
      builder=new StringBuilder();
      sourceByCorrelation.put(c,builder);
    }
    builders.add(builder);
  }
  for (  Correlation c : info.getAllCorrelations()) {
    StringBuilder builder=sourceByAllCorrelation.get(c);
    if (builder == null) {
      builder=new StringBuilder();
      sourceByAllCorrelation.put(c,builder);
    }
    builders.add(builder);
  }
  if (expectMore) {
    return out.flush(builders);
  }
 else {
    return out.commit(builders);
  }
}
