{
  String caption=null;
  String body=null;
  for (  XMLElement child : elem.consumeChildElements()) {
    if ("caption".equals(child.getLocalName())) {
      if (caption != null) {
        writer.die(elem,"May have only one <%s:caption>",elem.getPrefix());
      }
      HtmlInterpreter interpreter=HtmlInterpreter.newInterpreterForUiObject(writer,fieldName);
      caption=child.consumeInnerHtml(interpreter);
    }
 else {
      if (body != null) {
        writer.die(elem,"May have only one widget, but found %s and %s",body,child);
      }
      if (!writer.isWidgetElement(child)) {
        writer.die(elem,"Found non-widget %s",child);
      }
      body=writer.parseElementToField(child);
    }
  }
  handleConstructorArgs(elem,fieldName,type,writer);
  if (caption != null) {
    writer.addStatement("%s.setHTML(\"%s\");",fieldName,caption);
  }
  if (body != null) {
    writer.addStatement("%s.setWidget(%s);",fieldName,body);
  }
}
