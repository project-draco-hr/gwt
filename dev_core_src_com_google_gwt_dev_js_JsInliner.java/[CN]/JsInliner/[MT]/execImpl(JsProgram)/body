{
  OptimizerStats stats=new OptimizerStats(NAME);
  RedefinedFunctionCollector d=new RedefinedFunctionCollector();
  d.accept(program);
  RecursionCollector rc=new RecursionCollector();
  rc.accept(program);
  InliningVisitor v=new InliningVisitor(program);
  v.blacklist(d.getRedefined());
  v.blacklist(rc.getRecursive());
  v.accept(program);
  if (v.didChange()) {
    stats.recordModified();
  }
  DuplicateXORemover r=new DuplicateXORemover(program);
  r.accept(program);
  if (r.didChange()) {
    stats.recordModified();
  }
  return stats;
}
