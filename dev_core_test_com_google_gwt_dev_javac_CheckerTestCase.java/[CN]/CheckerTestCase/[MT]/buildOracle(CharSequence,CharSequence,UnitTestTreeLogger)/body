{
  Set<Resource> resources=new HashSet<Resource>();
  addLongCheckingCups(resources);
  StaticJavaResource buggyResource=new StaticJavaResource("Buggy",buggyCode);
  Set<GeneratedUnit> generatedUnits=CompilationStateTestBase.getGeneratedUnits(buggyResource);
  if (extraCode != null) {
    StaticJavaResource extraResource=new StaticJavaResource("Extra",extraCode);
    generatedUnits.addAll(CompilationStateTestBase.getGeneratedUnits(extraResource));
  }
  return TypeOracleTestingUtils.buildStandardTypeOracleWith(logger,resources,generatedUnits);
}
