{
  final ClientSerializationStreamReader streamReader=new ClientSerializationStreamReader(serializer);
  T result=null;
  Throwable caught=null;
  String encodedResponse=response.getText();
  try {
    if (isReturnValue(encodedResponse)) {
      streamReader.prepareToRead(getEncodedInstance(encodedResponse));
      result=(T)responseReader.read(streamReader);
    }
 else     if (isThrownException(encodedResponse)) {
      streamReader.prepareToRead(getEncodedInstance(encodedResponse));
      caught=(Throwable)streamReader.readObject();
    }
 else {
      assert(isInvocationException(encodedResponse));
      caught=new com.google.gwt.user.client.rpc.InvocationException(encodedResponse);
    }
  }
 catch (  com.google.gwt.user.client.rpc.SerializationException e) {
    caught=new com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException();
  }
catch (  Throwable e) {
    caught=e;
  }
  if (caught == null) {
    callback.onSuccess(result);
  }
 else {
    callback.onFailure(caught);
  }
}
