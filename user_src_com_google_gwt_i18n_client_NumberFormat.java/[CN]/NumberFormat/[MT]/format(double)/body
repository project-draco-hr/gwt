{
  StringBuffer result=new StringBuffer();
  if (Double.isNaN(number)) {
    result.append(numberConstants.notANumber());
    return result.toString();
  }
  boolean isNegative=((number < 0.0) || (number == 0.0 && 1 / number < 0.0));
  result.append(isNegative ? negativePrefix : positivePrefix);
  if (Double.isInfinite(number)) {
    result.append(numberConstants.infinity());
  }
 else {
    if (isNegative) {
      number=-number;
    }
    number*=multiplier;
    if (useExponentialNotation) {
      subformatExponential(number,result);
    }
 else {
      subformatFixed(number,result,minimumIntegerDigits);
    }
  }
  result.append(isNegative ? negativeSuffix : positiveSuffix);
  return result.toString();
}
