{
  setupFruitEnum();
  setupVegetableEnum();
  addSnippetClassDecl("public static Enum returnAsEnum(int mode) {","  if (mode == 0) {","    return Fruit.APPLE;","  } else {","    return Vegetable.CARROT;","  }","}");
  Result result=optimize("void","Enum myEnum = returnAsEnum(0);","Enum myOtherEnum = returnAsEnum(1);","int ord = Fruit.APPLE.ordinal() + Vegetable.CARROT.ordinal();");
  EnumOrdinalizer.Tracker tracker=EnumOrdinalizer.getTracker();
  assertTrue(tracker.isVisited("test.EntryPoint$Fruit"));
  assertFalse(tracker.isOrdinalized("test.EntryPoint$Fruit"));
  assertTrue(tracker.isVisited("test.EntryPoint$Vegetable"));
  assertFalse(tracker.isOrdinalized("test.EntryPoint$Vegetable"));
  assertAllEnumOrdinalizedReferencesReplaced(result.getOptimizedProgram(),tracker);
}
