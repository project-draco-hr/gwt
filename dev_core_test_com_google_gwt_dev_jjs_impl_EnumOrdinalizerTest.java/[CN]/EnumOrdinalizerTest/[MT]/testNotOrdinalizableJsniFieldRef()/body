{
  setupFruitEnum();
  addSnippetClassDecl("public static Fruit instanceFruit;");
  addSnippetClassDecl("public static native void jsniMethod() /*-{","  var x = @test.EntryPoint::instanceFruit","}-*/");
  Result result=optimize("void","instanceFruit = Fruit.APPLE;","jsniMethod();","int ord = Util.notInlineable(Fruit.APPLE).ordinal();");
  EnumOrdinalizer.Tracker tracker=EnumOrdinalizer.getTracker();
  assertTrue(tracker.isVisited("test.EntryPoint$Fruit"));
  assertFalse(tracker.isOrdinalized("test.EntryPoint$Fruit"));
  assertAllEnumOrdinalizedReferencesReplaced(result.getOptimizedProgram(),tracker);
}
