{
  Map<String,Collection<String>> stringListsByString=stringMultimap.asMap();
  createZipEntry(entryName);
  Iterator<Entry<String,Collection<String>>> entryIterator=stringListsByString.entrySet().iterator();
  try {
    while (entryIterator.hasNext()) {
      Entry<String,Collection<String>> entry=entryIterator.next();
      String key=encode(entry.getKey());
      zipOutputStream.write(key.getBytes());
      boolean first=true;
      Collection<String> values=entry.getValue();
      for (      String value : values) {
        if (first) {
          first=false;
          zipOutputStream.write(keyValueSeparatorBytes);
        }
 else {
          zipOutputStream.write(valueSeparatorBytes);
        }
        zipOutputStream.write(encode(value).getBytes());
      }
      if (entryIterator.hasNext()) {
        zipOutputStream.write(lineSeparatorBytes);
      }
    }
  }
 catch (  IOException e) {
    throw new CompilerIoException("Failed to write " + entryName + " as a String multimap.",e);
  }
}
