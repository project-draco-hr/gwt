{
  ensureFileReady();
  startEntry(Libraries.computeCompilationUnitEntryName(compilationUnit.getTypeName()));
  try {
    ObjectOutputStream out=new ObjectOutputStream(zipOutputStream);
    out.writeObject(compilationUnit);
  }
 catch (  IOException e) {
    throw new CompilerIoException("Failed to serialize compilation unit " + compilationUnit.getTypeName() + " in new library "+ zipFile.getPath()+ ".",e);
  }
}
