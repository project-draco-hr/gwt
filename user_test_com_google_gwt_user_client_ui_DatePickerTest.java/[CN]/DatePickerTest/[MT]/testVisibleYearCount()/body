{
  DatePickerWithView dp=new DatePickerWithView(new MockCalendarView());
  dp.setYearAndMonthDropdownVisible(true);
  dp.setCurrentMonth(new Date(82,6,10));
  RootPanel.get().add(dp);
  ListBox yearSelect=dp.getDefaultMonthSelector().getYearSelectListBox();
  assertEquals(21,yearSelect.getItemCount());
  assertEquals("1972",yearSelect.getItemText(0));
  assertEquals("1982",yearSelect.getItemText(10));
  assertEquals("1992",yearSelect.getItemText(20));
  dp.setVisibleYearCount(1);
  assertEquals(1,yearSelect.getItemCount());
  assertEquals("1982",yearSelect.getItemText(0));
  dp.setVisibleYearCount(2);
  assertEquals(2,yearSelect.getItemCount());
  assertEquals("1982",yearSelect.getItemText(0));
  assertEquals("1983",yearSelect.getItemText(1));
  dp.setVisibleYearCount(3);
  assertEquals(3,yearSelect.getItemCount());
  assertEquals("1981",yearSelect.getItemText(0));
  assertEquals("1982",yearSelect.getItemText(1));
  assertEquals("1983",yearSelect.getItemText(2));
  dp.setVisibleYearCount(10);
  assertEquals(10,yearSelect.getItemCount());
  assertEquals("1978",yearSelect.getItemText(0));
  assertEquals("1982",yearSelect.getItemText(4));
  assertEquals("1987",yearSelect.getItemText(9));
  dp.setVisibleYearCount(11);
  assertEquals(11,yearSelect.getItemCount());
  assertEquals("1977",yearSelect.getItemText(0));
  assertEquals("1982",yearSelect.getItemText(5));
  assertEquals("1987",yearSelect.getItemText(10));
}
