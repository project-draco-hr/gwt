{
  Map<String,String> attNameToToken=new HashMap<String,String>();
  for (int i=elem.getAttributeCount() - 1; i >= 0; i--) {
    XMLAttribute att=elem.getAttribute(i);
    AttributeParser parser=writer.getAttributeParser(att);
    if (parser != null) {
      String parsedValue=parser.parse(att.consumeValue(),writer);
      String attToken=writer.tokenForExpression(parsedValue);
      attNameToToken.put(att.getLocalName(),attToken);
    }
  }
  for (  Map.Entry<String,String> attr : attNameToToken.entrySet()) {
    elem.setAttribute(attr.getKey(),attr.getValue());
  }
  return null;
}
