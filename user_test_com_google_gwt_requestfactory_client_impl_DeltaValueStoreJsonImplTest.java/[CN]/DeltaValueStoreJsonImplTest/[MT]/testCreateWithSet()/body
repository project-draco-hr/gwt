{
  EntityProxy created=requestFactory.create(SimpleFooProxy.class);
  assertNotNull(((ProxyImpl)created).encodedId());
  assertNotNull(((ProxyImpl)created).version());
  DeltaValueStoreJsonImpl deltaValueStore=new DeltaValueStoreJsonImpl(valueStore,requestFactory);
  assertFalse(deltaValueStore.isChanged());
  deltaValueStore.set(SimpleFooProxyProperties.userName,created,"harry");
  assertTrue(deltaValueStore.isChanged());
  JSONObject changeProxy=testAndGetChangeProxy(deltaValueStore.toJson(),WriteOperation.PERSIST);
  assertEquals("harry",changeProxy.get(SimpleFooProxyProperties.userName.getName()).isString().stringValue());
}
