{
  JSONObject jsonObject=(JSONObject)JSONParser.parseLenient(jsonString);
  for (  WriteOperation writeOperation : WriteOperation.values()) {
    if (writeOperation != currentWriteOperation) {
      assertFalse(jsonObject.containsKey(writeOperation.name()));
    }
 else {
      assertTrue(jsonObject.containsKey(writeOperation.name()));
    }
  }
  JSONArray writeOperationArray=jsonObject.get(currentWriteOperation.name()).isArray();
  assertEquals(1,writeOperationArray.size());
  JSONObject recordWithName=writeOperationArray.get(0).isObject();
  assertEquals(1,recordWithName.size());
  assertTrue(recordWithName.containsKey(SimpleFooRecord.class.getName()));
  JSONObject record=recordWithName.get(SimpleFooRecord.class.getName()).isObject();
  assertTrue(record.containsKey("id"));
  assertTrue(record.containsKey("version"));
  return record;
}
