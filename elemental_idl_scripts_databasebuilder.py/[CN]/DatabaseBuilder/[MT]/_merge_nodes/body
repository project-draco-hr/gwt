def _merge_nodes(self, old_list, new_list, import_options):
    'Merges two lists of nodes. Annotates nodes with the source of each\n    node.\n\n    Returns:\n      True if the old_list has changed.\n\n    Args:\n      old_list -- the list to merge into.\n      new_list -- list containing more nodes.\n      import_options -- controls how merging is done.\n    '
    changed = False
    source = import_options.source
    old_signatures_map = self._build_signatures_map(old_list)
    new_signatures_map = self._build_signatures_map(new_list)
    for (sig, new_node) in new_signatures_map.items():
        if (sig not in old_signatures_map):
            old_list.append(new_node)
            changed = True
        else:
            old_node = old_signatures_map[sig]
            if ((source not in old_node.annotations) and (source in new_node.annotations)):
                old_node.annotations[source] = new_node.annotations[source]
                changed = True
            if isinstance(old_node, IDLOperation):
                for i in range(0, len(old_node.arguments)):
                    old_arg_name = old_node.arguments[i].id
                    new_arg_name = new_node.arguments[i].id
                    if ((old_arg_name != new_arg_name) and ((old_arg_name == 'arg') or old_arg_name.endswith('Arg') or import_options.rename_operation_arguments_on_merge)):
                        old_node.arguments[i].id = new_arg_name
                        changed = True
            if (isinstance(old_node, IDLAttribute) or isinstance(old_node, IDLOperation)):
                if self._merge_ext_attrs(old_node.ext_attrs, new_node.ext_attrs):
                    changed = True
    if import_options.obsolete_old_declarations:
        for (sig, old_node) in old_signatures_map.items():
            if ((source in old_node.annotations) and (sig not in new_signatures_map)):
                _logger.warn(('%s not available in %s anymore' % (sig, source)))
                del old_node.annotations[source]
                changed = True
    return changed
