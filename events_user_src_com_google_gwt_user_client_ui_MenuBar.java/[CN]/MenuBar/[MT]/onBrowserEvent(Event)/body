{
  super.onBrowserEvent(event);
  MenuItem item=findItem(DOM.eventGetTarget(event));
switch (DOM.eventGetType(event)) {
case Event.ONCLICK:
{
      FocusPanel.impl.focus(getElement());
      if (item != null) {
        doItemAction(item,true);
      }
      break;
    }
case Event.ONMOUSEOVER:
{
    if (item != null) {
      itemOver(item,true);
    }
    break;
  }
case Event.ONMOUSEOUT:
{
  if (item != null) {
    itemOver(null,true);
  }
  break;
}
case Event.ONFOCUS:
{
selectFirstItemIfNoneSelected();
break;
}
case Event.ONKEYDOWN:
{
int keyCode=DOM.eventGetKeyCode(event);
switch (keyCode) {
case KeyCodeEvent.KEY_LEFT:
if (LocaleInfo.getCurrentLocale().isRTL()) {
  moveToNextItem();
}
 else {
  moveToPrevItem();
}
eatEvent(event);
break;
case KeyCodeEvent.KEY_RIGHT:
if (LocaleInfo.getCurrentLocale().isRTL()) {
moveToPrevItem();
}
 else {
moveToNextItem();
}
eatEvent(event);
break;
case KeyCodeEvent.KEY_UP:
moveUp();
eatEvent(event);
break;
case KeyCodeEvent.KEY_DOWN:
moveDown();
eatEvent(event);
break;
case KeyCodeEvent.KEY_ESCAPE:
closeAllParents();
eatEvent(event);
break;
case KeyCodeEvent.KEY_ENTER:
if (!selectFirstItemIfNoneSelected()) {
doItemAction(selectedItem,true);
eatEvent(event);
}
break;
}
break;
}
}
}
