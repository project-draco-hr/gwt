{
  Set<String> invalidTypes=new HashSet<String>();
  if (logger.isLoggable(TreeLogger.TRACE)) {
    TreeLogger branch=logger.branch(TreeLogger.TRACE,"The following compilation units have changed since " + "the last compilation to bytecode",null);
    for (Iterator<String> iter=changedFiles.iterator(); iter.hasNext(); ) {
      String filename=iter.next();
      branch.log(TreeLogger.TRACE,filename,null);
    }
  }
  for (  String key : byteCodeCache.keySet()) {
    ByteCode byteCode=((ByteCode)(byteCodeCache.get(key)));
    if (byteCode != null) {
      String location=byteCode.getLocation();
      if (changedFiles.contains(location)) {
        String binaryTypeName=byteCode.getBinaryTypeName();
        invalidTypes.add(binaryTypeName);
        removeFromCache(logger,binaryTypeName);
      }
    }
  }
  compiler.invalidateUnitsInFiles(invalidTypes);
  changedFiles.clear();
}
