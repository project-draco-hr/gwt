{
  GWT.create(GeneratorInfo.class);
  ShowcaseConstants constants=(ShowcaseConstants)GWT.create(ShowcaseConstants.class);
  app=new Application();
  setupTitlePanel(constants);
  setupMainLinks(constants);
  setupOptionsPanel();
  setupMainMenu(constants);
  updateStyleSheets();
  final HistoryListener historyListener=new HistoryListener(){
    public void onHistoryChanged(    String historyToken){
      if (ignoreNextHistoryEvent) {
        ignoreNextHistoryEvent=false;
        return;
      }
      TreeItem item=itemTokens.get(historyToken);
      if (item != null) {
        app.getMainMenu().setSelectedItem(item,false);
        app.getMainMenu().ensureSelectedItemVisible();
        displayContentWidget(itemWidgets.get(item));
      }
    }
  }
;
  History.addHistoryListener(historyListener);
  app.setListener(new ApplicationListener(){
    public void onMenuItemSelected(    TreeItem item){
      ContentWidget content=itemWidgets.get(item);
      if (content != null && !content.equals(app.getContent())) {
        displayContentWidget(content);
        ignoreNextHistoryEvent=true;
        History.newItem(getContentWidgetToken(content));
      }
    }
  }
);
  StyleSheetLoader.waitForStyleSheet(getCurrentReferenceStyleName(),new Command(){
    public void execute(){
      if (!app.isAttached()) {
        RootPanel.get().add(app);
      }
      String initToken=History.getToken();
      if (initToken.length() > 0) {
        historyListener.onHistoryChanged(initToken);
      }
 else {
        TreeItem firstItem=app.getMainMenu().getItem(0).getChild(0);
        app.getMainMenu().setSelectedItem(firstItem,true);
        app.getMainMenu().ensureSelectedItemVisible();
      }
    }
  }
);
}
