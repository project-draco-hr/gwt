{
  if (serviceMethod == null) {
    throw new NullPointerException("serviceMethod cannot be null");
  }
  if (serializationPolicy == null) {
    throw new NullPointerException("serializationPolicy");
  }
  Class<?> methodReturnType=serviceMethod.getReturnType();
  if (methodReturnType != void.class && object != null) {
    Class<?> actualReturnType;
    if (methodReturnType.isPrimitive()) {
      actualReturnType=getPrimitiveClassFromWrapper(object.getClass());
    }
 else {
      actualReturnType=object.getClass();
    }
    if (actualReturnType == null || !methodReturnType.isAssignableFrom(actualReturnType)) {
      throw new IllegalArgumentException("Type '" + printTypeName(object.getClass()) + "' does not match the return type in the method's signature: '"+ getSourceRepresentation(serviceMethod)+ "'");
    }
  }
  return encodeResponse(methodReturnType,object,false,serializationPolicy);
}
