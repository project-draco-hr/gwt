{
  String victimTypeName="com.google.gwt.dev.testdata.incrementalbuildsystem.EntryPointCompileFails";
  String causeTypeName="com.google.gwt.dev.testdata.incrementalbuildsystem.ImmediateCompileFails";
  UnitTestTreeLogger.Builder loggerBuilder=new UnitTestTreeLogger.Builder();
  loggerBuilder.setLowestLogLevel(TreeLogger.TRACE);
  loggerBuilder.expectTrace("Tracing compile failure path for type '" + victimTypeName + "'",null);
  loggerBuilder.expectError(Pattern.compile("Errors in '.*EntryPointCompileFails\\.java'"),null);
  loggerBuilder.expectError(causeTypeName + " cannot be resolved to a type",null);
  loggerBuilder.expectError(Pattern.compile("Errors in '.*ImmediateCompileFails\\.java'"),null);
  loggerBuilder.expectError("Line 20: List cannot be resolved to a type",null);
  UnitTestTreeLogger testLogger=loggerBuilder.createLogger();
  IncrementalBuilder incrementalBuilder=createIncrementalBuilder("com.google.gwt.dev.testdata.incrementalbuildsystem.SameModuleCompileFails",createGwtClassPathResourceLoader());
  incrementalBuilder.clean();
  boolean buildSucceeded=incrementalBuilder.build(testLogger).isSuccess();
  assertFalse(buildSucceeded);
  testLogger.assertLogEntriesContainExpected();
}
