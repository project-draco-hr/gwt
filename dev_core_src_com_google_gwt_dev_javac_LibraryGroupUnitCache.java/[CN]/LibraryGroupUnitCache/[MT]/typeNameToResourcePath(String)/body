{
  Preconditions.checkState(!typeName.endsWith(JAVA_SUFFIX));
  if (typeName.contains("$")) {
    typeName=typeName.split("\\$")[0];
  }
 else {
    LinkedList<String> packagesAndTypes=Lists.newLinkedList(Arrays.asList(typeName.split("\\.")));
    String typeShortName=null;
    while (!packagesAndTypes.isEmpty() && Character.isUpperCase(packagesAndTypes.getLast().charAt(0))) {
      typeShortName=packagesAndTypes.removeLast();
    }
    typeName=Joiner.on(".").join(packagesAndTypes) + (typeShortName != null ? "." + typeShortName : "");
  }
  return typeName.replace(".","/") + JAVA_SUFFIX;
}
