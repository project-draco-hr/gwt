{
switch (set.size()) {
case 0:
    return create();
case 1:
{
    if (set.getClass() == SINGLETON_SET_CLASS) {
      return set;
    }
    return create(set.iterator().next());
  }
default :
if (set.getClass() == MULTI_SET_CLASS) {
  return set;
}
HashSet<T> result=new HashSet<T>();
result.addAll(set);
return result;
}
}
