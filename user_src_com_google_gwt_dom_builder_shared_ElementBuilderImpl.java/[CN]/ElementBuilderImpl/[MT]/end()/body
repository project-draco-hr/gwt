{
  String tagName=getCurrentTagName();
  maybeCloseStartTag();
  if (getCurrentBuilder().isEndTagForbidden()) {
    doEndStartTagImpl();
  }
 else {
    doEndTagImpl(tagName);
  }
  isStartTagOpen=false;
  isStyleClosed=true;
  stackTags.remove(stackTags.size() - 1);
  stackBuilders.remove(stackBuilders.size() - 1);
  isHtmlOrTextAdded=false;
  return getCurrentBuilder();
}
