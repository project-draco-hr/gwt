{
  if (options.isCompileTest()) {
    PrintWriterTreeLogger logger=new PrintWriterTreeLogger();
    logger.setMaxDetail(options.getLogLevel());
    Modules modules;
    try {
      modules=makeModules(options,logger);
    }
 catch (    Throwable t) {
      t.printStackTrace();
      System.out.println("FAIL");
      System.exit(1);
      return;
    }
    int retries=options.getCompileTestRecompiles();
    for (int i=0; i < retries; i++) {
      System.out.println("\n### Recompile " + (i + 1) + "\n");
      try {
        modules.defaultCompileAll(options.getNoPrecompile(),logger);
      }
 catch (      Throwable t) {
        t.printStackTrace();
        System.out.println("FAIL");
        System.exit(1);
      }
    }
    System.out.println("PASS");
    System.exit(0);
  }
  try {
    start(options);
    String url="http://" + options.getPreferredHost() + ":"+ options.getPort()+ "/";
    System.out.println();
    System.out.println("The code server is ready.");
    System.out.println("Next, visit: " + url);
  }
 catch (  UnableToCompleteException e) {
    System.exit(1);
  }
catch (  Throwable t) {
    t.printStackTrace();
    System.exit(1);
  }
}
