{
  if (suffix == null) {
    suffix=".tmp";
  }
  File tmpDir=new File(System.getProperty("java.io.tmpdir"));
  tmpDir.mkdirs();
  if (counter == -1) {
    counter=new Random().nextLong();
  }
  boolean created=false;
  File tmpFile;
  do {
    counter++;
    tmpFile=new File(tmpDir,prefix + Long.toString(counter) + suffix);
    if (!tmpFile.exists()) {
      created=tmpFile.createNewFile();
      if (!created) {
        counter=new Random().nextLong();
      }
    }
  }
 while (!created);
  tmpFile.createNewFile();
  return tmpFile;
}
