{
  Class<ClosureJsRunner> clazz=ClosureJsRunner.class;
  InputStream input=clazz.getResourceAsStream("/com/google/javascript/jscomp/externs.zip");
  if (input == null) {
    input=clazz.getResourceAsStream("/externs.zip");
  }
  ZipInputStream zip=new ZipInputStream(input);
  Map<String,SourceFile> externsMap=Maps.newHashMap();
  for (ZipEntry entry=null; (entry=zip.getNextEntry()) != null; ) {
    if (!entry.isDirectory()) {
      BufferedInputStream entryStream=new BufferedInputStream(ByteStreams.limit(zip,entry.getSize()));
      externsMap.put(entry.getName(),SourceFile.fromInputStream("externs.zip//" + entry.getName(),entryStream,Charset.defaultCharset()));
    }
  }
  Preconditions.checkState(externsMap.keySet().equals(Sets.newHashSet(DEFAULT_EXTERNS_NAMES)),"Externs zip must match our hard-coded list of externs.");
  List<SourceFile> externs=Lists.newArrayList();
  for (  String key : DEFAULT_EXTERNS_NAMES) {
    externs.add(externsMap.get(key));
  }
  return externs;
}
