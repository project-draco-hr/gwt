{
  CompilerOptions options=new CompilerOptions();
  WarningLevel.QUIET.setOptionsForWarningLevel(options);
  HashMap<String,String> varNames=new HashMap<String,String>();
  for (  String var : globalVars) {
    varNames.put(var,var);
  }
  options.setInputVariableMapSerialized(VariableMap.fromMap(varNames).toBytes());
  if (jsOutputOption == JsOutputOption.OBFUSCATED) {
    options.setRenamingPolicy(VariableRenamingPolicy.ALL,PropertyRenamingPolicy.OFF);
    options.prettyPrint=false;
  }
 else {
    options.setRenamingPolicy(VariableRenamingPolicy.OFF,PropertyRenamingPolicy.OFF);
    options.prettyPrint=true;
  }
  options.closurePass=true;
  options.foldConstants=true;
  options.coalesceVariableNames=true;
  options.deadAssignmentElimination=true;
  options.setExtractPrototypeMemberDeclarations(true);
  options.collapseVariableDeclarations=true;
  options.convertToDottedProperties=true;
  options.rewriteFunctionExpressions=true;
  options.labelRenaming=true;
  options.removeDeadCode=true;
  options.optimizeArgumentsArray=true;
  options.setCollapseObjectLiterals(true);
  options.setShadowVariables(true);
  options.reserveRawExports=true;
  options.removeUnusedPrototypeProperties=true;
  options.collapseAnonymousFunctions=true;
  options.smartNameRemoval=true;
  options.inlineConstantVars=true;
  options.setInlineFunctions(Reach.ALL);
  options.inlineGetters=true;
  options.setInlineVariables(Reach.ALL);
  options.flowSensitiveInlineVariables=true;
  options.computeFunctionSideEffects=true;
  options.setRemoveUnusedVariable(Reach.ALL);
  options.optimizeParameters=true;
  options.optimizeReturns=true;
  options.optimizeCalls=true;
  options.collapseProperties=true;
  options.crossModuleCodeMotion=true;
  options.crossModuleMethodMotion=true;
  options.devirtualizePrototypeMethods=true;
  options.setRemoveClosureAsserts(false);
  options.aliasKeywords=false;
  options.removeUnusedPrototypePropertiesInExterns=false;
  options.checkGlobalThisLevel=CheckLevel.OFF;
  options.rewriteFunctionExpressions=false;
  options.setWarningLevel(DiagnosticGroups.NON_STANDARD_JSDOC,CheckLevel.OFF);
  return options;
}
