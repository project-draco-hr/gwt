{
  JClassType type=constructor.getEnclosingType();
  JMethod synthetic=program.createMethod(type.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Synthetic constructor"),"new",type,program.getNonNullType(type),false,true,true,false,false);
  synthetic.setSynthetic();
  synthetic.addThrownExceptions(constructor.getThrownExceptions());
  JNewInstance newInstance=new JNewInstance(type.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"new instance"),constructor,type);
  JParameter enclosingInstance=null;
  if (!staticClass) {
    enclosingInstance=JProgram.createParameter(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"outer instance"),"this$outer",enclosingType,false,false,synthetic);
  }
  for (Iterator<JParameter> i=constructor.getParams().iterator(); i.hasNext(); ) {
    JParameter param=i.next();
    if (enclosingInstance != null && !i.hasNext()) {
      newInstance.addArg(new JParameterRef(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"enclosing instance"),enclosingInstance));
    }
 else {
      JParameter syntheticParam=JProgram.createParameter(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Argument " + param.getName()),param.getName(),param.getType(),true,false,synthetic);
      newInstance.addArg(new JParameterRef(syntheticParam.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"reference"),syntheticParam));
    }
  }
  synthetic.freezeParamTypes();
  JReturnStatement ret=new JReturnStatement(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Return statement"),newInstance);
  JMethodBody body=(JMethodBody)synthetic.getBody();
  body.getBlock().addStmt(ret);
  return synthetic;
}
