{
  JClassType type=(JClassType)constructor.getEnclosingType();
  JMethod synthetic=program.createMethod(type.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Synthetic constructor"),"new".toCharArray(),type,program.getNonNullType(type),false,true,true,false,false);
  synthetic.setSynthetic();
  JNewInstance newInstance=new JNewInstance(type.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"new instance"),(JNonNullType)synthetic.getType());
  JMethodCall call=new JMethodCall(type.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"constructor invocation"),newInstance,constructor);
  JParameter enclosingInstance=null;
  if (!staticClass) {
    enclosingInstance=program.createParameter(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"outer instance"),"this$outer".toCharArray(),enclosingType,false,false,synthetic);
  }
  for (Iterator<JParameter> i=constructor.getParams().iterator(); i.hasNext(); ) {
    JParameter param=i.next();
    if (enclosingInstance != null && !i.hasNext()) {
      call.addArg(new JParameterRef(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"enclosing instance"),enclosingInstance));
    }
 else {
      JParameter syntheticParam=program.createParameter(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Argument " + param.getName()),param.getName().toCharArray(),param.getType(),true,false,synthetic);
      call.addArg(new JParameterRef(syntheticParam.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"reference"),syntheticParam));
    }
  }
  synthetic.freezeParamTypes();
  JReturnStatement ret=new JReturnStatement(synthetic.getSourceInfo().makeChild(BuildDeclMapVisitor.class,"Return statement"),call);
  JMethodBody body=(JMethodBody)synthetic.getBody();
  body.getBlock().addStmt(ret);
  return synthetic;
}
