{
  int linesToCount=detail.getLine() - jsStartLine;
  int i=start;
  while (linesToCount > 0 && i < end) {
switch (source[i]) {
case '\r':
      if (i + 1 < end && source[i + 1] == '\n') {
        ++i;
      }
case '\n':
    --linesToCount;
default :
  ++i;
}
}
i+=detail.getLineOffset() - 1;
return i;
}
