{
  StandardLinkerContext linkerContext=new StandardLinkerContext(logger,module,precompileOptions);
  ArtifactSet artifacts=doSimulatedShardingLink(logger,module,linkerContext,generatedArtifacts,permutations,resultFiles);
  OutputFileSet extrasFileSet=chooseOutputFileSet(extrasDir,module.getName() + "/");
  OutputFileSet deployFileSet;
  if (deployDir.equals(extrasDir)) {
    deployFileSet=extrasFileSet;
  }
 else {
    deployFileSet=chooseOutputFileSet(deployDir,module.getName() + "/");
  }
  doProduceOutput(logger,artifacts,linkerContext,chooseOutputFileSet(outDir,module.getName() + "/"),deployFileSet,extrasFileSet);
}
