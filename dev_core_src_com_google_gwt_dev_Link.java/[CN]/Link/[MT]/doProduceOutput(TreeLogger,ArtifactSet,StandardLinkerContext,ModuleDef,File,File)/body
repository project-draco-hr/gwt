{
  String outPath=outDir.getPath();
  if (!outDir.isDirectory() && (outPath.endsWith(".war") || outPath.endsWith(".jar") || outPath.endsWith(".zip"))) {
    linkerContext.produceOutputZip(logger,artifacts,outDir,module.getName() + '/');
  }
 else {
    File moduleOutDir=new File(outDir,module.getName());
    Util.recursiveDelete(moduleOutDir,true);
    linkerContext.produceOutputDirectory(logger,artifacts,moduleOutDir);
  }
  if (extraDir != null) {
    String extraPath=extraDir.getPath();
    if (!extraDir.isDirectory() && (extraPath.endsWith(".war") || extraPath.endsWith(".jar") || extraPath.endsWith(".zip"))) {
      linkerContext.produceExtraZip(logger,artifacts,extraDir,module.getName() + '/');
    }
 else {
      File moduleExtraDir=new File(extraDir,module.getName());
      Util.recursiveDelete(moduleExtraDir,true);
      linkerContext.produceExtraDirectory(logger,artifacts,moduleExtraDir);
    }
  }
  logger.log(TreeLogger.INFO,"Link succeeded");
}
