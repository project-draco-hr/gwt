{
  for (  String moduleName : options.getModuleNames()) {
    File compilerWorkDir=options.getCompilerWorkDir(moduleName);
    ModuleDef module=ModuleDefLoader.loadFromClassPath(logger,moduleName);
    File precompilationFile=new File(options.getCompilerWorkDir(moduleName),Precompile.PRECOMPILATION_FILENAME);
    if (!precompilationFile.exists()) {
      logger.log(TreeLogger.ERROR,"File not found '" + precompilationFile.getAbsolutePath() + "'; please run Precompile first");
      return false;
    }
    Precompilation precompilation;
    try {
      precompilation=Util.readFileAsObject(precompilationFile,Precompilation.class);
    }
 catch (    ClassNotFoundException e) {
      logger.log(TreeLogger.ERROR,"Unable to deserialize '" + precompilationFile.getAbsolutePath() + "'",e);
      return false;
    }
    Permutation[] perms=precompilation.getPermutations();
    List<FileBackedObject<PermutationResult>> resultFiles=new ArrayList<FileBackedObject<PermutationResult>>(perms.length);
    for (int i=0; i < perms.length; ++i) {
      File f=CompilePerms.makePermFilename(compilerWorkDir,perms[i].getId());
      if (!f.exists()) {
        logger.log(TreeLogger.ERROR,"File not found '" + precompilationFile.getAbsolutePath() + "'; please compile all permutations");
        return false;
      }
      resultFiles.add(new FileBackedObject<PermutationResult>(PermutationResult.class,f));
    }
    TreeLogger branch=logger.branch(TreeLogger.INFO,"Linking module " + module.getName());
    StandardLinkerContext linkerContext=new StandardLinkerContext(branch,module,precompilation.getUnifiedAst().getOptions());
    ArtifactSet artifacts=doLink(branch,linkerContext,precompilation,resultFiles);
    doProduceOutput(branch,artifacts,linkerContext,module,options.getWarDir(),options.getExtraDir());
  }
  return true;
}
