{
  constantNodes.add(def);
  if (!defMapping.containsKey(def.getKey())) {
    String upperCaseName=toUpperCase(def.getKey());
    String validName=INVALID_CHAR.matcher(upperCaseName).replaceAll("_");
    if (!validName.equals(upperCaseName)) {
      treeLogger.log(Type.WARN,"Invalid characters detected in [" + upperCaseName + "]. They have "+ "been replaced ["+ validName+ "]");
    }
    if (defMapping.containsValue(validName)) {
      if (lenient) {
        treeLogger.log(Type.WARN,"Two constants have the same name [" + validName + "] "+ "after conversion. The second constant will be renamed automatically.");
        validName=renameConstant(validName);
      }
 else {
        throw new Css2GssConversionException("Two constants have the same name [" + validName + "] after conversion.");
      }
    }
    defMapping.forcePut(def.getKey(),validName);
  }
  return false;
}
