{
  if (!(value instanceof Serializable || value instanceof IsSerializable)) {
    throw new SerializationException(clazz.getName() + " is not a Serializable type");
  }
  InstantiateCommand x=new InstantiateCommand(clazz);
  identityMap.put(value,x);
  if (serializer.hasExtraFields(clazz.getName())) {
    for (    String fieldName : serializer.getExtraFields(clazz.getName())) {
      extractField(x,value,fieldName);
    }
  }
 else {
    extractData(x,value);
  }
  return x;
}
