{
  RuntimeTypeCollectorVisitor runtimeTypeCollector=new RuntimeTypeCollectorVisitor();
  runtimeTypeCollector.accept(program);
  assignTypes(runtimeTypeCollector.typesRequiringRuntimeIds);
  ReplaceRuntimeTypeReferencesVisitor replaceTypeIdsVisitor=new ReplaceRuntimeTypeReferencesVisitor();
  replaceTypeIdsVisitor.accept(program);
  for (  JCastMap castMap : program.getCastMaps()) {
    replaceTypeIdsVisitor.accept(castMap);
  }
  return typeIdLiteralsByType;
}
