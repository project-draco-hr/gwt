{
  script="function() { " + script + "}";
  StringReader r=new StringReader(script);
  List<JsStatement> stmts;
  try {
    stmts=JsParser.parse(jsPgm.createSourceInfo(startLineNumber,moduleURL.toExternalForm()),jsPgm.getScope(),r);
  }
 catch (  IOException e) {
    logger.log(TreeLogger.ERROR,"Error reading script source",e);
    throw new UnableToCompleteException();
  }
catch (  JsParserException e) {
    SourceDetail dtl=e.getSourceDetail();
    if (dtl != null) {
      StringBuffer sb=new StringBuffer();
      sb.append(moduleURL.toExternalForm());
      sb.append("(");
      sb.append(dtl.getLine());
      sb.append(", ");
      sb.append(dtl.getLineOffset());
      sb.append("): ");
      sb.append(e.getMessage());
      logger.log(TreeLogger.ERROR,sb.toString(),e);
    }
 else {
      logger.log(TreeLogger.ERROR,"Error parsing JavaScript source",e);
    }
    throw new UnableToCompleteException();
  }
  JsFunction fn=(JsFunction)((JsExprStmt)stmts.get(0)).getExpression();
  return fn;
}
