{
  Property existingProperty=moduleDef.getProperties().find(name.token);
  if (existingProperty == null) {
    existingProperty=moduleDef.getProperties().createConfiguration(name.token,false);
    if (!propertySettings.containsKey(name.token)) {
      propertySettings.put(name.token,moduleName);
    }
    logger.log(TreeLogger.WARN,"Setting configuration property named " + name.token + " in "+ moduleName+ " that has not been previously defined."+ "  This may be disallowed in the future.");
  }
 else   if (!(existingProperty instanceof ConfigurationProperty)) {
    if (existingProperty instanceof BindingProperty) {
      logger.log(TreeLogger.ERROR,"The property " + name.token + " is already defined as a deferred-binding property");
    }
 else {
      logger.log(TreeLogger.ERROR,"May not replace property named " + name.token + " of unknown type "+ existingProperty.getClass().getName());
    }
    throw new UnableToCompleteException();
  }
  moduleDef.setConfigurationPropertyValue((ConfigurationProperty)existingProperty,value);
  return null;
}
