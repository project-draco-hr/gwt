{
synchronized (serviceToImplementedInterfacesMap) {
    Set<String> interfaceSet=serviceToImplementedInterfacesMap.get(service);
    if (interfaceSet != null) {
      if (interfaceSet.contains(intfName)) {
        return true;
      }
    }
 else {
      interfaceSet=new HashSet<String>();
      serviceToImplementedInterfacesMap.put(service,interfaceSet);
    }
    if (!service.isInterface()) {
      while ((service != null) && !RpcServlet.class.equals(service)) {
        Class<?>[] intfs=service.getInterfaces();
        for (        Class<?> intf : intfs) {
          if (implementsInterfaceRecursive(intf,intfName)) {
            interfaceSet.add(intfName);
            return true;
          }
        }
        service=service.getSuperclass();
      }
    }
 else {
      if (implementsInterfaceRecursive(service,intfName)) {
        interfaceSet.add(intfName);
        return true;
      }
    }
    return false;
  }
}
