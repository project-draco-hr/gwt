{
  Stack<Integer> stack=stateStack.get();
  if (stack == null) {
    throw new RuntimeException("No thread local execState stack!");
  }
  Integer old=stack.pop();
  if (old.intValue() != execState) {
    throw new RuntimeException("The wrong execState was popped.");
  }
}
