{
  Stack stack=(Stack)stateStack.get();
  if (stack == null) {
    throw new RuntimeException("No thread local execState stack!");
  }
  Integer old=(Integer)stack.pop();
  if (old.intValue() != execState) {
    throw new RuntimeException("The wrong execState was popped.");
  }
}
