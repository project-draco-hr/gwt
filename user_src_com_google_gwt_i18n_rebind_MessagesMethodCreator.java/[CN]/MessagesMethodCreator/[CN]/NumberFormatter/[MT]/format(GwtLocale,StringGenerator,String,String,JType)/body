{
  JPrimitiveType argPrimType=argType.isPrimitive();
  if (argPrimType != null) {
    if (argPrimType == JPrimitiveType.BOOLEAN || argPrimType == JPrimitiveType.VOID) {
      return "Illegal argument type for number format";
    }
  }
 else {
    JClassType classType=argType.isClass();
    if (classType == null) {
      return "Unexpected argument type for number format";
    }
    TypeOracle oracle=classType.getOracle();
    JClassType numberType=oracle.findType("java.lang.Number");
    if (!classType.isAssignableTo(numberType)) {
      return "Only Number subclasses may be formatted as a number";
    }
  }
  if (subformat == null) {
    out.appendExpression(numFormatClassName + ".getDecimalFormat().format(" + argName+ ")",true);
  }
 else   if ("integer".equals(subformat)) {
    out.appendExpression(numFormatClassName + ".getIntegerFormat().format(" + argName+ ")",true);
  }
 else   if ("currency".equals(subformat)) {
    out.appendExpression(numFormatClassName + ".getCurrencyFormat().format(" + argName+ ")",true);
  }
 else   if ("percent".equals(subformat)) {
    out.appendExpression(numFormatClassName + ".getPercentFormat().format(" + argName+ ")",true);
  }
 else {
    out.appendExpression(numFormatClassName + ".getFormat(" + wrap(subformat)+ ").format("+ argName+ ")",true);
  }
  return null;
}
