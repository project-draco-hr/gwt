{
  Map<String,String> listPatternParts=getListPatternParts(logger,locale);
  int listArgNum=listArg.getArgumentNumber();
  generated.append("int arg" + listArgNum + "_size = "+ listAccessor.getSize()+ ";\n");
  if (isSafeHtml) {
    generated.append(SafeHtml.class.getCanonicalName()).append(" arg").append(listArgNum).append("_list = new ").append(OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml.class.getCanonicalName()).append("(\"\");\n");
  }
 else {
    generated.append("String").append(" arg" + listArgNum + "_list = \"\";\n");
  }
  generated.append("switch (arg" + listArgNum + "_size) {\n");
  String pairPattern=listPatternParts.get("2");
  if (pairPattern != null) {
    generated.append("case 2:\n");
    generated.append("  arg" + listArgNum + "_list = ");
    generated.append(formatListPattern(logger,locale,listArg,listAccessor.getElement("0"),listAccessor.getElement("1"),elemType,isSafeHtml,pairPattern,true,params));
    generated.append(";\n");
    generated.append("  break;\n");
  }
  generated.append("default:\n");
  generated.append("  int i = arg" + listArgNum + "_size;\n");
  generated.append("  if (i > 0) {\n");
  generated.append("    arg" + listArgNum + "_list = ");
  StringGenerator buf=new StringGenerator(generated,isSafeHtml);
  formatArg(logger,locale,buf,listArg,listAccessor.getElement("--i"),elemType,params);
  buf.completeString();
  generated.append(";\n");
  generated.append("  }\n");
  generated.append("  if (i > 0) {\n");
  generated.append("    arg" + listArgNum + "_list = ");
  generated.append(formatListPattern(logger,locale,listArg,listAccessor.getElement("--i"),"arg" + listArgNum + "_list",elemType,isSafeHtml,listPatternParts.get("end"),false,params));
  generated.append(";\n");
  generated.append("  }\n");
  generated.append("  while (i > 1) {\n");
  generated.append("    arg" + listArgNum + "_list = ");
  generated.append(formatListPattern(logger,locale,listArg,listAccessor.getElement("--i"),"arg" + listArgNum + "_list",elemType,isSafeHtml,listPatternParts.get("middle"),false,params));
  generated.append("  ;\n");
  generated.append("  }\n");
  generated.append("  if (i > 0) {\n");
  generated.append("    arg" + listArgNum + "_list = ");
  generated.append(formatListPattern(logger,locale,listArg,listAccessor.getElement("--i"),"arg" + listArgNum + "_list",elemType,isSafeHtml,listPatternParts.get("start"),false,params));
  generated.append(";\n");
  generated.append("  }\n");
  generated.append("  break;\n");
  generated.append("}\n");
}
