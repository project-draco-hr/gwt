{
  ModuleHandle handle=invokeAndGet(new Callable<ModuleHandle>(){
    public ModuleHandle call() throws Exception {
      ModuleTabPanel tabPanel=findModuleTab(userAgent,remoteSocket,url,tabKey,moduleName,agentIcon);
      ModulePanel tab=tabPanel.addModuleSession(logLevel,moduleName,sessionKey,options.getLogFile(String.format("%s-%s-%d.log",moduleName,agentTag,getNextSessionCounter(options.getLogDir()))));
      return new SwingModuleHandle(tab);
    }
  }
);
  TreeLogger logger=handle.getLogger();
  TreeLogger branch=logger.branch(TreeLogger.INFO,"Loading module " + moduleName);
  if (logger.isLoggable(TreeLogger.INFO)) {
    if (url != null) {
      branch.log(TreeLogger.INFO,"Top URL: " + url);
    }
    branch.log(TreeLogger.INFO,"User agent: " + userAgent);
  }
  if (logger.isLoggable(TreeLogger.TRACE)) {
    branch.log(TreeLogger.TRACE,"Remote socket: " + remoteSocket);
  }
  if (branch.isLoggable(TreeLogger.DEBUG)) {
    if (tabKey != null) {
      branch.log(TreeLogger.DEBUG,"Tab key: " + tabKey);
    }
    if (sessionKey != null) {
      branch.log(TreeLogger.DEBUG,"Session key: " + sessionKey);
    }
  }
  return handle;
}
