{
  String allHeaders=xmlHttpRequest.getAllResponseHeaders();
  String[] unparsedHeaders=allHeaders.split("\n");
  Header[] parsedHeaders=new Header[unparsedHeaders.length];
  for (int i=0, n=unparsedHeaders.length; i < n; ++i) {
    String unparsedHeader=unparsedHeaders[i];
    if (unparsedHeader.length() == 0) {
      continue;
    }
    int endOfNameIdx=unparsedHeader.indexOf(':');
    if (endOfNameIdx < 0) {
      continue;
    }
    final String name=unparsedHeader.substring(0,endOfNameIdx).trim();
    final String value=unparsedHeader.substring(endOfNameIdx + 1).trim();
    Header header=new Header(){
      @Override public String getName(){
        return name;
      }
      @Override public String getValue(){
        return value;
      }
      @Override public String toString(){
        return name + " : " + value;
      }
    }
;
    parsedHeaders[i]=header;
  }
  return parsedHeaders;
}
