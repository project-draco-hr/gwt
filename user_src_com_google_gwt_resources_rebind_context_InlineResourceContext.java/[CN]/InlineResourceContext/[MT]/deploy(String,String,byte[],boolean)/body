{
  TreeLogger logger=getLogger();
  if ((!forceExternal) && (data.length < MAX_INLINE_SIZE)) {
    logger.log(TreeLogger.DEBUG,"Inlining",null);
    String base64Contents=toBase64(data);
    String encoded="\"data:" + mimeType.replaceAll("\"","\\\\\"") + ";base64,"+ base64Contents+ "\"";
    if (encoded.length() < MAX_ENCODED_SIZE) {
      return encoded;
    }
  }
  return super.deploy(suggestedFileName,mimeType,data,true);
}
