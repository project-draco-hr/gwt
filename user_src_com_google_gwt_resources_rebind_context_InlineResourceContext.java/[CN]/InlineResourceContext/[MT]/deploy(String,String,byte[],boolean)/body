{
  TreeLogger logger=getLogger();
  if ((!xhrCompatible) && (data.length < MAX_INLINE_SIZE)) {
    logger.log(TreeLogger.DEBUG,"Inlining",null);
    sun.misc.BASE64Encoder enc=new sun.misc.BASE64Encoder();
    String base64Contents=enc.encode(data).replaceAll("\\s+","");
    return "\"data:" + mimeType + ";base64,"+ base64Contents+ "\"";
  }
 else {
    return super.deploy(suggestedFileName,mimeType,data,true);
  }
}
