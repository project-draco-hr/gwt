{
  List<CompilationUnitBuilder> builders=new ArrayList<CompilationUnitBuilder>();
  Map<CompilationUnitBuilder,CompilationUnit> cachedUnits=new IdentityHashMap<CompilationUnitBuilder,CompilationUnit>();
  for (  GeneratedUnit generatedUnit : generatedUnits) {
    GeneratedCompilationUnitBuilder builder=new GeneratedCompilationUnitBuilder(generatedUnit);
    ContentId contentId=new ContentId(generatedUnit.getTypeName(),generatedUnit.getStrongHash());
    CompilationUnit cachedUnit=unitCache.find(contentId);
    if (cachedUnit != null) {
      cachedUnits.put(builder,cachedUnit);
      compileMoreLater.addValidUnit(cachedUnit);
      continue;
    }
    builders.add(builder);
  }
  return compileMoreLater.compile(logger,builders,cachedUnits,CompilerEventType.JDT_COMPILER_CSB_GENERATED);
}
