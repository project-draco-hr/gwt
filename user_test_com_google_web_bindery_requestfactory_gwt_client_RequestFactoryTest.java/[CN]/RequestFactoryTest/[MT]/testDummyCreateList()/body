{
  delayTestFinish(DELAY_TEST_FINISH);
  SimpleBarRequest context=simpleBarRequest();
  final SimpleBarProxy bar=context.create(SimpleBarProxy.class);
  assertTrue(((SimpleEntityProxyId<?>)bar.stableId()).isEphemeral());
  Request<SimpleBarProxy> fooReq=context.returnFirst(Collections.singletonList(bar));
  fooReq.fire(new Receiver<SimpleBarProxy>(){
    @Override public void onSuccess(    SimpleBarProxy returned){
      returned=checkSerialization(returned);
      assertFalse(((SimpleEntityProxyId<?>)bar.stableId()).isEphemeral());
      assertFalse(((SimpleEntityProxyId<?>)returned.stableId()).isEphemeral());
      checkStableIdEquals(bar,returned);
      finishTestAndReset();
    }
  }
);
}
