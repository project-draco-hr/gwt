{
  String escaped;
  if (escapeHtmlEntities) {
    escaped=UiBinderWriter.escapeText(t.getTextContent(),preserveWhiteSpace(t));
  }
 else {
    escaped=t.getTextContent();
    if (!preserveWhiteSpace(t)) {
      escaped=escaped.replaceAll("\\s+"," ");
    }
    escaped=UiBinderWriter.escapeTextForJavaStringLiteral(escaped);
  }
  buffer.append(escaped);
}
