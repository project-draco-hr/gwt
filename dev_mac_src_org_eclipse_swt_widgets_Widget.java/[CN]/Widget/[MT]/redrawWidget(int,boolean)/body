{
  if (OS.HIVIEW) {
    if (display.inPaint) {
      int rgn=OS.NewRgn();
      Rect rect=new Rect();
      OS.GetControlBounds(control,rect);
      rect.right+=rect.left;
      rect.bottom+=rect.top;
      rect.top=rect.left=0;
      OS.RectRgn(rgn,rect);
      OS.HIViewConvertRegion(rgn,control,0);
      invalWindowRgn(0,rgn);
      OS.DisposeRgn(rgn);
    }
 else {
      OS.HIViewSetNeedsDisplay(control,true);
      if (children)       redrawChildren(control);
    }
    return;
  }
  if (!isDrawing(control))   return;
  int window=OS.GetControlOwner(control);
  int visibleRgn=getVisibleRegion(control,!children);
  invalWindowRgn(window,visibleRgn);
  OS.DisposeRgn(visibleRgn);
}
