{
  if (OS.HIVIEW) {
    int rgn=OS.NewRgn();
    Rect rect=new Rect();
    OS.SetRect(rect,(short)x,(short)y,(short)(x + width),(short)(y + height));
    OS.RectRgn(rgn,rect);
    if (display.inPaint) {
      OS.HIViewConvertRegion(rgn,control,0);
      invalWindowRgn(0,rgn);
    }
 else {
      OS.HIViewSetNeedsDisplayInRegion(control,rgn,true);
      if (children)       redrawChildren(control,rgn);
    }
    OS.DisposeRgn(rgn);
    return;
  }
  if (!isDrawing(control))   return;
  Rect rect=new Rect();
  OS.GetControlBounds(control,rect);
  x+=rect.left;
  y+=rect.top;
  OS.SetRect(rect,(short)x,(short)y,(short)(x + width),(short)(y + height));
  int rectRgn=OS.NewRgn();
  OS.RectRgn(rectRgn,rect);
  int visibleRgn=getVisibleRegion(control,!children);
  OS.SectRgn(rectRgn,visibleRgn,visibleRgn);
  int window=OS.GetControlOwner(control);
  invalWindowRgn(window,visibleRgn);
  OS.DisposeRgn(rectRgn);
  OS.DisposeRgn(visibleRgn);
}
