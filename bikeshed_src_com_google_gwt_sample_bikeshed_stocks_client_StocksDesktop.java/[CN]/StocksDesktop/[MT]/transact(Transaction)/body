{
  dataService.transact(t,new AsyncCallback<Transaction>(){
    public void onFailure(    Throwable caught){
      Window.alert("Error: " + caught.getMessage());
    }
    public void onSuccess(    Transaction result){
      recordTransaction(result);
      update();
    }
    /** 
 * Update transactions (list of all transactions), transactionTickers (set
 * of all tickers involved in transactions), and transactionsByTicker (map
 * from ticker to lists of transactions for that ticker).
 */
    private void recordTransaction(    Transaction result){
      transactions.add(0,result);
      String ticker=result.getTicker();
      ListViewAdapter<Transaction> t=transactionListViewAdaptersByTicker.get(ticker);
      if (t == null) {
        t=new ListViewAdapter<Transaction>();
        transactionListViewAdaptersByTicker.put(ticker,t);
      }
      t.getList().add(result);
    }
  }
);
}
