{
  searchListViewAdapter=new AsyncListViewAdapter<StockQuote>(){
    @Override protected void onRangeChanged(    ListView<StockQuote> view){
      update();
    }
  }
;
  searchListViewAdapter.setKeyProvider(StockQuote.KEY_PROVIDER);
  favoritesListViewAdapter=new AsyncListViewAdapter<StockQuote>(){
    @Override protected void onRangeChanged(    ListView<StockQuote> view){
      update();
    }
  }
;
  favoritesListViewAdapter.setKeyProvider(StockQuote.KEY_PROVIDER);
  playerScoresListViewAdapter=new AsyncListViewAdapter<PlayerInfo>(){
    @Override protected void onRangeChanged(    ListView<PlayerInfo> view){
    }
  }
;
  treeModel=new TransactionTreeViewModel(this,favoritesListViewAdapter,transactionListViewAdaptersByTicker);
  transactionListViewAdapter=new ListViewAdapter<Transaction>();
  transactions=transactionListViewAdapter.getList();
  RootLayoutPanel.get().add(binder.createAndBindUi(this));
  Columns.favoriteColumn.setFieldUpdater(new FieldUpdater<StockQuote,Boolean>(){
    public void update(    int index,    StockQuote object,    Boolean value){
      setFavorite(object.getTicker(),value);
    }
  }
);
  Columns.buyColumn.setFieldUpdater(new FieldUpdater<StockQuote,String>(){
    public void update(    int index,    StockQuote quote,    String value){
      buy(quote);
    }
  }
);
  Columns.sellColumn.setFieldUpdater(new FieldUpdater<StockQuote,String>(){
    public void update(    int index,    StockQuote quote,    String value){
      sell(quote);
    }
  }
);
  buySellPopup.addCloseHandler(new CloseHandler<PopupPanel>(){
    public void onClose(    CloseEvent<PopupPanel> event){
      Transaction t=buySellPopup.getTransaction();
      if (t != null) {
        transact(t);
      }
    }
  }
);
  update();
}
