{
  long now=System.currentTimeMillis();
  Date d=new Date(now);
  Timestamp t=new Timestamp(d.getTime());
  t.setNanos(1);
  Date d2=new Date(t.getTime());
  assertFalse("d.equals(t)",d.equals(t));
  assertEquals("d2, t",d2,t);
  assertEquals("hashcode",d2.hashCode(),t.hashCode());
  assertFalse("t.equals(d2)",t.equals(d2));
  if (GWT.isScript()) {
    try {
      t.compareTo(d2);
      fail("Should throw ClassCastException");
    }
 catch (    ClassCastException e) {
    }
  }
  Timestamp t2=new Timestamp(d.getTime());
  t2.setNanos(2);
  assertFalse("t.equals(t2)",t.equals(t2));
  assertEquals("hashcode2",t.hashCode(),t2.hashCode());
}
