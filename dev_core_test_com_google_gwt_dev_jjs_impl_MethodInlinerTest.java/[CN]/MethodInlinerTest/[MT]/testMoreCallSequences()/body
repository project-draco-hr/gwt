{
  addSnippetClassDecl("static int fun1(int a) { return a; }");
  addSnippetClassDecl("static int fun2(int a) { return fun1(a)+1; }");
  addSnippetClassDecl("static int fun3(int a) { return fun2(a) + 2; }");
  addSnippetClassDecl("static int fun4(int a) { return fun3(a) + 3; }");
  Result result=optimize("int","return fun4(1);");
  assertEquals("static int fun2(int a){\n" + "  return a + 1;\n}",result.findMethod("fun2").toSource());
  assertEquals("static int fun3(int a){\n" + "  return a + 1 + 2;\n}",result.findMethod("fun3").toSource());
  assertEquals("static int fun4(int a){\n" + "  return a + 1 + 2 + 3;\n}",result.findMethod("fun4").toSource());
}
