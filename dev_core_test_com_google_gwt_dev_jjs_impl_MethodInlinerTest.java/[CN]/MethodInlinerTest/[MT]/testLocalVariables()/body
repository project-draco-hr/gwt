{
  addSnippetImport(DoNotInline.class.getCanonicalName());
  addSnippetClassDecl("static int fun() { int a = 1; return a; }");
  addSnippetClassDecl("@DoNotInline static int caller() { return fun(); }");
  Result result=optimize("int","return caller();");
  assertEquals("static int caller(){ return (a = 1, a); }",getCanonicalSource(result.findMethod("caller")));
}
