{
  final PrecompileOptions options=new PrecompileOptionsImpl();
  if (new ArgProcessor(options).processArgs(args)) {
    if (options.getWorkDir() == null) {
      System.err.println("The -workDir is required for the Precompile phase.");
      System.exit(1);
    }
    CompileTask task=new CompileTask(){
      public boolean run(      TreeLogger logger) throws UnableToCompleteException {
        return new Precompile(options).run(logger);
      }
    }
;
    if (CompileTaskRunner.runWithAppropriateLogger(options,task)) {
      System.exit(0);
    }
  }
  System.exit(1);
}
