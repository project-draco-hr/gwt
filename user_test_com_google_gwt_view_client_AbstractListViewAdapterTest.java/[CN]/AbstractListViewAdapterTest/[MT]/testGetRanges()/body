{
  AbstractListViewAdapter<String> adapter=createListViewAdapter();
{
    Range[] ranges=adapter.getRanges();
    assertEquals(0,ranges.length);
  }
{
    MockHasData<String> view0=new MockHasData<String>();
    view0.setVisibleRange(0,10);
    adapter.addView(view0);
    Range[] ranges=adapter.getRanges();
    assertEquals(1,ranges.length);
    assertEquals(new Range(0,10),ranges[0]);
  }
{
    MockHasData<String> view1=new MockHasData<String>();
    view1.setVisibleRange(3,10);
    adapter.addView(view1);
    MockHasData<String> view2=new MockHasData<String>();
    view2.setVisibleRange(30,35);
    adapter.addView(view2);
    Set<Range> ranges=new HashSet<Range>();
    for (    Range range : adapter.getRanges()) {
      ranges.add(range);
    }
    assertEquals(3,ranges.size());
    assertTrue(ranges.contains(new Range(0,10)));
    assertTrue(ranges.contains(new Range(3,10)));
    assertTrue(ranges.contains(new Range(30,35)));
  }
}
