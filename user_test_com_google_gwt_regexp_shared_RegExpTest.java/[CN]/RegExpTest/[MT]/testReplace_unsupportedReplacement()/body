{
  regExp=RegExp.compile("foo");
  checkReplaceThrows("","$`",true);
  checkReplaceThrows("","($`)",true);
  checkReplaceThrows("","$$$`",true);
  checkReplaceThrows("","($$$`)",true);
  checkReplaceThrows("","$$$$$`",true);
  checkReplaceThrows("","($$$$$`)",true);
  checkReplaceThrows("","\n$`",true);
  checkReplaceThrows("","\n\n$`",true);
  checkReplaceThrows(""," $`",true);
  checkReplace("foo","$$`$$`","$`$`");
  checkReplace("foo","$$$$`$$$$`","$$`$$`");
  checkReplace("foo","\n$$`","\n$`");
  checkReplace("foo","\n\n$$`","\n\n$`");
  checkReplace("foo"," $$`"," $`");
  checkReplaceThrows("","$'",true);
  checkReplaceThrows("","($')",true);
  checkReplaceThrows("","$$$'",true);
  checkReplaceThrows("","($$$')",true);
  checkReplaceThrows("","$$$$$'",true);
  checkReplaceThrows("","($$$$$')",true);
  checkReplaceThrows("","\n$'",true);
  checkReplaceThrows("","\n\n$'",true);
  checkReplaceThrows(""," $'",true);
  checkReplace("foo","$$'$$'","$'$'");
  checkReplace("foo","$$$$'$$$$'","$$'$$'");
  checkReplace("foo","\n$$'","\n$'");
  checkReplace("foo","\n\n$$'","\n\n$'");
  checkReplace("foo"," $$'"," $'");
}
