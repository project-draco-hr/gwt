{
  SourceInfo info=nativeMethodBody.getSourceInfo();
  String ident=nameRef.getIdent();
  HasEnclosingType node=program.jsniMap.get(ident);
  if (node == null) {
    node=findJsniRefTarget(info,ident);
    if (node == null) {
      return;
    }
    program.jsniMap.put(ident,node);
  }
  if (node instanceof JField) {
    processField(nameRef,info,(JField)node,ctx);
  }
 else   if (node instanceof JMethod) {
    processMethod(nameRef,info,(JMethod)node,ctx);
  }
 else {
    throw new InternalCompilerException((HasSourceInfo)node,"JSNI reference to something other than a field or method?",null);
  }
}
