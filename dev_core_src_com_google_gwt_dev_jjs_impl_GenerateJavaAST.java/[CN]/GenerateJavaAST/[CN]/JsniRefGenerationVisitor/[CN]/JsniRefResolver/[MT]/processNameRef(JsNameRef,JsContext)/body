{
  SourceInfo info=nativeMethodBody.getSourceInfo();
  String ident=nameRef.getIdent();
  JNode node=jsniMap.get(ident);
  if (node == null) {
    node=findJsniRefTarget(info,ident);
    if (node == null) {
      return;
    }
    jsniMap.put(ident,node);
  }
  if (node instanceof JField) {
    processField(nameRef,info,(JField)node,ctx);
  }
 else   if (node instanceof JMethod) {
    processMethod(nameRef,info,(JMethod)node,ctx);
  }
 else   if (node instanceof JType) {
    processClassLiteral(nameRef,info,(JType)node,ctx);
  }
 else {
    throw new InternalCompilerException(node,"JSNI reference to something other than a class, field, or method?",null);
  }
}
