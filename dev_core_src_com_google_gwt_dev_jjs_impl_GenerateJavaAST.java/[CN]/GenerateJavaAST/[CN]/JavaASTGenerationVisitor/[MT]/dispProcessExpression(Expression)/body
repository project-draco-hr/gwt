{
  JExpression result=null;
  if (x != null && x.constant != null && x.constant != Constant.NotAConstant) {
    result=(JExpression)dispatch("processConstant",x.constant);
  }
  if (result == null) {
    result=(JExpression)dispatch("processExpression",x);
  }
  if (x != null) {
    if ((x.implicitConversion & TypeIds.BOXING) != 0) {
      JType primitiveTypeToBox=(JType)typeMap.get(x.resolvedType);
      if (!(primitiveTypeToBox instanceof JPrimitiveType)) {
        throw new InternalCompilerException(result,"Attempt to box a non-primitive type: " + primitiveTypeToBox.getName(),null);
      }
      result=autoboxUtils.box(result,((JPrimitiveType)primitiveTypeToBox));
    }
 else     if ((x.implicitConversion & TypeIds.UNBOXING) != 0) {
      JType typeToUnbox=(JType)typeMap.get(x.resolvedType);
      if (!(typeToUnbox instanceof JClassType)) {
        throw new InternalCompilerException(result,"Attempt to unbox a non-class type: " + typeToUnbox.getName(),null);
      }
      result=unbox(result,(JClassType)typeToUnbox);
    }
  }
  return result;
}
