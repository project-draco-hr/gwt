{
  if (variable instanceof JLocal || variable instanceof JParameter) {
    LocalVariableBinding localBinding=(LocalVariableBinding)binding;
    if (localBinding.declaringScope.methodScope() != fCurrentMethodScope) {
      variable=null;
      VariableBinding[] vars=fCurrentMethodScope.getEmulationPath(localBinding);
      if (vars == null) {
        return null;
      }
      assert(vars.length == 1);
      VariableBinding varBinding=vars[0];
      if (varBinding instanceof SyntheticArgumentBinding) {
        JType type=(JType)fTypeMap.get(varBinding.type);
        String name=String.valueOf(varBinding.name);
        for (int i=0; i < fCurrentMethod.params.size(); ++i) {
          JParameter param=(JParameter)fCurrentMethod.params.get(i);
          if (type == param.getType() && name.equals(param.getName())) {
            variable=param;
            break;
          }
        }
      }
      if (variable == null) {
        variable=(JField)fTypeMap.get(varBinding);
      }
    }
  }
  return variable;
}
