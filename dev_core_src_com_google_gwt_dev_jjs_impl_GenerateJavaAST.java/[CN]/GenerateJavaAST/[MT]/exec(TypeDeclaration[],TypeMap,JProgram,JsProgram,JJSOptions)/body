{
  Event generateJavaAstEvent=SpeedTracerLogger.start(CompilerEventType.GENERATE_JAVA_AST);
  JavaASTGenerationVisitor v=new JavaASTGenerationVisitor(typeMap,jprogram,options);
  for (  TypeDeclaration type : types) {
    v.processType(type);
  }
  for (  TypeDeclaration type : types) {
    v.addBridgeMethods(type.binding);
  }
  Collections.sort(jprogram.getDeclaredTypes(),new HasNameSort());
  Map<JsniMethodBody,AbstractMethodDeclaration> jsniMethodMap=v.getJsniMethodMap();
  new JsniRefGenerationVisitor(jprogram,jsProgram,jsniMethodMap).accept(jprogram);
  generateJavaAstEvent.end();
}
