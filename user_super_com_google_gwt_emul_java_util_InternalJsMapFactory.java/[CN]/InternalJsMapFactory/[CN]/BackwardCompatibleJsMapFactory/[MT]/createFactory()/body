{
  if (isModern() && canHandleProto()) {
    return needsObjectKeysWorkaround() ? new ObjectKeysWorkaroundInternalJsMapFactory() : new InternalJsMapFactory();
  }
  return new LegacyInternalJsMapFactory();
}
