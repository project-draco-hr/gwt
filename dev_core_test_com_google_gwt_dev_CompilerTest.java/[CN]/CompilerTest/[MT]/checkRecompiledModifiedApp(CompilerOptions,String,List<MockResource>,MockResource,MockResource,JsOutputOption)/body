{
  List<MockResource> originalResources=Lists.newArrayList(sharedResources);
  originalResources.add(originalResource);
  List<MockResource> modifiedResources=Lists.newArrayList(sharedResources);
  modifiedResources.add(modifiedResource);
  MinimalRebuildCache relinkMinimalRebuildCache=new MinimalRebuildCache();
  File relinkApplicationDir=Files.createTempDir();
  String originalAppFromScratchJs=compileToJs(compilerOptions,relinkApplicationDir,moduleName,originalResources,relinkMinimalRebuildCache,output);
  String modifiedAppRelinkedJs=compileToJs(compilerOptions,relinkApplicationDir,moduleName,Lists.<MockResource>newArrayList(modifiedResource),relinkMinimalRebuildCache,output);
  MinimalRebuildCache fromScratchMinimalRebuildCache=new MinimalRebuildCache();
  File fromScratchApplicationDir=Files.createTempDir();
  String modifiedAppFromScratchJs=compileToJs(compilerOptions,fromScratchApplicationDir,moduleName,modifiedResources,fromScratchMinimalRebuildCache,output);
  assertFalse(originalAppFromScratchJs.equals(modifiedAppRelinkedJs));
  assertTrue(modifiedAppRelinkedJs.equals(modifiedAppFromScratchJs));
}
