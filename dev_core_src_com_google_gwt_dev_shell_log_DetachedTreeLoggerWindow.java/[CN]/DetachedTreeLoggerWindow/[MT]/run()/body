{
  if (!maybeStart()) {
    throw new IllegalStateException("DetachedTreeLogger window is already running.");
  }
  final Display display=shell.getDisplay();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch()) {
      display.sleep();
    }
  }
}
