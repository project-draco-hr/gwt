{
  Object cmd=iterator.getLast();
  iterator.remove();
  assert(cmd != null);
  if (cmd instanceof Command) {
    throw new CommandCanceledException((Command)cmd);
  }
 else   if (cmd instanceof IncrementalCommand) {
    throw new IncrementalCommandCanceledException((IncrementalCommand)cmd);
  }
  setExecuting(false);
  maybeStartExecutionTimer();
}
