{
  HorizontalPanel p=new HorizontalPanel();
  p.setSpacing(4);
  textBox.setWidth("20em");
  p.add(textBox);
  if (addSelection) {
    final HTML echo=new HTML();
    p.add(echo);
    textBox.addKeyboardListener(new KeyboardListenerAdapter(){
      public void onKeyUp(      Widget sender,      char keyCode,      int modifiers){
        updateText(textBox,echo);
      }
    }
);
    textBox.addClickListener(new ClickListener(){
      public void onClick(      Widget sender){
        updateText(textBox,echo);
      }
    }
);
    updateText(textBox,echo);
  }
  return p;
}
