{
  final Image image=new Image("counting-backwards.png",12,13,8,8);
  assertEquals(12,image.getOriginLeft());
  assertEquals(13,image.getOriginTop());
  assertEquals(8,image.getWidth());
  assertEquals(8,image.getHeight());
  assertEquals("clipped",ImageTest.getCurrentImageStateName(image));
  final ArrayList onloadEventFireCounter=new ArrayList();
  image.addLoadListener(new LoadListener(){
    public void onError(    Widget sender){
      fail("The image " + ((Image)sender).getUrl() + " failed to load.");
    }
    public void onLoad(    Widget sender){
      onloadEventFireCounter.add(new Object());
      if (image.getOriginLeft() == 12 && image.getOriginTop() == 13) {
        ClippedImagePrototype clippedImagePrototype=new ClippedImagePrototype("counting-forwards.png",16,16,16,16);
        clippedImagePrototype.applyTo(image);
        assertEquals(16,image.getOriginLeft());
        assertEquals(16,image.getOriginTop());
        assertEquals(16,image.getWidth());
        assertEquals(16,image.getHeight());
        assertEquals("clipped",ImageTest.getCurrentImageStateName(image));
      }
    }
  }
);
  RootPanel.get().add(image);
  delayTestFinish(2000);
  Timer t=new Timer(){
    public void run(){
      assertEquals(2,onloadEventFireCounter.size());
      finishTest();
    }
  }
;
  t.schedule(1000);
}
