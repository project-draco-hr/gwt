{
  String className=jsniRef.className().replace('$','.');
  char[][] compoundName=CharOperation.splitOn('.',className.toCharArray());
  TypeBinding binding=cud.scope.getType(compoundName,compoundName.length);
  if (binding instanceof ProblemReferenceBinding) {
    ProblemReferenceBinding prb=(ProblemReferenceBinding)binding;
    if (prb.problemId() == ProblemReasons.NotVisible) {
      ReferenceBinding drilling=prb.closestMatch();
      for (int i=prb.compoundName.length; i < compoundName.length; i++) {
        drilling=drilling.getMemberType(compoundName[i]);
        if (binding == null) {
          return null;
        }
      }
      binding=drilling;
    }
  }
  if (binding instanceof ProblemReferenceBinding) {
    return null;
  }
  if (binding instanceof ReferenceBinding) {
    return (ReferenceBinding)binding;
  }
  return null;
}
