{
  ensureSizeFor(size + 1);
  int index=findKeyOrEmpty(key);
  if (keys[index] == null) {
    ++size;
    keys[index]=maskNullKey(key);
    values[index]=value;
    return null;
  }
 else {
    Object previousValue=values[index];
    values[index]=value;
    return (V)previousValue;
  }
}
