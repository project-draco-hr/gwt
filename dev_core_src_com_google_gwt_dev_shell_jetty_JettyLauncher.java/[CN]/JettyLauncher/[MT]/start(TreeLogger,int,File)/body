{
  TreeLogger branch=logger.branch(TreeLogger.TRACE,"Starting Jetty on port " + port,null);
  checkStartParams(branch,port,appRootDir);
  Log.setLog(new JettyTreeLogger(branch));
  jreLeakPrevention(logger);
  System.setProperty("org.mortbay.xml.XmlParser.Validating","false");
  Server server=new Server();
  AbstractConnector connector=getConnector(logger);
  setupConnector(connector,bindAddress,port);
  server.addConnector(connector);
  WebAppContext wac=createWebAppContext(logger,appRootDir);
  RequestLogHandler logHandler=new RequestLogHandler();
  logHandler.setRequestLog(new JettyRequestLogger(logger,getBaseLogLevel()));
  logHandler.setHandler(wac);
  server.setHandler(logHandler);
  server.start();
  server.setStopAtShutdown(true);
  Log.setLog(new JettyTreeLogger(logger));
  return createServletContainer(logger,appRootDir,server,wac,connector.getLocalPort());
}
