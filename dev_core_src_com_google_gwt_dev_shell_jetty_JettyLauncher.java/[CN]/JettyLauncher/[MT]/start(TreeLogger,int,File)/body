{
  TreeLogger branch=logger.branch(TreeLogger.INFO,"Starting Jetty on port " + port,null);
  checkStartParams(branch,port,appRootDir);
  Log.setLog(new JettyTreeLogger(branch));
  System.setProperty("org.mortbay.xml.XmlParser.Validating","false");
  AbstractConnector connector=getConnector();
  connector.setPort(port);
  connector.setReuseAddress(false);
  connector.setSoLingerTime(0);
  Server server=new Server();
  server.addConnector(connector);
  WebAppContext wac=new WebAppContextWithReload(logger,appRootDir.getAbsolutePath(),"/");
  RequestLogHandler logHandler=new RequestLogHandler();
  logHandler.setRequestLog(new JettyRequestLogger(logger));
  logHandler.setHandler(wac);
  server.setHandler(logHandler);
  server.start();
  server.setStopAtShutdown(true);
  Log.setLog(new JettyTreeLogger(logger));
  return new JettyServletContainer(logger,server,wac,connector.getLocalPort(),appRootDir);
}
