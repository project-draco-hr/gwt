{
  String checkName=name;
  if (checkName.startsWith(META_INF_SERVICES)) {
    checkName=checkName.substring(META_INF_SERVICES.length());
  }
  checkName=checkName.replace('/','.');
  URL found;
  if (isSystemClass(checkName) && !systemClassesFromWebappFirst.match(checkName)) {
    found=systemClassLoader.getResource(name);
    if (found != null) {
      return found;
    }
  }
  found=super.findResource(name);
  if (found != null) {
    return found;
  }
  found=systemClassLoader.getResource(name);
  if (found == null || isServerClass(checkName)) {
    return null;
  }
  if (allowedFromSystemClassLoader.match(checkName) || "jndi.properties".equals(name)) {
    return found;
  }
  String warnMessage="Server resource '" + name + "' could not be found in the web app, but was found on the system classpath";
  if (!addContainingClassPathEntry(warnMessage,found,name)) {
    return null;
  }
  return super.findResource(name);
}
