{
  final HandlerManager eventBus=new HandlerManager(null);
  final ValueStoreJsonImpl valueStore=new ValueStoreJsonImpl(eventBus);
  final ExpenseRequestFactoryImpl requests=new ExpenseRequestFactoryImpl(valueStore);
  final PlaceController<AbstractExpensesPlace> placeController=new PlaceController<AbstractExpensesPlace>(eventBus);
  final Places places=new Places(placeController);
  final EntityNameRenderer entityNamer=new EntityNameRenderer();
  final ListPlaceRenderer listPlaceNamer=new ListPlaceRenderer(entityNamer);
  final ExpensesScaffoldShell shell=new ExpensesScaffoldShell();
  PlacePicker<EntityListPlace> placePicker=new PlacePicker<EntityListPlace>(shell.getPlacesBox(),placeController,listPlaceNamer);
  placePicker.setPlaces(places.getListPlaces());
  final TableEntityListView entitiesView=new TableEntityListView();
  eventBus.addHandler(PlaceChanged.TYPE,new ListRequester(places,shell.getBody(),entitiesView,requests,listPlaceNamer));
  final HTML detailsView=new HTML();
  eventBus.addHandler(PlaceChanged.TYPE,new DetailsRequester(entityNamer,shell.getBody(),detailsView));
  Element loading=Document.get().getElementById("loading");
  loading.getParentElement().removeChild(loading);
  RootLayoutPanel.get().add(shell);
}
