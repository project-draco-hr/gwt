{
  final HandlerManager eventBus=new HandlerManager(null);
  final ExpenseRequestFactory requestFactory=GWT.create(ExpenseRequestFactory.class);
  requestFactory.init(eventBus);
  final PlaceController<AbstractExpensesPlace> placeController=new PlaceController<AbstractExpensesPlace>(eventBus);
  final Places places=new Places(placeController);
  final EntityNameRenderer entityNamer=new EntityNameRenderer();
  final ListPlaceRenderer listPlaceNamer=new ListPlaceRenderer(entityNamer);
  final ExpensesScaffoldShell shell=new ExpensesScaffoldShell();
  PlacePicker<EntityListPlace> placePicker=new PlacePicker<EntityListPlace>(shell.getPlacesBox(),placeController,listPlaceNamer);
  placePicker.setPlaces(places.getListPlaces());
  eventBus.addHandler(PlaceChanged.TYPE,new ListRequester(places,shell.getBody(),requestFactory,listPlaceNamer));
  final HTML detailsView=new HTML();
  eventBus.addHandler(PlaceChanged.TYPE,new DetailsRequester(entityNamer,shell.getBody(),detailsView));
  Element loading=Document.get().getElementById("loading");
  loading.getParentElement().removeChild(loading);
  RootLayoutPanel.get().add(shell);
}
