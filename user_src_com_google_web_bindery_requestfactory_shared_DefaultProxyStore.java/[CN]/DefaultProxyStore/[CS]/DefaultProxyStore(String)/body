{
  messageBean=AutoBeanCodex.decode(MessageFactoryHolder.FACTORY,OperationMessage.class,payload);
  OperationMessage message=messageBean.as();
  if (!EXPECTED_VERSION.equals(message.getVersion())) {
    throw new IllegalArgumentException("Unexpected version string in payload " + message.getVersion());
  }
  map=message.getPropertyMap();
  nextId=message.getSyntheticId() - 1;
  if (nextId < 0) {
    nextId=map.size();
  }
}
