{
  @SuppressWarnings("unchecked") Enumeration<DefaultMutableTreeNode> children=root.preorderEnumeration();
  ArrayList<DefaultMutableTreeNode> matches=new ArrayList<DefaultMutableTreeNode>();
  while (children.hasMoreElements()) {
    DefaultMutableTreeNode node=children.nextElement();
    if (node != root && nodeMatches(node,search)) {
      matches.add(node);
      TreeNode[] nodePath=node.getPath();
      if (nodePath.length > 1) {
        TreeNode[] parentPath=new TreeNode[nodePath.length - 1];
        System.arraycopy(nodePath,0,parentPath,0,parentPath.length);
        tree.expandPath(new TreePath(parentPath));
      }
    }
  }
  tree.invalidate();
  return matches;
}
