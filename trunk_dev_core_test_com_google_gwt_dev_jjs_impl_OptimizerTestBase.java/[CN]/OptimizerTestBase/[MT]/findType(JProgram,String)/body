{
  JDeclaredType type=program.getFromTypeMap(typeName);
  if (type == null && typeName.indexOf('.') < 0) {
    for (    JDeclaredType checkType : program.getDeclaredTypes()) {
      if (checkType.getShortName().equals(typeName)) {
        if (type == null) {
          type=checkType;
        }
 else {
          fail("Ambiguous type reference '" + typeName + "' might be '"+ type.getName()+ "' or '"+ checkType.getName()+ "' (possibly more matches)");
        }
      }
    }
  }
  return type;
}
