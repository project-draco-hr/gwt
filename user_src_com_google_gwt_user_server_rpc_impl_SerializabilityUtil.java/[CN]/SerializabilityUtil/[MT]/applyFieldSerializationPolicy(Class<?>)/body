{
  Field[] serializableFields=getCachedSerializableFieldsForClass(clazz);
  if (serializableFields == null) {
    ArrayList<Field> fieldList=new ArrayList<Field>();
    Field[] fields=clazz.getDeclaredFields();
    for (    Field field : fields) {
      assert(field != null);
      int fieldModifiers=field.getModifiers();
      if (Modifier.isStatic(fieldModifiers) || Modifier.isTransient(fieldModifiers) || Modifier.isFinal(fieldModifiers)) {
        continue;
      }
      fieldList.add(field);
    }
    serializableFields=fieldList.toArray(new Field[fieldList.size()]);
    Arrays.sort(serializableFields,0,serializableFields.length,FIELD_COMPARATOR);
    putCachedSerializableFieldsForClass(clazz,serializableFields);
  }
  return serializableFields;
}
