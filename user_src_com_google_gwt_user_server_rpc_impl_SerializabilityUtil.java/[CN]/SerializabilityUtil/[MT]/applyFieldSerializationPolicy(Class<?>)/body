{
  Field[] serializableFields;
  serializableFields=classSerializableFieldsCache.get(clazz);
  if (serializableFields == null) {
    ArrayList<Field> fieldList=new ArrayList<Field>();
    Field[] fields=clazz.getDeclaredFields();
    for (    Field field : fields) {
      if (fieldQualifiesForSerialization(field)) {
        fieldList.add(field);
      }
    }
    serializableFields=fieldList.toArray(new Field[fieldList.size()]);
    Arrays.sort(serializableFields,0,serializableFields.length,FIELD_COMPARATOR);
    classSerializableFieldsCache.put(clazz,serializableFields);
  }
  return serializableFields;
}
