{
  XsrfToken badToken=new XsrfToken("Invalid Token");
  XsrfTestServiceAsync service=getAsyncService();
  ((HasRpcToken)service).setRpcToken(badToken);
  delayTestFinishForRpc();
  service.drink("maksym",new AsyncCallback<Void>(){
    public void onSuccess(    Void result){
      fail("Should've failed with bad XSRF token");
    }
    public void onFailure(    Throwable caught){
      checkServerState("maksym",false);
    }
  }
);
}
