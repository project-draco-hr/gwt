{
  StringBuffer code=new StringBuffer();
  code.append("class Buggy {\n");
  code.append("  static final class Foo extends com.google.gwt.core.client.JavaScriptObject {\n");
  code.append("    protected Foo() { };\n");
  code.append("    void foo() { };\n");
  code.append("  }\n");
  code.append("  native void jsniMeth(Object o) /*-{\n");
  code.append("    new Object().@Buggy.Foo::foo()();\n");
  code.append("  }-*/;\n");
  code.append("}\n");
  shouldGenerateError(code,7,"Referencing method 'Buggy.Foo.foo()': references to instance methods in overlay types are illegal");
}
