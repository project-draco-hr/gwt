{
  StringBuffer code=new StringBuffer();
  code.append("class Buggy {\n");
  code.append("  static void main() {\n");
  code.append("    new Object() {\n");
  code.append("      int foo = 3;\n");
  code.append("    };\n");
  code.append("  }\n");
  code.append("  native void jsniMeth(Object o) /*-{\n");
  code.append("    o.@Buggy$1::foo;\n");
  code.append("  }-*/;\n");
  code.append("}\n");
  shouldGenerateWarning(code,7,"Referencing class \'Buggy$1: " + "JSNI references to anonymous classes are deprecated");
}
