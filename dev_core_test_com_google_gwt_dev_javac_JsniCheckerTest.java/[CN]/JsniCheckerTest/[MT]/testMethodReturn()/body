{
  StringBuffer code=new StringBuffer();
  code.append("class Buggy {\n");
  code.append("  long m() { return -1; }\n");
  code.append("  native void jsniMeth() /*-{\n");
  code.append("    $wnd.alert(this.@Buggy::m()()); }-*/;\n");
  code.append("}\n");
  shouldGenerateError(code,4,"Referencing method 'Buggy.m': return type 'long' is not safe to access in JSNI code");
}
