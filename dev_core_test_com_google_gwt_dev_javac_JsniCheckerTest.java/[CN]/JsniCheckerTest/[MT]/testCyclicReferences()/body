{
{
    StringBuffer buggy=new StringBuffer();
    buggy.append("class Buggy {\n");
    buggy.append("  static int anint = 3;\n");
    buggy.append("  native void jsniMeth() /*-{\n");
    buggy.append("    $wnd.alert(@Extra::along);\n");
    buggy.append("  }-*/;\n");
    buggy.append("}\n");
    StringBuffer extra=new StringBuffer();
    extra.append("class Extra {\n");
    extra.append("  static long along = 3;\n");
    extra.append("  native void jsniMeth() /*-{\n");
    extra.append("    $wnd.alert(@Buggy::anint);\n");
    extra.append("  }-*/;\n");
    extra.append("}\n");
    shouldGenerateError(buggy,extra,4,"Referencing field 'Extra.along': " + "type 'long' is not safe to access in JSNI code");
  }
{
    StringBuffer buggy=new StringBuffer();
    buggy.append("class Buggy {\n");
    buggy.append("  Extra anExtra = new Extra();\n");
    buggy.append("  static int anint = 3;\n");
    buggy.append("  native void jsniMeth() /*-{\n");
    buggy.append("    $wnd.alert(@Extra::along);\n");
    buggy.append("  }-*/;\n");
    buggy.append("}\n");
    StringBuffer extra=new StringBuffer();
    extra.append("class Extra {\n");
    extra.append("  Buggy mattress = new Buggy();\n");
    extra.append("  static long along = 3;\n");
    extra.append("  native void jsniMeth() /*-{\n");
    extra.append("    $wnd.alert(@Buggy::anint);\n");
    extra.append("  }-*/;\n");
    extra.append("}\n");
    shouldGenerateError(buggy,extra,5,"Referencing field 'Extra.along': " + "type 'long' is not safe to access in JSNI code");
  }
}
