{
  final int[] expectedRemoveIndex=new int[1];
  final Widget[] widgets=new Widget[]{null,createTestWidget(),null,createTestWidget(),null,null};
  final MockWidget mock=new MockWidget(){
    public boolean remove(    Widget w){
      assertEquals(widgets[expectedRemoveIndex[0]],w);
      return true;
    }
  }
;
  final Iterator<Widget> subject=WidgetIterators.createWidgetIterator(mock,widgets);
  expectedRemoveIndex[0]=1;
  assertTrue(subject.hasNext());
  assertEquals(widgets[1],subject.next());
  subject.remove();
  assertRemoveFails(subject);
  expectedRemoveIndex[0]=3;
  assertTrue(subject.hasNext());
  assertEquals(widgets[3],subject.next());
  subject.remove();
  assertRemoveFails(subject);
  assertFalse(subject.hasNext());
  assertNextFails(subject);
}
