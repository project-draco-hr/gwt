{
  Map<String,JClassType> matchingClasses=LocalizableLinkageCreator.findDerivedClasses(logger,targetClass);
  matchingClasses.put(ResourceFactory.DEFAULT_TOKEN,targetClass);
  String localeSuffix=locale;
  JClassType currentClass=null;
  AnnotationsResource previous=null;
  AbstractResource result=null;
  while (true) {
    currentClass=matchingClasses.get(localeSuffix);
    if (currentClass != null) {
      AnnotationsResource resource;
      try {
        resource=new AnnotationsResource(logger,currentClass,isConstants);
      }
 catch (      AnnotationsError e) {
        logger.log(TreeLogger.ERROR,e.getMessage(),e);
        throw new UnableToCompleteException();
      }
      if (resource.notEmpty()) {
        if (result == null) {
          result=resource;
        }
        if (previous != null) {
          previous.setParentResource(resource);
        }
        previous=resource;
      }
    }
    if (localeSuffix.equals(ResourceFactory.DEFAULT_TOKEN)) {
      return result;
    }
    localeSuffix=ResourceFactory.getParentLocaleName(localeSuffix);
  }
}
