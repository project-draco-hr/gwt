{
  String cacheKey=tree.getPath() + "_" + locale.getAsString();
  if (cache.containsKey(cacheKey)) {
    return cache.get(cacheKey);
  }
  Set<String> seenPaths=new HashSet<String>();
  final ResourceList resources=new ResourceList();
  addResources(logger,tree,clazz,locale,true,isConstants,resources,seenPaths);
  String className=tree.getPath();
  if (clazz != null) {
    className=clazz.getQualifiedSourceName();
  }
  TreeLogger branch=logger.branch(TreeLogger.SPAM,"Resource search order for " + className + ", locale "+ locale);
  for (  AbstractResource resource : resources) {
    branch.log(TreeLogger.SPAM,resource.toString());
  }
  cache.put(cacheKey,resources);
  return resources;
}
