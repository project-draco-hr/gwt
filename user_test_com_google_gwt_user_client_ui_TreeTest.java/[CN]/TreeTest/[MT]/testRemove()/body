{
  Tree t=createTree();
  TreeItem item=t.addItem(SafeHtmlUtils.fromSafeConstant("a"));
  TreeItem itemb=t.addItem(SafeHtmlUtils.fromSafeConstant("b"));
  t.setSelectedItem(item);
  assertEquals(item,t.getSelectedItem());
  item.remove();
  assertNull(t.getSelectedItem());
  Iterator<TreeItem> iter=t.treeItemIterator();
  assertTrue(iter.hasNext());
  iter.next();
  assertFalse(iter.hasNext());
  t.removeItem(itemb);
  assertNull(t.getSelectedItem());
  Iterator<TreeItem> iter2=t.treeItemIterator();
  assertFalse(iter2.hasNext());
}
