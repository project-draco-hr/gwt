{
  Tree t=createTree();
  TreeItem item=t.addItem("hello");
  String inner=DOM.getInnerHTML(item.getContentElem());
  assertTrue(inner.indexOf("hello") >= 0);
  t.addItem(item);
  Widget goodbyeWidget=new Label("goodbye");
  item.setWidget(goodbyeWidget);
  String innerWidget=DOM.getInnerHTML(item.getContentElem());
  assertFalse(innerWidget.indexOf("hello") >= 0);
  Widget hello=new Label("hello");
  TreeItem widgetItem=t.addItem(hello);
  assertTrue(DOM.getInnerHTML(widgetItem.getContentElem()).indexOf("hello") >= 0);
  widgetItem.setText("goodbye");
  assertFalse(DOM.getInnerHTML(widgetItem.getContentElem()).indexOf("hello") >= 0);
  assertTrue(DOM.getInnerHTML(widgetItem.getContentElem()).indexOf("goodbye") >= 0);
  assertNull(hello.getParent());
  widgetItem.addItem(item);
  assertEquals(t,goodbyeWidget.getParent());
  assertEquals(goodbyeWidget,item.getWidget());
  item.setText("aloha");
  assertEquals("aloha",DOM.getInnerHTML(item.getContentElem()));
  assertNull(goodbyeWidget.getParent());
  assertNull(item.getWidget());
}
