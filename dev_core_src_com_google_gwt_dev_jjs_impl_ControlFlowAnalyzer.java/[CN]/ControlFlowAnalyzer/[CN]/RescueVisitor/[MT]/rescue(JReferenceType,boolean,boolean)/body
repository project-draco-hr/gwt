{
  if (type == null) {
    return;
  }
  type=type.getUnderlyingType();
  boolean doVisit=false;
  if (isInstantiated && !instantiatedTypes.contains(type)) {
    instantiatedTypes.add(type);
    maybeRescueClassLiteral(type);
    doVisit=true;
  }
  if (isReferenced && !referencedTypes.contains(type)) {
    referencedTypes.add(type);
    doVisit=true;
  }
  if (doVisit) {
    accept(type);
    if (type instanceof JDeclaredType) {
      for (      JNode artificial : ((JDeclaredType)type).getArtificialRescues()) {
        if (artificial instanceof JReferenceType) {
          rescue((JReferenceType)artificial,true,true);
        }
 else         if (artificial instanceof JVariable) {
          rescue((JVariable)artificial);
        }
 else         if (artificial instanceof JMethod) {
          rescue((JMethod)artificial);
        }
      }
    }
  }
}
