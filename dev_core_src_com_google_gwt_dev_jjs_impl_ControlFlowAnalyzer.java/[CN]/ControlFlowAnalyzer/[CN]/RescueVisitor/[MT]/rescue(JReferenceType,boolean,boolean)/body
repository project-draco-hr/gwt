{
  if (type == null) {
    return;
  }
  type=type.getUnderlyingType();
  boolean doVisit=false;
  if (isInstantiated && instantiatedTypes.add(type)) {
    maybeRescueClassLiteral(type);
    doVisit=true;
  }
  if (isReferenced && referencedTypes.add(type)) {
    doVisit=true;
  }
  if (!doVisit) {
    return;
  }
  accept(type);
  if (type instanceof JDeclaredType) {
    JDeclaredType dtype=(JDeclaredType)type;
    if (dtype.isJsType() || dtype.isJsFunction()) {
      for (      JMethod method : dtype.getMethods()) {
        if (method.isOrOverridesJsTypeMethod() || method.isOrOverridesJsFunctionMethod()) {
          rescue(method);
        }
      }
      for (      JField field : dtype.getFields()) {
        if (field.isJsTypeMember()) {
          rescue(field);
        }
      }
    }
  }
}
