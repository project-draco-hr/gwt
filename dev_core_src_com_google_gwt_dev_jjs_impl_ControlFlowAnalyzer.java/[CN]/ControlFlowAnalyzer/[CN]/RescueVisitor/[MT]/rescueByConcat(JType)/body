{
  JPrimitiveType charType=program.getTypePrimitiveChar();
  JClassType stringType=program.getTypeJavaLangString();
  if (type instanceof JReferenceType && !program.typeOracle.canTriviallyCast((JReferenceType)type,stringType) && type != program.getTypeNull()) {
    JMethod toStringMethod=program.getIndexedMethod("Object.toString");
    rescue(toStringMethod);
  }
 else   if (type == charType) {
    if (stringValueOfChar == null) {
      for (      JMethod meth : stringType.getMethods()) {
        if (meth.getName().equals("valueOf")) {
          List<JType> params=meth.getOriginalParamTypes();
          if (params.size() == 1) {
            if (params.get(0) == charType) {
              stringValueOfChar=meth;
              break;
            }
          }
        }
      }
      assert(stringValueOfChar != null);
    }
    rescue(stringValueOfChar);
  }
}
