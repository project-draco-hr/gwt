{
  Document doc=Document.get();
  DivElement container=doc.createDivElement();
  DivElement parent=doc.createDivElement();
  DivElement child=doc.createDivElement();
  child.setInnerHTML("&nbsp;");
  doc.getBody().appendChild(container);
  container.appendChild(parent);
  container.getStyle().setPosition(Position.RELATIVE);
  container.getStyle().setWidth(128,PX);
  container.getStyle().setHeight(256,PX);
  Layout layout=new Layout(parent);
  layout.onAttach();
  Layer layer=layout.attachChild(child);
  layer.setTopBottom(0,PX,0,PX);
  layer.setLeftRight(0,PX,0,PX);
  layout.fillParent();
  layout.layout();
  assertEquals(128,container.getOffsetWidth());
  assertEquals(256,container.getOffsetHeight());
  assertEquals(128,parent.getOffsetWidth());
  assertEquals(256,parent.getOffsetHeight());
  assertEquals(128,child.getOffsetWidth());
  assertEquals(256,child.getOffsetHeight());
  container.getStyle().setWidth(256,PX);
  container.getStyle().setHeight(128,PX);
  assertEquals(256,container.getOffsetWidth());
  assertEquals(256,parent.getOffsetWidth());
  assertEquals(256,child.getOffsetWidth());
  layout.onDetach();
}
