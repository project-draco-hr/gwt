{
  JSONObject returnObject=new JSONObject();
  if (writeOperation != WriteOperation.CREATE || violations == null) {
    for (    String propertyName : new String[]{"id","version"}) {
      if ("version".equals(propertyName) && violations != null) {
        continue;
      }
      returnObject.put(propertyName,getPropertyValueFromDataStore(entityInstance,propertyName));
    }
  }
  if (violations != null) {
    returnObject.put("violations",getViolationsAsJson(violations));
  }
  if (writeOperation == WriteOperation.CREATE) {
    returnObject.put("futureId",recordObject.getString("id"));
  }
  return returnObject;
}
