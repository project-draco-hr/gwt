{
  factory=new GwtLocaleFactoryImpl();
  TreeLogger logger=new FailErrorLogger();
  typeOracle=TypeOracleTestingUtils.buildStandardTypeOracleWith(logger,LOCALIZABLE,LOCALIZABLE_RESOURCE,MESSAGES,CONSTANTS,CONSTANTS_WITH_LOOKUP,SAFE_HTML,TEST,TEST_EN,TEST_EN_US,TEST_EN_GB,TEST_CLASS,TEST_MESSAGES,TEST_MESSAGES_WRONG_RETURN_TYPE,TEST_MESSAGES_SAFE_HTML_AS_STRING);
  bufs=new HashMap<String,StringWriter>();
  ctx=new CodeGenContext(){
    @Override public JavaSourceWriterBuilder addClass(    String pkgName,    String className){
      return addClass(null,pkgName,className);
    }
    @Override public JavaSourceWriterBuilder addClass(    String superPath,    String pkgName,    String className){
      StringWriter buf=new StringWriter();
      bufs.put(className,buf);
      AbortablePrintWriter apw=new AbortablePrintWriter(new PrintWriter(buf));
      return new JavaSourceWriterBuilder(apw,pkgName,className);
    }
    @Override public void error(    String msg){
      fail(msg);
    }
    @Override public void error(    String msg,    Throwable cause){
      fail(msg);
    }
    @Override public void error(    Throwable cause){
      fail(cause.getMessage());
    }
    @Override public void warn(    String msg){
      System.out.println(msg);
    }
    @Override public void warn(    String msg,    Throwable cause){
      System.out.println(msg);
    }
    @Override public void warn(    Throwable cause){
      System.out.println(cause.getMessage());
    }
  }
;
}
