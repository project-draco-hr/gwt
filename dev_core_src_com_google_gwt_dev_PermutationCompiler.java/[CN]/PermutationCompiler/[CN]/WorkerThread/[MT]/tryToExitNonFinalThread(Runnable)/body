{
  int remainingThreads=threadCount.decrementAndGet();
  if (remainingThreads == 0) {
    threadCount.incrementAndGet();
    return;
  }
  if (actionOnExit != null) {
    actionOnExit.run();
  }
  throw new ThreadDeath();
}
