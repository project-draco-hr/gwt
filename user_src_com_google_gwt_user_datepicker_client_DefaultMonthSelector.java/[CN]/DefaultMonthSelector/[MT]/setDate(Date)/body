{
  if (getDatePicker().isYearAndMonthDropdownVisible()) {
    int month=date.getMonth();
    monthSelect.setSelectedIndex(month);
    yearSelect.clear();
    int year=date.getYear();
    int startYear=year - getNoOfYearsToDisplayBefore();
    int endYear=year + getNoOfYearsToDisplayAfter();
    Date newDate=new Date();
    for (int i=startYear; i <= endYear; i++) {
      newDate.setYear(i);
      yearSelect.addItem(getModel().getYearFormatter().format(newDate));
    }
    yearSelect.setSelectedIndex(year - startYear);
  }
 else {
    grid.setText(0,monthColumn,getModel().formatCurrentMonthAndYear());
  }
}
