{
  super(false,true);
  setGlassEnabled(true);
  setWidget(layout);
  layout.setHTML(TICKER,0,"<b>Ticker:</b>");
  layout.setHTML(NAME,0,"<b>Name:</b>");
  layout.setHTML(PRICE,0,"<b>Price:</b>");
  layout.setHTML(MAX_QUANTITY,0,"<b>Max Quantity:</b>");
  layout.setHTML(QUANTITY,0,"<b>Quantity:</b>");
  layout.setWidget(QUANTITY,1,quantityBox);
  layout.setHTML(TOTAL,0,"<b>Total:</b>");
  layout.setHTML(AVAILABLE,0,"<b>Available:</b>");
  quantityBox.addKeyUpHandler(new KeyUpHandler(){
    public void onKeyUp(    KeyUpEvent event){
      try {
        String text=quantityBox.getText();
        int quantity=text.length() == 0 ? 0 : Integer.parseInt(text);
        double totalPrice=quantity * quote.getPrice() / 100.0;
        layout.setText(TOTAL,1,NumberFormat.getCurrencyFormat("USD").format(totalPrice));
      }
 catch (      NumberFormatException e) {
        layout.setText(TOTAL,1,"Invalid quantity");
      }
    }
  }
);
  opButton=new Button("",new ClickHandler(){
    public void onClick(    ClickEvent event){
      try {
        int quantity=Integer.parseInt(quantityBox.getText());
        transaction=new Transaction(isBuying,quote.getTicker(),quantity);
        hide();
      }
 catch (      NumberFormatException e) {
        Window.alert("You must enter a valid quantity");
      }
    }
  }
);
  layout.setWidget(BUTTONS,0,opButton);
  Button cancelButton=new Button("Cancel",new ClickHandler(){
    public void onClick(    ClickEvent event){
      hide();
    }
  }
);
  layout.setWidget(BUTTONS,1,cancelButton);
}
