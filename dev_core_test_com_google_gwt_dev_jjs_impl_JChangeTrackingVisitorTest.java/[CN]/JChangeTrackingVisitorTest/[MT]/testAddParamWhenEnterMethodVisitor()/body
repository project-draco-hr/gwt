{
  addSnippetClassDecl("static class A {","  public int field;","  public A(int f) { field = f; }","  public void fun () { for(int i = 3; i < 4; i++) i = 8; }","}");
  JProgram program=compileSnippet("void","");
  AddParamWhenEnterMethodVisitor addParamWhenEnterMethodVisitor=new AddParamWhenEnterMethodVisitor(new FullOptimizerContext(program));
  addParamWhenEnterMethodVisitor.accept(program);
  assertEquals("public void fun(int _newParam_enter);\n",findMethod(program.getFromTypeMap("test.EntryPoint$A"),"fun").toString());
  assertEquals("public EntryPoint$A(int f, int _newParam_enter);\n",findMethod(program.getFromTypeMap("test.EntryPoint$A"),"EntryPoint$A").toString());
}
