{
  addSnippetClassDecl("static class A {","public int field1;","public double field2;","public void fun(int a) { a++; }","}");
  JProgram program=compileSnippet("void","");
  SetFieldOfIntToLongByEnterVisitor setFieldOfIntToLongByEnterVisitor=new SetFieldOfIntToLongByEnterVisitor(new OptimizerContext(program));
  setFieldOfIntToLongByEnterVisitor.accept(program);
  assertEquals("long field1",findField(program.getFromTypeMap("test.EntryPoint$A"),"field1").toString());
  assertEquals("double field2",findField(program.getFromTypeMap("test.EntryPoint$A"),"field2").toString());
  assertEquals("public void fun(int a);\n",findMethod(program.getFromTypeMap("test.EntryPoint$A"),"fun").toString());
}
