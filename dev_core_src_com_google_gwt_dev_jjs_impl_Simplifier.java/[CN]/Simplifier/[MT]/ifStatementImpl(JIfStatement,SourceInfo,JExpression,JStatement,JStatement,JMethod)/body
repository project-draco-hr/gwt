{
  info=getBestSourceInfo(original,info,condExpr);
  if (condExpr instanceof JMultiExpression) {
    JMultiExpression condMulti=(JMultiExpression)condExpr;
    JBlock newBlock=new JBlock(info);
    for (    JExpression expr : allButLast(condMulti.exprs)) {
      newBlock.addStmt(expr.makeStatement());
    }
    newBlock.addStmt(ifStatementImpl(null,info,last(condMulti.exprs),thenStmt,elseStmt,currentMethod));
    return newBlock;
  }
  if (condExpr instanceof JBooleanLiteral) {
    JBooleanLiteral booleanLiteral=(JBooleanLiteral)condExpr;
    boolean boolVal=booleanLiteral.getValue();
    if (boolVal && !isEmpty(thenStmt)) {
      return thenStmt;
    }
 else     if (!boolVal && !isEmpty(elseStmt)) {
      return elseStmt;
    }
 else {
      return condExpr.makeStatement();
    }
  }
  if (isEmpty(thenStmt) && isEmpty(elseStmt)) {
    return condExpr.makeStatement();
  }
  if (!isEmpty(elseStmt)) {
    JExpression unflipped=Simplifier.maybeUnflipBoolean(condExpr);
    if (unflipped != null) {
      thenStmt=ensureBlock(thenStmt);
      elseStmt=ensureBlock(elseStmt);
      return ifStatementImpl(null,info,unflipped,elseStmt,thenStmt,currentMethod);
    }
  }
  JStatement rewritenStatement=rewriteIfIntoBoolean(info,condExpr,thenStmt,elseStmt,currentMethod);
  if (rewritenStatement != null) {
    return rewritenStatement;
  }
  if (original != null) {
    return original;
  }
  return new JIfStatement(info,condExpr,thenStmt,elseStmt);
}
