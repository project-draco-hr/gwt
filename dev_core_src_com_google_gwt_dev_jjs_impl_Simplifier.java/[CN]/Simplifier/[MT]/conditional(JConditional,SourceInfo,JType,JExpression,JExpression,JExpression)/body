{
  info=getBestSourceInfo(original,info,condExpr);
  if (condExpr instanceof JMultiExpression) {
    JMultiExpression condMulti=(JMultiExpression)condExpr;
    JMultiExpression newMulti=new JMultiExpression(info);
    newMulti.exprs.addAll(allButLast(condMulti.exprs));
    newMulti.exprs.add(conditional(null,info,type,last(condMulti.exprs),thenExpr,elseExpr));
    return newMulti;
  }
  if (condExpr instanceof JBooleanLiteral) {
    if (((JBooleanLiteral)condExpr).getValue()) {
      return thenExpr;
    }
 else {
      return elseExpr;
    }
  }
 else   if (thenExpr instanceof JBooleanLiteral) {
    if (((JBooleanLiteral)thenExpr).getValue()) {
      return shortCircuitOr(null,info,condExpr,elseExpr);
    }
 else {
      JExpression notCondExpr=not(null,condExpr.getSourceInfo(),condExpr);
      return shortCircuitAnd(null,info,notCondExpr,elseExpr);
    }
  }
 else   if (elseExpr instanceof JBooleanLiteral) {
    if (((JBooleanLiteral)elseExpr).getValue()) {
      JExpression notCondExpr=not(null,condExpr.getSourceInfo(),condExpr);
      return shortCircuitOr(null,info,notCondExpr,thenExpr);
    }
 else {
      return shortCircuitAnd(null,info,condExpr,thenExpr);
    }
  }
 else {
    JExpression unflipped=maybeUnflipBoolean(condExpr);
    if (unflipped != null) {
      return new JConditional(info,type,unflipped,elseExpr,thenExpr);
    }
  }
  if (original != null) {
    return original;
  }
  return new JConditional(info,type,condExpr,thenExpr,elseExpr);
}
