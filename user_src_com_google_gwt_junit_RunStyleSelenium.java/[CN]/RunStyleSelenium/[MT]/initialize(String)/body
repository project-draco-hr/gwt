{
  if (args == null || args.length() == 0) {
    getLogger().log(TreeLogger.ERROR,"Selenium runstyle requires comma-separated Selenium-RC targets");
    return -1;
  }
  String[] targetsIn=args.split(",");
  SeleniumWrapper targets[]=new SeleniumWrapper[targetsIn.length];
  for (int i=0; i < targets.length; ++i) {
    try {
      targets[i]=createSeleniumWrapper(targetsIn[i]);
    }
 catch (    IllegalArgumentException e) {
      getLogger().log(TreeLogger.ERROR,e.getMessage());
      return -1;
    }
  }
  this.remotes=targets;
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
synchronized (lock) {
        stopped=true;
        for (        SeleniumWrapper remote : remotes) {
          if (remote.getSelenium() != null) {
            try {
              remote.getSelenium().stop();
            }
 catch (            SeleniumException se) {
              shell.getTopLogger().log(TreeLogger.WARN,"Error stopping selenium session",se);
            }
          }
        }
      }
    }
  }
);
  start();
  return targets.length;
}
