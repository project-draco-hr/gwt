{
  if (args == null || args.length() == 0) {
    getLogger().log(TreeLogger.ERROR,"Selenium runstyle requires comma-separated Selenium-RC targets");
    return -1;
  }
  String[] targetsIn=args.split(",");
  SeleniumWrapper targets[]=new SeleniumWrapper[targetsIn.length];
  for (int i=0; i < targets.length; ++i) {
    try {
      targets[i]=createSeleniumWrapper(targetsIn[i]);
    }
 catch (    IllegalArgumentException e) {
      getLogger().log(TreeLogger.ERROR,e.getMessage());
      return -1;
    }
  }
  this.remotes=targets;
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      List<StopThread> stopThreads=new ArrayList<StopThread>();
synchronized (lock) {
        stopped=true;
        for (        LaunchThread launchThread : launchThreads) {
          if (launchThread.isComplete()) {
            StopThread stopThread=new StopThread(launchThread.getRemote());
            stopThreads.add(stopThread);
            stopThread.start();
          }
        }
      }
      try {
        waitForThreadsToComplete(stopThreads,false,"stop",500);
      }
 catch (      UnableToCompleteException e) {
      }
    }
  }
);
  return targets.length;
}
