{
  if (deltas.isChanged()) {
    view.setEnabled(false);
    final DeltaValueStore toCommit=deltas;
    deltas=null;
    Receiver<Set<SyncResult>> receiver=new Receiver<Set<SyncResult>>(){
      public void onSuccess(      Set<SyncResult> response){
        if (display == null) {
          return;
        }
        boolean hasViolations=false;
        for (        SyncResult syncResult : response) {
          Record syncRecord=syncResult.getRecord();
          if (creating) {
            if (futureId == null || !futureId.equals(syncResult.getFutureId())) {
              continue;
            }
            id=syncRecord.getId();
          }
 else {
            if (!syncRecord.getId().equals(id)) {
              continue;
            }
          }
          if (syncResult.hasViolations()) {
            hasViolations=true;
            view.showErrors(syncResult.getViolations());
          }
        }
        if (!hasViolations) {
          exit();
        }
 else {
          deltas=toCommit;
          deltas.clearUsed();
          view.setEnabled(true);
          deltas.clearUsed();
        }
      }
    }
;
    requests.syncRequest(toCommit).to(receiver).fire();
  }
}
