{
  if (showing) {
    DOM.setStyleAttribute(curPanel.getElement(),"position","absolute");
    if (curPanel.topPosition != -1) {
      curPanel.setPopupPosition(curPanel.leftPosition,curPanel.topPosition);
    }
    RootPanel.get().add(curPanel);
    impl.onShow(curPanel.getElement());
  }
 else {
    RootPanel.get().remove(curPanel);
    impl.onHide(curPanel.getElement());
  }
  curPanel=null;
}
