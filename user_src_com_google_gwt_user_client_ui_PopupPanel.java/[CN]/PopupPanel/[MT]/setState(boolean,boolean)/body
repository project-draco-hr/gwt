{
  if (maybeAnimate) {
    resizeAnimation.setState(showing);
  }
 else {
    resizeAnimation.cancel();
  }
  this.showing=showing;
  if (showing) {
    nativePreviewHandlerRegistration=Event.addNativePreviewHandler(new NativePreviewHandler(){
      public void onPreviewNativeEvent(      NativePreviewEvent event){
        previewNativeEvent(event);
      }
    }
);
    historyHandlerRegistration=History.addValueChangeHandler(new ValueChangeHandler<String>(){
      public void onValueChange(      ValueChangeEvent<String> event){
        if (autoHideOnHistoryEvents) {
          hide();
        }
      }
    }
);
  }
 else {
    if (nativePreviewHandlerRegistration != null) {
      nativePreviewHandlerRegistration.removeHandler();
      nativePreviewHandlerRegistration=null;
    }
    if (historyHandlerRegistration != null) {
      historyHandlerRegistration.removeHandler();
      historyHandlerRegistration=null;
    }
  }
}
