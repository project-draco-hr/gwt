{
  MenuBar l0=new MenuBar();
  l0.setAutoOpen(true);
  MenuBar l1=new MenuBar();
  l1.setAutoOpen(true);
  MenuBar l2=new MenuBar();
  l2.setAutoOpen(true);
  MenuItem item2=l2.addItem("l2",BLANK_COMMAND);
  MenuItem item1=l1.addItem("l1",l2);
  MenuItem item0=l0.addItem("l0",l1);
  RootPanel.get().add(l0);
  l0.itemOver(item0,true);
  l1.itemOver(item1,true);
  l2.itemOver(item2,true);
  assertTrue(l0.getPopup().isShowing());
  assertEquals(item0,l0.getSelectedItem());
  assertTrue(l1.getPopup().isShowing());
  assertEquals(item1,l1.getSelectedItem());
  NativeEvent event=Document.get().createKeyDownEvent(false,false,false,false,KeyCodes.KEY_ESCAPE);
  l1.getElement().dispatchEvent(event);
  assertNull(l0.getPopup());
  assertNull(l0.getSelectedItem());
  assertNull(l1.getPopup());
}
