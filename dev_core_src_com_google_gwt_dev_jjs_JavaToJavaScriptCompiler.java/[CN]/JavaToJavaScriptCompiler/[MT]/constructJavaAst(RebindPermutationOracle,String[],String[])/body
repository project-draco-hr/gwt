{
  Set<String> allRootTypes=Sets.newTreeSet();
  CompilationState compilationState=rpo.getCompilationState();
  Memory.maybeDumpMemory("CompStateBuilt");
  recordJsoTypes(compilationState.getTypeOracle());
  populateRootTypes(allRootTypes,entryPointTypeNames,additionalRootTypes,compilationState);
  String entryMethodHolderTypeName=buildEntryMethodHolder(rpo.getGeneratorContext(),entryPointTypeNames,allRootTypes);
  unifyJavaAst(rpo,entryPointTypeNames,allRootTypes,entryMethodHolderTypeName);
  if (options.isSoycEnabled() || options.isJsonSoycEnabled()) {
    SourceInfoCorrelator.exec(jprogram);
  }
  rpo.clear();
  Set<String> deletedTypeNames=options.isIncrementalCompileEnabled() ? getMinimalRebuildCache().computeDeletedTypeNames() : Sets.<String>newHashSet();
  jprogram.typeOracle.computeBeforeAST(StandardTypes.createFrom(jprogram),jprogram.getDeclaredTypes(),jprogram.getModuleDeclaredTypes(),deletedTypeNames);
  return compilationState;
}
