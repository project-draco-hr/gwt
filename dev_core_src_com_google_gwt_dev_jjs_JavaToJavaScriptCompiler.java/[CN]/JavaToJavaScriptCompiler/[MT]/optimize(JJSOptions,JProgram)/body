{
  jprogram.beginOptimizations();
  PerfCounter.start("JavaToJavaScriptCompiler.optimize");
  PerfLogger.start("optimize");
  do {
    if (Thread.interrupted()) {
      PerfLogger.end();
      throw new InterruptedException();
    }
    maybeDumpAST(jprogram);
  }
 while (optimizeLoop(jprogram,options.isAggressivelyOptimize()));
  if (options.isAggressivelyOptimize()) {
    DataflowOptimizer.exec(jprogram);
  }
  PerfCounter.end("JavaToJavaScriptCompiler.optimize");
  PerfLogger.end();
}
