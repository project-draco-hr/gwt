{
  JProgram jprogram=null;
  JsProgram jsProgram=null;
synchronized (myLockObject) {
    if (savedJProgram != null && savedJsProgram != null) {
      jprogram=savedJProgram;
      jsProgram=savedJsProgram;
      savedJProgram=null;
      savedJsProgram=null;
    }
 else {
      if (serializedAst == null) {
        throw new IllegalStateException("No serialized AST was cached.");
      }
      try {
synchronized (myLockObject) {
          PerfLogger.start("deserialize");
          ByteArrayInputStream bais=new ByteArrayInputStream(serializedAst);
          ObjectInputStream is;
          is=new ObjectInputStream(bais);
          jprogram=(JProgram)is.readObject();
          jsProgram=(JsProgram)is.readObject();
          PerfLogger.end();
        }
      }
 catch (      IOException e) {
        throw new RuntimeException("Should be impossible for memory based streams",e);
      }
catch (      ClassNotFoundException e) {
        throw new RuntimeException("Should be impossible when deserializing in process",e);
      }
    }
  }
  try {
    return doCompile(logger,jprogram,jsProgram,rebindOracle);
  }
 catch (  Throwable e) {
    jprogram=null;
    jsProgram=null;
    throw logAndTranslateException(logger,e);
  }
}
