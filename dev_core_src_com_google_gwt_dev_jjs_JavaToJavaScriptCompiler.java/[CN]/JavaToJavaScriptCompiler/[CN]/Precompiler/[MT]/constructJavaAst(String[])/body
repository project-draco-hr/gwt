{
  Set<String> allRootTypes=new TreeSet<String>();
  CompilationState compilationState=rpo.getCompilationState();
  Memory.maybeDumpMemory("CompStateBuilt");
  populateRootTypes(allRootTypes,additionalRootTypes,compilationState.getTypeOracle());
  String entryMethodHolderTypeName=buildEntryMethodHolder(rpo.getGeneratorContext(),allRootTypes);
  beforeUnifyAst(allRootTypes);
  unifyJavaAst(allRootTypes,entryMethodHolderTypeName);
  if (options.isSoycEnabled() || options.isJsonSoycEnabled()) {
    SourceInfoCorrelator.exec(jprogram);
  }
  rpo.clear();
  jprogram.typeOracle.computeBeforeAST();
  return compilationState;
}
