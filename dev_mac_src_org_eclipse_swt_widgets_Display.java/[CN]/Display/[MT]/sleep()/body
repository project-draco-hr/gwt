{
  checkDevice();
  if (getMessageCount() != 0)   return true;
  disposeWindows();
  if (eventTable != null && eventTable.hooks(SWT.Settings)) {
    RGBColor color=new RGBColor();
    int status=OS.noErr, depth=getDepth();
    do {
      allowTimers=false;
      status=OS.ReceiveNextEvent(0,null,0.5,false,null);
      allowTimers=true;
      if (status == OS.eventLoopTimedOutErr) {
        OS.GetThemeBrushAsColor((short)OS.kThemeBrushPrimaryHighlightColor,(short)depth,true,color);
        if (highlightColor.red != color.red || highlightColor.green != color.green || highlightColor.blue != color.blue) {
          highlightColor=color;
          runSettings=true;
          return true;
        }
      }
    }
 while (status == OS.eventLoopTimedOutErr);
    return status == OS.noErr;
  }
  allowTimers=false;
  int status=OS.ReceiveNextEvent(0,null,OS.kEventDurationForever,false,null);
  allowTimers=true;
  return status == OS.noErr;
}
