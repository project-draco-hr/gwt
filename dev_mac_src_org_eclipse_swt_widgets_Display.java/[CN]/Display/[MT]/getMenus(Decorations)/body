{
  if (menus == null)   return new Menu[0];
  int count=0;
  for (int i=0; i < menus.length; i++) {
    Menu menu=menus[i];
    if (menu != null && menu.parent == shell)     count++;
  }
  int index=0;
  Menu[] result=new Menu[count];
  for (int i=0; i < menus.length; i++) {
    Menu menu=menus[i];
    if (menu != null && menu.parent == shell) {
      result[index++]=menu;
    }
  }
  return result;
}
