{
  if (menu == menuBar)   return;
  int theMenu=0;
  if (menu == null) {
    int outMenuRef[]=new int[1];
    OS.CreateNewMenu((short)ID_TEMPORARY,0,outMenuRef);
    theMenu=outMenuRef[0];
  }
 else {
    theMenu=menu.handle;
  }
  OS.SetRootMenu(theMenu);
  if (menu == null) {
    OS.ClearMenuBar();
    OS.DisposeMenu(theMenu);
  }
  menuBar=menu;
}
