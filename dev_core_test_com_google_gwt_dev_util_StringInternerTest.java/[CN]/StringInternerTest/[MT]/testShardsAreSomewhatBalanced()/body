{
  for (int i=0; i < 1000000; i++) {
    interner.intern("foo" + i);
  }
  int[] shardSizes=interner.getShardSizes();
  assertEquals(StringInterner.SHARD_COUNT,shardSizes.length);
  int minShardSize=Integer.MAX_VALUE;
  int maxShardSize=0;
  int total=0;
  for (  int candidate : shardSizes) {
    minShardSize=Math.min(minShardSize,candidate);
    maxShardSize=Math.max(maxShardSize,candidate);
    total+=candidate;
  }
  int meanShardSize=total / shardSizes.length;
  int expectedMinShardSize=meanShardSize / 5;
  int expectedMaxShardSize=meanShardSize * 5;
  if (minShardSize < expectedMinShardSize || maxShardSize > expectedMaxShardSize) {
    fail("unbalanced shards: [" + minShardSize + ","+ maxShardSize+ "] not within ["+ expectedMinShardSize+ ", "+ expectedMaxShardSize+ "]");
  }
}
