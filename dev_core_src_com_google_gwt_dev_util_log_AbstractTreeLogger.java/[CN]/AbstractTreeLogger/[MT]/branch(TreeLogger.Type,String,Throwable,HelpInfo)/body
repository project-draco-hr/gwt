{
  if (msg == null) {
    msg="(Null branch message)";
  }
  int childIndex=allocateNextChildIndex();
  AbstractTreeLogger childLogger=doBranch();
  childLogger.logLevel=logLevel;
  childLogger.indexWithinMyParent=childIndex;
  childLogger.parent=this;
  childLogger.uncommitted=new UncommittedBranchData(type,msg,caught,helpInfo);
  childLogger.metricMap=metricMap;
  String specialErrorMessage=causedBySpecialError(caught);
  if (specialErrorMessage != null) {
    type=TreeLogger.ERROR;
    childLogger.log(type,specialErrorMessage,null);
  }
  if (isLoggable(type)) {
    childLogger.commitMyBranchEntryInMyParentLogger();
  }
  return childLogger;
}
