{
  ArrayList<StackTraceElement> goodElems=new ArrayList<StackTraceElement>();
  StackTraceElement prevElem=null;
  for (int i=0; i < elems.length; i++) {
    StackTraceElement elem=elems[i];
    if (elem.getLineNumber() > 0) {
      goodElems.add(elem);
      if (goodElems.size() < 10 || prevElem.getClassName().equals(elem.getClassName())) {
        prevElem=elem;
      }
 else {
        break;
      }
    }
  }
  if (goodElems.size() > 0) {
    return goodElems.toArray(new StackTraceElement[goodElems.size()]);
  }
 else {
    return null;
  }
}
