{
  if (dirReset && ((contextDir == Direction.LTR && (dir == Direction.RTL || BidiUtils.get().endsWithRtl(str,isHtml))) || (contextDir == Direction.RTL && (dir == Direction.LTR || BidiUtils.get().endsWithLtr(str,isHtml))))) {
    return contextDir == Direction.LTR ? Format.LRM_STRING : Format.RLM_STRING;
  }
 else {
    return "";
  }
}
