{
  if (program.isReferenceOnly(program.getIndexedType("Class"))) {
    return Collections.emptySet();
  }
  ControlFlowAnalyzer cfa=new ControlFlowAnalyzer(program);
  cfa.setForPruning();
  for (  String classLiteralMethodName : new String[]{"Class.createForClass","Class.createForEnum"}) {
    cfa.traverseFrom(program.getIndexedMethod(classLiteralMethodName));
  }
  Set<JDeclaredType> orderedPreambleClasses=Sets.newLinkedHashSet();
  for (  JType type : cfa.getReferencedTypes()) {
    if (type instanceof JClassType && !specialTypes.contains(type) && !program.typeOracle.isJavaScriptObject(type)) {
      insertInTopologicalOrder((JDeclaredType)type,orderedPreambleClasses);
    }
  }
  for (  JDeclaredType type : orderedPreambleClasses) {
    accept(type);
  }
  return orderedPreambleClasses;
}
