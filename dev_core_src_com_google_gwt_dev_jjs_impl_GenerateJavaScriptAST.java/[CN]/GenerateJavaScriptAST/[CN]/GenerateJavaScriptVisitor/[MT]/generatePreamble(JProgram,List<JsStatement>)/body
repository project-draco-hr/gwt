{
  JsVars vars=new JsVars(jsProgram.getSourceInfo());
  vars.add(new JsVar(jsProgram.getSourceInfo(),globalTemp));
  globalStmts.add(vars);
  generateImmortalTypes(vars);
  Set<JDeclaredType> alreadyProcessed=Sets.<JDeclaredType>newLinkedHashSet(program.immortalCodeGenTypes);
  alreadyProcessed.add(program.getTypeClassLiteralHolder());
  alreadyRan.addAll(alreadyProcessed);
  List<JDeclaredType> classLiteralSupportClasses=computeClassLiteralsSupportClasses(program,alreadyProcessed);
  classLiteralSupportClasses.removeAll(alreadyProcessed);
  for (  JDeclaredType type : classLiteralSupportClasses) {
    accept(type);
  }
  generateClassLiterals(globalStmts,classLiteralSupportClasses);
  installClassLiterals(globalStmts,classLiteralSupportClasses);
  Set<JDeclaredType> preambleTypes=Sets.newLinkedHashSet(alreadyProcessed);
  preambleTypes.addAll(classLiteralSupportClasses);
  return preambleTypes;
}
