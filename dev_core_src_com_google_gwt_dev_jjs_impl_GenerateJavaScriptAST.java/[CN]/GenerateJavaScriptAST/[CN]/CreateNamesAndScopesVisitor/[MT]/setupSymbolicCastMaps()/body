{
  namesByQueryId=new ArrayList<JsName>();
  for (  JReferenceType type : program.getTypesByQueryId()) {
    String shortName;
    String longName;
    if (type instanceof JArrayType) {
      JArrayType arrayType=(JArrayType)type;
      JType leafType=arrayType.getLeafType();
      if (leafType instanceof JReferenceType) {
        shortName=((JReferenceType)leafType).getShortName();
      }
 else {
        shortName=leafType.getName();
      }
      shortName+="_$" + arrayType.getDims();
      longName=getNameString(leafType) + "_$" + arrayType.getDims();
    }
 else {
      shortName=type.getShortName();
      longName=getNameString(type);
    }
    JsName name=topScope.declareName("Q$" + longName,"Q$" + shortName);
    namesByQueryId.add(name);
  }
  StringBuilder sb=new StringBuilder();
  sb.append("function makeCastMap(a) {");
  sb.append("  var result = {};");
  sb.append("  for (var i = 0, c = a.length; i < c; ++i) {");
  sb.append("    result[a[i]] = 1;");
  sb.append("  }");
  sb.append("  return result;");
  sb.append("}");
  makeMapFunction=createGlobalFunction(sb.toString());
}
