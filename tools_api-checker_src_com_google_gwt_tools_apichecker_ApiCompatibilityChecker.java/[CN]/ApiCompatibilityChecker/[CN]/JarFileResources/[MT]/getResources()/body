{
  if (resources != null) {
    return resources;
  }
  resources=new HashSet<Resource>();
  for (  JarFile jarFile : jarFiles) {
    Enumeration<JarEntry> entries=jarFile.entries();
    while (entries.hasMoreElements()) {
      JarEntry jarEntry=entries.nextElement();
      String fileName=jarEntry.toString();
      if (fileName.startsWith(MOCK_PREFIX)) {
        fileName=fileName.substring(MOCK_PREFIX_LENGTH);
      }
      if (fileName.endsWith(".java") && isIncluded(fileName)) {
        String fileContent=getFileContentsFromJar(jarFile,jarEntry);
        String packageName=extractPackageName(new StringReader(fileContent));
        if (packageName == null) {
          logger.log(TreeLogger.WARN,"Not adding file = " + fileName + ", because packageName = null",null);
        }
 else {
          if (isValidPackage(packageName,fileName)) {
            long lastModified=jarEntry.getTime();
            if (lastModified < 0) {
              lastModified=System.currentTimeMillis();
            }
            resources.add(new StaticResource(packageName + "." + getClassName(fileName),fileContent,lastModified));
            logger.log(TreeLogger.DEBUG,"adding pkgName = " + packageName + ", file = "+ fileName,null);
          }
 else {
            logger.log(TreeLogger.SPAM," not adding file " + fileName,null);
          }
        }
      }
    }
  }
  return resources;
}
