{
  if (units != null) {
    return units;
  }
  units=new HashSet<CompilationUnit>();
  for (  JarFile jarFile : jarFiles) {
    Enumeration<JarEntry> entries=jarFile.entries();
    while (entries.hasMoreElements()) {
      JarEntry jarEntry=entries.nextElement();
      String fileName=jarEntry.toString();
      if (fileName.endsWith(".java") && isIncluded(fileName)) {
        String fileContent=getFileContentsFromJar(jarFile,jarEntry);
        String packageName=extractPackageName(new StringReader(fileContent));
        if (packageName == null) {
          logger.log(TreeLogger.WARN,"Not adding file = " + fileName + ", because packageName = null",null);
        }
 else {
          if (isValidPackage(packageName,fileName)) {
            units.add(new StaticCompilationUnit(packageName + "." + getClassName(fileName),fileContent));
            logger.log(TreeLogger.DEBUG,"adding pkgName = " + packageName + ", file = "+ fileName,null);
          }
 else {
            logger.log(TreeLogger.SPAM," not adding file " + fileName,null);
          }
        }
      }
    }
  }
  return units;
}
