{
  String text=null;
  if (elem.hasAttribute("text")) {
    text=elem.consumeAttribute("text");
    text='"' + UiBinderWriter.escapeTextForJavaStringLiteral(text) + '"';
  }
  String imageBundle=null;
  if (elem.hasAttribute(ATTRIBUTE_HEADER_BUNDLE)) {
    imageBundle=elem.consumeAttribute(ATTRIBUTE_HEADER_BUNDLE);
  }
  String initiallyOpen="false";
  if (elem.hasAttribute(ATTRIBUTE_INITIALLY_OPEN)) {
    initiallyOpen=elem.consumeAttribute(ATTRIBUTE_INITIALLY_OPEN);
  }
  String enableAnimation="true";
  if (elem.hasAttribute(ATTRIBUTE_ENABLE_ANIMATION)) {
    enableAnimation=elem.consumeAttribute(ATTRIBUTE_ENABLE_ANIMATION);
  }
  String childFieldName=null;
  String headerFieldName=null;
  for (  XMLElement child : elem.consumeChildElements()) {
    boolean childIsHeader=false;
    String headerAttributeName=elem.getPrefix() + ":" + ATTRIBUTE_HEADER_WIDGET;
    if (child.hasAttribute(headerAttributeName)) {
      if (headerFieldName != null) {
        writer.die("In %s, DisclosurePanel cannot contain more than one header widget.",elem);
      }
      child.consumeAttribute(headerAttributeName);
      headerFieldName=writer.parseElementToField(child);
      childIsHeader=true;
    }
    if (!childIsHeader) {
      if (childFieldName != null) {
        writer.die("In %s, DisclosurePanel cannot contain more than one content widget.",elem);
      }
      childFieldName=writer.parseElementToField(child);
    }
  }
  if (imageBundle != null) {
    writer.setFieldInitializerAsConstructor(fieldName,getDisclosurePanelClass(writer),imageBundle,(text != null ? text : "\"\""),initiallyOpen);
  }
 else {
    JClassType panelClass=getDisclosurePanelClass(writer);
    if (text != null) {
      writer.setFieldInitializerAsConstructor(fieldName,panelClass,text);
    }
 else {
      writer.setFieldInitializerAsConstructor(fieldName,panelClass);
    }
  }
  if (childFieldName != null) {
    writer.addStatement("%1$s.setContent(%2$s);",fieldName,childFieldName);
  }
  if (headerFieldName != null) {
    writer.addStatement("%1$s.setHeader(%2$s);",fieldName,headerFieldName);
  }
  writer.addStatement("%1$s.setAnimationEnabled(%2$s);",fieldName,enableAnimation);
  writer.addStatement("%1$s.setOpen(%2$s);",fieldName,initiallyOpen);
}
