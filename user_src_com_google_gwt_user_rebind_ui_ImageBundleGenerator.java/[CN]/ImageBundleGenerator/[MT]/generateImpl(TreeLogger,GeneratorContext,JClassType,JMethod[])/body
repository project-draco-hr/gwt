{
  String pkgName=userType.getPackage().getName();
  String subName=computeSubclassName(userType);
  ClassSourceFileComposerFactory f=new ClassSourceFileComposerFactory(pkgName,subName);
  f.addImport(ABSTRACTIMAGEPROTOTYPE_QNAME);
  f.addImport(CLIPPEDIMAGEPROTOTYPE_QNAME);
  f.addImport(GWT_QNAME);
  f.addImplementedInterface(userType.getQualifiedSourceName());
  PrintWriter pw=context.tryCreate(logger,pkgName,subName);
  if (pw != null) {
    SourceWriter sw=f.createSourceWriter(context,pw);
    ImageBundleBuilder bulder=new ImageBundleBuilder();
    for (    JMethod method : imageMethods) {
      String imageUrl=getImageUrlFromMetaDataOrMethodName(logger,method);
      assert(imageUrl != null);
      bulder.assimilate(logger,imageUrl);
    }
    String bundledImageUrl=bulder.writeBundledImage(logger,context);
    sw.print("private static final String IMAGE_BUNDLE_URL = GWT.getModuleBaseURL() + \"");
    sw.print(escape(bundledImageUrl));
    sw.println("\";");
    for (    JMethod method : imageMethods) {
      generateImageMethod(logger,bulder,sw,method);
    }
    sw.commit(logger);
  }
  return f.getCreatedClassName();
}
