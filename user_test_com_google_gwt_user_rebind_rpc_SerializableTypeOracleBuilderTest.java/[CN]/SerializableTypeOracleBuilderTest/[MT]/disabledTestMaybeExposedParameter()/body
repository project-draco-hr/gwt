{
  Set<CompilationUnit> units=new HashSet<CompilationUnit>();
  addStandardClasses(units);
{
    StringBuilder code=new StringBuilder();
    code.append("import java.io.Serializable;\n");
    code.append("public abstract class List<T> implements Serializable {\n");
    code.append("}\n");
    units.add(createMockCompilationUnit("List",code));
  }
{
    StringBuilder code=new StringBuilder();
    code.append("public class EmptyList<T> extends List<T> {\n");
    code.append("}\n");
    units.add(createMockCompilationUnit("EmptyList",code));
  }
{
    StringBuilder code=new StringBuilder();
    code.append("public class LinkedList<T> extends List<T> {\n");
    code.append("  T head;\n");
    code.append("  LinkedList<T> next;\n");
    code.append("}\n");
    units.add(createMockCompilationUnit("LinkedList",code));
  }
{
    StringBuilder code=new StringBuilder();
    code.append("public class CantSerialize {\n");
    code.append("}\n");
    units.add(createMockCompilationUnit("CantSerialize",code));
  }
  TreeLogger logger=createLogger();
  TypeOracle to=TypeOracleTestingUtils.buildTypeOracle(logger,units);
  JGenericType list=to.getType("List").isGenericType();
  JGenericType emptyList=to.getType("EmptyList").isGenericType();
  JClassType cantSerialize=to.getType("CantSerialize");
  JParameterizedType listOfCantSerialize=to.getParameterizedType(list,makeArray(cantSerialize));
  SerializableTypeOracleBuilder sob=new SerializableTypeOracleBuilder(logger,to);
  sob.addRootType(logger,listOfCantSerialize);
  SerializableTypeOracle so=sob.build(logger);
  assertFieldSerializable(so,listOfCantSerialize);
  assertSerializableTypes(so,list.getRawType(),emptyList.getRawType());
}
