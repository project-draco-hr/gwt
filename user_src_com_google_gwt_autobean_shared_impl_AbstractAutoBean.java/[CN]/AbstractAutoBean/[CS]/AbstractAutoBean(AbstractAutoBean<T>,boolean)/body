{
  this.factory=toClone.factory;
  if (!toClone.usingSimplePeer) {
    throw new IllegalStateException("Cannot clone wrapped bean");
  }
  if (toClone.tags != null) {
    tags=new HashMap<String,Object>(toClone.tags);
  }
  usingSimplePeer=true;
  values=new HashMap<String,Object>(toClone.values);
  if (deep) {
    for (    Map.Entry<String,Object> entry : values.entrySet()) {
      AutoBean<?> auto=AutoBeanUtils.getAutoBean(entry.getValue());
      if (auto != null) {
        entry.setValue(auto.clone(true).as());
      }
    }
  }
}
