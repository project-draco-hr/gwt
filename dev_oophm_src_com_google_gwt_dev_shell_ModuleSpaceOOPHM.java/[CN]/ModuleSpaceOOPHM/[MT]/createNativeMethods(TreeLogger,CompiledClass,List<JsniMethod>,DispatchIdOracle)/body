{
  if (jsniMethods.isEmpty()) {
    return;
  }
  StringBuilder jsni=new StringBuilder();
  String sourceName=compiledClass.getSourceName();
  for (  JsniMethod jsniMethod : jsniMethods) {
    String body=Jsni.getJavaScriptForHostedMode(logger,dispatchIdOracle,jsniMethod);
    if (body == null) {
      continue;
    }
    jsni.append("// " + jsniMethod.location() + ":"+ jsniMethod.line()+ "\n");
    jsni.append("this[\"" + jsniMethod.name() + "\"] = function(");
    String[] paramNames=jsniMethod.paramNames();
    for (int i=0; i < paramNames.length; ++i) {
      if (i > 0) {
        jsni.append(", ");
      }
      jsni.append(paramNames[i]);
    }
    jsni.append(") ");
    jsni.append(body);
    jsni.append(";\n\n");
  }
  logger.log(TreeLogger.DEBUG,"Defining JSNI for " + sourceName);
  channel.loadJsni(jsni.toString());
}
