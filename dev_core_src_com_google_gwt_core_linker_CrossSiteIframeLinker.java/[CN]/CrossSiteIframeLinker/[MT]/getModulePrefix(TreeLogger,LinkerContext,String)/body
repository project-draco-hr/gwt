{
  TextOutput out=new DefaultTextOutput(context.isOutputCompact());
  out.print("var $wnd = $wnd || window.parent;");
  out.newlineOpt();
  out.print("var __gwtModuleFunction = $wnd." + context.getModuleFunctionName() + ";");
  out.newlineOpt();
  out.print("var $sendStats = __gwtModuleFunction.__sendStats;");
  out.newlineOpt();
  out.print("$sendStats('moduleStartup', 'moduleEvalStart');");
  out.newlineOpt();
  out.print("var $gwt_version = \"" + About.getGwtVersionNum() + "\";");
  out.newlineOpt();
  out.print("var $strongName = '" + strongName + "';");
  out.newlineOpt();
  out.print("var $permProps;");
  out.newlineOpt();
  out.print("var $doc = $wnd.document;");
  out.newlineOpt();
  out.print("function __gwtStartLoadingFragment(frag) {");
  out.newlineOpt();
  String fragDir=getFragmentSubdir(logger,context) + '/';
  out.print("var fragFile = '" + fragDir + "' + $strongName + '/' + frag + '"+ FRAGMENT_EXTENSION+ "';");
  out.newlineOpt();
  out.print("return __gwtModuleFunction.__startLoadingFragment(fragFile);");
  out.newlineOpt();
  out.print("}");
  out.newlineOpt();
  out.print("function __gwtInstallCode(code) {return __gwtModuleFunction.__installRunAsyncCode(code);}");
  out.newlineOpt();
  out.print("function __gwt_isKnownPropertyValue(propName, propValue) {");
  out.newlineOpt();
  out.print("return __gwtModuleFunction.__gwt_isKnownPropertyValue(propName, propValue);");
  out.newlineOpt();
  out.print("}");
  out.newlineOpt();
  out.print("function __gwt_getMetaProperty(name) {");
  out.newlineOpt();
  out.print("return __gwtModuleFunction.__gwt_getMetaProperty(name);");
  out.newlineOpt();
  out.print("}");
  out.newlineOpt();
  out.print("var $stats = $wnd.__gwtStatsEvent ? function(a) {return $wnd.__gwtStatsEvent(a);} : null;");
  out.newlineOpt();
  out.print("var $sessionId = $wnd.__gwtStatsSessionId ? $wnd.__gwtStatsSessionId : null;");
  out.newlineOpt();
  return out.toString();
}
