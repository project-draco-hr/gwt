{
  if (table == null || !table.isActive(this)) {
    throw new IllegalStateException("compile job is not active: " + id);
  }
  if (listenerFailure == null) {
    try {
      recompileListener.finishedCompile(inputModuleName,compileId,newResult.isOk());
    }
 catch (    Exception e) {
      getLogger().log(TreeLogger.Type.WARN,"recompile listener threw exception",e);
      listenerFailure=e;
    }
  }
  result.set(newResult);
  outputModuleName=newResult.outputModuleName;
  if (newResult.isOk()) {
    publish(makeEvent(Status.SERVING));
  }
 else {
    publish(makeEvent(Status.ERROR));
  }
}
