{
  String tagName=elem.getLocalName();
  if (!isWidgetElement(elem)) {
    return findDomElementTypeForTag(tagName);
  }
  String ns=elem.getNamespaceUri();
  String packageName=ns;
  String className=tagName;
  while (true) {
    JPackage pkg=parseNamespacePackage(packageName);
    if (pkg == null) {
      throw new RuntimeException("No such package: " + packageName);
    }
    JClassType rtn=pkg.findType(className);
    if (rtn != null) {
      return rtn;
    }
    int index=className.indexOf(".");
    if (index == -1) {
      die(elem,"No class matching \"%s\" in %s",tagName,ns);
    }
    packageName=packageName + "." + className.substring(0,index);
    className=className.substring(index + 1);
  }
}
