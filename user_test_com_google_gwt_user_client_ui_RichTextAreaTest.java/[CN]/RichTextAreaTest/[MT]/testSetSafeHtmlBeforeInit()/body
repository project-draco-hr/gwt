{
  final RichTextArea richTextArea=new RichTextArea();
  delayTestFinish(RICH_TEXT_ASYNC_DELAY);
  richTextArea.addInitializeHandler(new InitializeHandler(){
    @Override public void onInitialize(    InitializeEvent event){
      new Timer(){
        @Override public void run(){
          assertEquals(html,richTextArea.getHTML().toLowerCase());
          finishTest();
        }
      }
.schedule(100);
    }
  }
);
  richTextArea.setHTML(SafeHtmlUtils.fromSafeConstant(html));
  RootPanel.get().add(richTextArea);
  assertEquals(html,richTextArea.getHTML().toLowerCase());
}
