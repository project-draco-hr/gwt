{
  ProvidesKey<T> keyProvider=getKeyProvider();
  List<T> items=getDisplayedItems();
  if (keyProvider == null) {
    return items.indexOf(value);
  }
  Object key=keyProvider.getKey(value);
  if (key == null) {
    return -1;
  }
  int itemCount=items.size();
  for (int i=0; i < itemCount; i++) {
    if (key.equals(keyProvider.getKey(items.get(i)))) {
      return i;
    }
  }
  return -1;
}
