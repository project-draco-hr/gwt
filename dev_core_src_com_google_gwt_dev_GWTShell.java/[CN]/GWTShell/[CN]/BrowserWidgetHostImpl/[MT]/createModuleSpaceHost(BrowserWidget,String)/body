{
  TreeLogger logger=getLogger();
  Shell widgetShell=widget.getShell();
  try {
    Cursor waitCursor=display.getSystemCursor(SWT.CURSOR_WAIT);
    widgetShell.setCursor(waitCursor);
    ModuleDef moduleDef=loadModule(moduleName,logger);
    assert(moduleDef != null);
    File moduleDir=new File(outDir,moduleName);
    File shellDir=new File(moduleDir,GWT_SHELL_PATH);
    TypeOracle typeOracle=moduleDef.getTypeOracle(logger);
    ShellModuleSpaceHost host=doCreateShellModuleSpaceHost(logger,typeOracle,moduleDef,genDir,shellDir);
    return host;
  }
  finally {
    Cursor normalCursor=display.getSystemCursor(SWT.CURSOR_ARROW);
    widgetShell.setCursor(normalCursor);
  }
}
