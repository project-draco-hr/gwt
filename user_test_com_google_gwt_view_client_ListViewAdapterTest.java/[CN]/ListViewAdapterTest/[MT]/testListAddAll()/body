{
  ListViewAdapter<String> adapter=createListViewAdapter(10);
  List<String> list=adapter.getList();
  MockHasData<String> view=new MockHasData<String>();
  view.setVisibleRange(0,25);
  adapter.addView(view);
  adapter.flush();
  view.clearLastRowValuesAndRange();
  List<String> toAdd=createData(10,3);
  list.addAll(toAdd);
  assertEquals("test 10",list.get(10));
  assertEquals("test 11",list.get(11));
  assertEquals("test 12",list.get(12));
  adapter.flush();
  assertEquals(toAdd,view.getLastRowValues());
  assertEquals(new Range(10,3),view.getLastRowValuesRange());
  List<String> toInsert=createData(20,3);
  list.addAll(2,toInsert);
  assertEquals("test 20",list.get(2));
  assertEquals("test 21",list.get(3));
  assertEquals("test 22",list.get(4));
  adapter.flush();
  assertEquals(new Range(2,14),view.getLastRowValuesRange());
}
