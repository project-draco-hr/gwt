{
  CellTree.Style style=nodeView.tree.getStyle();
  String selectedStyle=style.selectedItem();
  String itemStyle=style.item();
  String itemImageValueStyle=style.itemImageValue();
  String itemValueStyle=style.itemValue();
  String openStyle=style.openItem();
  String topStyle=style.topItem();
  String topImageValueStyle=style.topItemImageValue();
  boolean isRootNode=nodeView.isRootNode();
  String openImage=nodeView.tree.getOpenImageHtml(isRootNode);
  String closedImage=nodeView.tree.getClosedImageHtml(isRootNode);
  int imageWidth=nodeView.tree.getImageWidth();
  int paddingLeft=imageWidth * nodeView.depth;
  Set<Object> openNodes=new HashSet<Object>();
  int childCount=nodeView.getChildCount();
  int end=start + values.size();
  for (int i=start; i < end && i < childCount; i++) {
    CellTreeNodeView<?> child=nodeView.getChildNode(i);
    if (child.isOpen()) {
      openNodes.add(child.getValueKey());
    }
  }
  ProvidesKey<C> providesKey=nodeInfo.getProvidesKey();
  TreeViewModel model=nodeView.tree.getTreeViewModel();
  for (  C value : values) {
    Object key=providesKey.getKey(value);
    boolean isOpen=openNodes.contains(key);
    sb.append("<div>");
    sb.append("<div style='padding-left:");
    sb.append(paddingLeft);
    sb.append("px;' class='").append(itemStyle);
    if (isOpen) {
      sb.append(" ").append(openStyle);
    }
    if (isRootNode) {
      sb.append(" ").append(topStyle);
    }
    if (selectionModel != null && selectionModel.isSelected(value)) {
      sb.append(" ").append(selectedStyle);
    }
    sb.append("'>");
    sb.append("<div onclick='' style='position:relative;padding-left:");
    sb.append(imageWidth);
    sb.append("px;' class='").append(itemImageValueStyle);
    if (isRootNode) {
      sb.append(" ").append(topImageValueStyle);
    }
    sb.append("'>");
    if (isOpen) {
      sb.append(openImage);
    }
 else     if (model.isLeaf(value)) {
      sb.append(LEAF_IMAGE);
    }
 else {
      sb.append(closedImage);
    }
    sb.append("<div class='").append(itemValueStyle).append("'>");
    cell.render(value,null,sb);
    sb.append("</div></div></div></div>");
  }
}
