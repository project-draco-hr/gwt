{
  SimpleProxyId<Q> id;
  if (Strength.SYNTHETIC.equals(idMessage.getStrength())) {
    @SuppressWarnings("unchecked") Class<Q> clazz=(Class<Q>)service.resolveClass(idMessage.getTypeToken());
    id=idFactory.allocateSyntheticId(clazz,idMessage.getSyntheticId());
  }
 else {
    String decodedId=idMessage.getServerId() == null ? null : SimpleRequestProcessor.fromBase64(idMessage.getServerId());
    id=idFactory.getId(idMessage.getTypeToken(),decodedId,idMessage.getClientId());
  }
  return getBeanForPayload(id);
}
