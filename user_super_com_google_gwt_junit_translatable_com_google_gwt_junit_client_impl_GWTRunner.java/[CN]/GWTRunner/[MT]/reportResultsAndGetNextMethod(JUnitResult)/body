{
  if (serverless) {
    return;
  }
  if (result != null && failureMessage != null) {
    RuntimeException ex=new RuntimeException(failureMessage);
    result.setException(ex);
  }
 else   if (!GWT.isProdMode() && result.exceptionWrapper != null) {
    SerializationStreamFactory fac=(SerializationStreamFactory)junitHost;
    SerializationStreamWriter writer=fac.createStreamWriter();
    ensureSerializable(result.exceptionWrapper,writer);
  }
  TestInfo currentTest=getCurrentTest();
  currentResults.put(currentTest,result);
  ++currentTestIndex;
  if (currentTestIndex < currentBlock.getTests().length) {
    Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand(){
      public void execute(){
        doRunTest();
      }
    }
);
  }
 else {
    syncToServer();
  }
}
