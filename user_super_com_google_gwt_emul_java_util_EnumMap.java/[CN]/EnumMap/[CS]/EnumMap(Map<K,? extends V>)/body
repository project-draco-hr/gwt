{
  if (m instanceof EnumMap) {
    init((EnumMap<K,? extends V>)m);
  }
 else {
    if (m.isEmpty()) {
      throw new IllegalArgumentException("The map must not be empty.");
    }
    init(m.keySet().iterator().next().getDeclaringClass());
    putAll(m);
  }
}
