{
  Shell parent=getParent();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL | SWT.RESIZE);
  shell.setImages(ShellMainWindow.getIcons());
  shell.setText(getText());
  shell.setLayout(new FillLayout());
  new Contents(shell);
  onOpen();
  int myWidth;
  int myHeight;
  if (autoSize) {
    shell.pack();
    Rectangle shellBounds=shell.getBounds();
    myWidth=Math.max(shellBounds.width,minWidth);
    myHeight=Math.max(shellBounds.height,minHeight);
  }
 else {
    myWidth=minWidth;
    myHeight=minHeight;
  }
  Rectangle parentBounds=parent.getBounds();
  int myLeft=parentBounds.x + (parentBounds.width / 2 - myWidth / 2);
  int myTop=parentBounds.y + (parentBounds.height / 4);
  shell.setBounds(myLeft,myTop,myWidth,myHeight);
  shell.open();
  Display display=parent.getDisplay();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch()) {
      display.sleep();
    }
  }
  return !cancelled;
}
