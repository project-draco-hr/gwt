{
  Shell parent=getParent();
  fShell=new Shell(parent,SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL | SWT.RESIZE);
  fShell.setImages(GWTShell.getIcons());
  fShell.setText(getText());
  fShell.setLayout(new FillLayout());
  new Contents(fShell);
  onOpen();
  int myWidth;
  int myHeight;
  if (autoSize) {
    fShell.pack();
    Rectangle shellBounds=fShell.getBounds();
    myWidth=Math.max(shellBounds.width,fMinWidth);
    myHeight=Math.max(shellBounds.height,fMinHeight);
  }
 else {
    myWidth=fMinWidth;
    myHeight=fMinHeight;
  }
  Rectangle parentBounds=parent.getBounds();
  int myLeft=parentBounds.x + (parentBounds.width / 2 - myWidth / 2);
  int myTop=parentBounds.y + (parentBounds.height / 4);
  fShell.setBounds(myLeft,myTop,myWidth,myHeight);
  fShell.open();
  Display display=parent.getDisplay();
  while (!fShell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return !fCancelled;
}
