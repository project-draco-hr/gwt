{
  log.clear();
  try (Resource rA=new ResourceWithExceptionOnClose("A");Resource rB=new Resource("B");Resource rC=new ResourceWithExceptionOnClose("C")){
    rA.doSomething();
    rB.doSomething();
    rC.doSomething();
  }
 catch (  Exception e) {
    log.add(e.getMessage());
    for (    Throwable t : e.getSuppressed()) {
      log.add("Suppressed: " + t.getMessage());
    }
  }
  assertContentsInOrder(log,"Open A","Open B","Open C","doSomething A","doSomething B","doSomething C","Close B","Exception in close C","Suppressed: Exception in close A");
  log.clear();
  try (Resource rA=new Resource("A");Resource rB=new ResourceWithExceptionOnClose("B");Resource rC=new Resource("C")){
    rA.doSomething();
    rB.throwException("E1 here");
    rC.doSomething();
  }
 catch (  Exception e) {
    log.add(e.getMessage());
    for (    Throwable t : e.getSuppressed()) {
      log.add("Suppressed: " + t.getMessage());
    }
  }
 finally {
    log.add("finally");
  }
  assertContentsInOrder(log,"Open A","Open B","Open C","doSomething A","Close C","Close A","E1 here in B","Suppressed: Exception in close B","finally");
}
