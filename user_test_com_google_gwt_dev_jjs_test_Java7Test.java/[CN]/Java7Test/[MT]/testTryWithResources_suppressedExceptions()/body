{
  log.clear();
  try (Resource rA=new Resource("A",ThrowsWhen.ONCLOSE);Resource rB=new Resource("B");Resource rC=new Resource("C",ThrowsWhen.ONCLOSE)){
    rA.doSomething();
    rB.doSomething();
    rC.doSomething();
  }
 catch (  Exception e) {
    logException(e);
  }
  assertContentsInOrder(log,"Open A","Open B","Open C","doSomething A","doSomething B","doSomething C","Close C","Close B","Close A","ExceptionOnClose in C","Suppressed: ExceptionOnClose in A");
  log.clear();
  try (Resource rA=new Resource("A");Resource rB=new Resource("B",ThrowsWhen.ONCLOSE);Resource rC=new Resource("C")){
    rA.doSomething();
    rB.throwException("E1 here");
    rC.doSomething();
  }
 catch (  Exception e) {
    logException(e);
  }
 finally {
    log.add("finally");
  }
  assertContentsInOrder(log,"Open A","Open B","Open C","doSomething A","Close C","Close B","Close A","E1 here in B","Suppressed: ExceptionOnClose in B","finally");
}
