{
  UnitTestTreeLogger.Builder builder=new UnitTestTreeLogger.Builder();
  builder.expectWarn("Type 'FromType' wants to reference type 'ToType' but can't because module " + "'FromModule1' has no dependency (neither direct nor transitive) on " + "'ToModule1|ToModule2|ToModule3'.",null);
  builder.expectWarn("Type 'FromType' wants to reference type 'ToType' but can't because module " + "'FromModule3' has no dependency (neither direct nor transitive) on " + "'ToModule1|ToModule2|ToModule3'.",null);
  UnitTestTreeLogger logger=builder.createLogger();
  File missingDepsFile=java.nio.file.Files.createTempFile("missingDepsFile","txt").toFile();
  MockDepsInfoProvider depsInfo=new MockDepsInfoProvider();
  depsInfo.addModuleDep("FooModule","FromModule1");
  depsInfo.addModuleDep("FooModule","FromModule2");
  depsInfo.addModuleDep("FooModule","FromModule3");
  depsInfo.addModuleDep("FooModule","ToModule1");
  depsInfo.addModuleDep("FooModule","ToModule2");
  depsInfo.addModuleDep("FooModule","ToModule3");
  depsInfo.addModuleDep("FromModule2","ToModule2");
  depsInfo.addGwtXmlFile("FromModule1","com/google/gwt/FromModule1.gwt.xml");
  depsInfo.addGwtXmlFile("FromModule2","com/google/gwt/FromModule2.gwt.xml");
  depsInfo.addGwtXmlFile("FromModule3","com/google/gwt/FromModule3.gwt.xml");
  depsInfo.addGwtXmlFile("ToModule1","com/google/gwt/ToModule1.gwt.xml");
  depsInfo.addGwtXmlFile("ToModule2","com/google/gwt/ToModule2.gwt.xml");
  depsInfo.addGwtXmlFile("ToModule3","com/google/gwt/ToModule3.gwt.xml");
  depsInfo.registerType("FromType","FromModule1");
  depsInfo.registerType("FromType","FromModule2");
  depsInfo.registerType("FromType","FromModule3");
  depsInfo.registerType("ToType","ToModule1");
  depsInfo.registerType("ToType","ToModule2");
  depsInfo.registerType("ToType","ToModule3");
  TypeRefDepsChecker typeRefDepsChecker=new TypeRefDepsChecker(logger,null,depsInfo,true,missingDepsFile);
  typeRefDepsChecker.maybeRecordTypeRef("FromType","ToType");
  typeRefDepsChecker.verifyTypeRefsInModules();
  logger.assertCorrectLogEntries();
  assertEquals("FromModule1\tcom/google/gwt/FromModule1.gwt.xml\t" + "ToModule1|ToModule2|ToModule3\tcom/google/gwt/ToModule1.gwt.xml|" + "com/google/gwt/ToModule2.gwt.xml|com/google/gwt/ToModule3.gwt.xml\t"+ "Type 'FromType' wants to reference type 'ToType'.\n"+ "FromModule3\tcom/google/gwt/FromModule3.gwt.xml\t"+ "ToModule1|ToModule2|ToModule3\tcom/google/gwt/ToModule1.gwt.xml|"+ "com/google/gwt/ToModule2.gwt.xml|com/google/gwt/ToModule3.gwt.xml\t"+ "Type 'FromType' wants to reference type 'ToType'.",CharMatcher.WHITESPACE.trimFrom(Files.toString(missingDepsFile,StandardCharsets.UTF_8)));
}
