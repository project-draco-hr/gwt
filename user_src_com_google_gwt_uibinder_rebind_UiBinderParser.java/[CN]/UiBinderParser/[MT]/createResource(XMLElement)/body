{
  String resourceName=elem.consumeRequiredAttribute("name");
  String resourceTypeName=elem.consumeRequiredAttribute("type");
  JClassType resourceType=writer.getOracle().findType(resourceTypeName);
  if (resourceType == null) {
    writer.die("In %s, no such type %s",elem,resourceTypeName);
  }
  if (elem.getAttributeCount() > 0) {
    writer.die("In %s, should only find attributes \"name\" and \"type\"");
  }
  FieldWriter fieldWriter=fieldManager.registerField(resourceTypeName,resourceName);
  OwnerField ownerField=writer.getOwnerClass().getUiField(resourceName);
  if (ownerField != null) {
    if (!resourceType.equals(ownerField.getType().getRawType())) {
      writer.die("In %s, type must match %s",ownerField);
    }
    if (ownerField.isProvided()) {
      fieldWriter.setInitializer("owner." + ownerField.getName());
      return;
    }
  }
  JMethod factoryMethod=writer.getOwnerClass().getUiFactoryMethod(resourceType);
  if (factoryMethod != null) {
    fieldWriter.setInitializer(String.format("owner.%s()",factoryMethod.getName()));
  }
}
