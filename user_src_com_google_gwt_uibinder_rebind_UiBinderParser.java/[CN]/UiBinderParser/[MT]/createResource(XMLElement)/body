{
  String resourceName=elem.consumeRequiredRawAttribute(FIELD_ATTRIBUTE);
  JClassType resourceType=consumeTypeAttribute(elem);
  if (elem.getAttributeCount() > 0) {
    writer.die(elem,"Should only find attributes \"field\" and \"type\"");
  }
  FieldWriter fieldWriter=fieldManager.registerField(resourceType,resourceName);
  OwnerField ownerField=writer.getOwnerClass().getUiField(resourceName);
  if (ownerField != null) {
    if (!resourceType.equals(ownerField.getType().getRawType())) {
      writer.die(elem,"Type must match %s",ownerField);
    }
    if (ownerField.isProvided()) {
      fieldWriter.setInitializer("owner." + ownerField.getName());
      return;
    }
  }
  JMethod factoryMethod=writer.getOwnerClass().getUiFactoryMethod(resourceType);
  if (factoryMethod != null) {
    fieldWriter.setInitializer(String.format("owner.%s()",factoryMethod.getName()));
  }
}
