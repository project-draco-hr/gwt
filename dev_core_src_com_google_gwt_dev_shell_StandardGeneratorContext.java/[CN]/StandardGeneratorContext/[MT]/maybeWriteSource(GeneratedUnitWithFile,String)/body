{
  if (unit.isOnDisk() || genDir == null) {
    return;
  }
  String packageName=Shared.getPackageName(qualifiedTypeName);
  String shortName=Shared.getShortName(qualifiedTypeName);
  File dir=new File(genDir,packageName.replace('.',File.separatorChar));
  dir.mkdirs();
  File srcFile=new File(dir,shortName + ".java");
  if (Util.writeStringAsFile(srcFile,unit.getSource())) {
    unit.setFile(srcFile);
  }
}
