{
  XMLElement xmlElement=elementProvider.get(elem);
  String replacement=interpreter.interpretElement(xmlElement);
  if (replacement != null) {
    buffer.append(replacement);
    return;
  }
  Node parent=elem.getParentNode();
  buffer.append(xmlElement.consumeOpeningTag());
  getEscapedInnerHtml(elem,buffer,interpreter,elementProvider,domCursor,logger);
  buffer.append(xmlElement.getClosingTag());
  domCursor.advanceChild();
}
