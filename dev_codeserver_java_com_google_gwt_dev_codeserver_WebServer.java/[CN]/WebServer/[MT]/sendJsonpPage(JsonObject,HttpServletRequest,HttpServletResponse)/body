{
  response.setStatus(HttpServletResponse.SC_OK);
  response.setContentType("application/javascript");
  PrintWriter out=response.getWriter();
  String callbackExpression=request.getParameter("_callback");
  if (callbackExpression == null || !SAFE_CALLBACK.matcher(callbackExpression).matches()) {
    logger.log(TreeLogger.ERROR,"invalid callback: " + callbackExpression);
    out.print("/* invalid callback parameter */");
    return;
  }
  out.print(callbackExpression + "(");
  json.write(out);
  out.println(");");
}
