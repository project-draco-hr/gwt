{
  UnitTestTreeLogger.Builder b=new UnitTestTreeLogger.Builder();
  b.expectWarn(ImageBundleGenerator.MSG_JAVADOC_FORM_DEPRECATED,null);
  b.expectWarn(ImageBundleGenerator.MSG_JAVADOC_FORM_DEPRECATED,null);
  UnitTestTreeLogger logger=b.createLogger();
{
    String imgName=getImageName(logger,new String[]{"x/y/z/europa.png","x/y/z/io.jpg"},"io","x.y.z",new String[0][],null);
    assertEquals("x/y/z/io.jpg",imgName);
  }
{
    String imgName=getImageName(logger,new String[]{"x/y/z/europa.png","x/y/z/io.jpg"},"moonImage","x.y.z",new String[][]{{"io.jpg"}},null);
    assertEquals("x/y/z/io.jpg",imgName);
  }
{
    String imgName=getImageName(logger,new String[]{"x/y/z/europa.png","x/y/z/io.jpg"},"moonImage","x.y.z",new String[0][],getResourceAnnotation("ioInSamePackage"));
    assertEquals("x/y/z/io.jpg",imgName);
  }
{
    String imgName=getImageName(logger,new String[]{"car.png","dunebuggy.gif","a/b/c/dunebuggy.gif"},"vehicleImage","x.y.z",new String[][]{{"a/b/c/dunebuggy.gif"}},null);
    assertEquals("a/b/c/dunebuggy.gif",imgName);
  }
{
    String imgName=getImageName(logger,new String[]{"car.png","dunebuggy.gif","a/b/c/dunebuggy.gif"},"vehicleImage","x.y.z",new String[0][],getResourceAnnotation("duneBuggyInNonDefaultPackage"));
    assertEquals("a/b/c/dunebuggy.gif",imgName);
  }
  logger.assertCorrectLogEntries();
}
