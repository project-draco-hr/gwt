{
  WindowEvent event=new WindowEvent(this);
  event.display=getDisplay();
  event.widget=this;
  if (aVisibility == 1) {
    if (!visible) {
      visible=true;
      event.location=location;
      event.size=size;
      event.addressBar=addressBar;
      event.menuBar=menuBar;
      event.statusBar=statusBar;
      event.toolBar=toolBar;
      for (int i=0; i < visibilityWindowListeners.length; i++)       visibilityWindowListeners[i].show(event);
      location=null;
      size=null;
    }
  }
 else {
    visible=false;
    for (int i=0; i < visibilityWindowListeners.length; i++)     visibilityWindowListeners[i].hide(event);
  }
  return XPCOM.NS_OK;
}
