{
  if (headers != null && headers.size() > 0) {
    Set entrySet=headers.entrySet();
    Iterator iter=entrySet.iterator();
    while (iter.hasNext()) {
      Map.Entry header=(Map.Entry)iter.next();
      String errorMessage=XMLHTTPRequest.setRequestHeader(xmlHttpRequest,(String)header.getKey(),(String)header.getValue());
      if (errorMessage != null) {
        throw new RequestException(errorMessage);
      }
    }
  }
 else {
    XMLHTTPRequest.setRequestHeader(xmlHttpRequest,"Content-Type","text/plain; charset=utf-8");
  }
}
