{
  JavaScriptObject xmlHttpRequest=httpRequest.createXmlHTTPRequest();
  String openError=XMLHTTPRequest.open(xmlHttpRequest,httpMethod,url,true,user,password);
  if (openError != null) {
    throw new RequestPermissionException(url);
  }
  setHeaders(xmlHttpRequest);
  Request request=new Request(xmlHttpRequest,timeoutMillis,callback);
  String sendError=XMLHTTPRequest.send(xmlHttpRequest,request,requestData,callback);
  if (sendError != null) {
    throw new RequestException(sendError);
  }
  return request;
}
