{
  logger=logger.branch(TreeLogger.DEBUG,"Attempting to commit OutputStream",null);
  if (!outs.containsKey(toCommit)) {
    logger.log(TreeLogger.ERROR,"OutputStream was foreign to this LinkerContext",null);
    throw new UnableToCompleteException();
  }
  File f=outs.get(toCommit);
  if (f == null) {
    logger.log(TreeLogger.ERROR,"The OutputStream has already been committed",null);
    throw new UnableToCompleteException();
  }
  ByteArrayOutputStream original=(ByteArrayOutputStream)toCommit;
  outs.put(original,null);
  try {
    Util.writeBytesToFile(logger,f,original.toByteArray());
  }
  finally {
    original.reset();
  }
  logger.log(TreeLogger.DEBUG,"Successfully committed " + f.getPath(),null);
}
