{
  JEnumType unitEnumType=writer.getOracle().findType(Unit.class.getCanonicalName()).isEnum();
  String unit=elem.consumeAttribute("unit",unitEnumType);
  writer.setFieldInitializerAsConstructor(fieldName,writer.getOracle().findType(StackLayoutPanel.class.getName()),unit);
  for (  XMLElement child : elem.consumeChildElements()) {
    if (!isElementType(elem,child,STACK_ELEM)) {
      writer.die("In %s, Only <stack> children are allowed.",elem);
    }
    XMLElement headerElem=null, widgetElem=null;
    for (    XMLElement stackChild : child.consumeChildElements()) {
      if (isElementType(elem,stackChild,HEADER_ELEM)) {
        if (headerElem != null) {
          writer.die("In %s, Only one <header> allowed per <stack>",elem);
        }
        headerElem=stackChild;
        continue;
      }
      if (widgetElem != null) {
        writer.die("In %s, Only one child widget allowed per <stack>",elem);
      }
      widgetElem=stackChild;
    }
    String size=headerElem.consumeDoubleAttribute("size");
    XMLElement headerWidgetElem=headerElem.consumeSingleChildElement();
    String headerFieldName=writer.parseElementToField(headerWidgetElem);
    String childFieldName=writer.parseElementToField(widgetElem);
    writer.addStatement("%s.add(%s, %s, %s);",fieldName,childFieldName,headerFieldName,size);
  }
}
