{
  if (!job.wasSubmitted() || job.isDone()) {
    throw new IllegalStateException("tried to recompile using a job in the wrong state:" + job.getId());
  }
  Result result=recompiler.recompile(job);
  if (result.isOk()) {
    publish(result);
  }
 else {
    job.getLogger().log(TreeLogger.Type.WARN,"continuing to serve previous version");
  }
}
