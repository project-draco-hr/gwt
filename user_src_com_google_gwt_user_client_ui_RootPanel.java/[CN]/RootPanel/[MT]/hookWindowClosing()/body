{
  Window.addWindowCloseListener(new WindowCloseListener(){
    public void onWindowClosed(){
      for (int i=0; i < widgetsToDetach.size(); ++i) {
        Widget widget=widgetsToDetach.get(i);
        if (widget.isAttached()) {
          widget.onDetach();
        }
      }
    }
    public String onWindowClosing(){
      return null;
    }
  }
);
}
