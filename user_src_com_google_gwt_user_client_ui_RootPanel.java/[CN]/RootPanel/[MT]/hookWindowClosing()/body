{
  Window.addWindowCloseListener(new WindowCloseListener(){
    public void onWindowClosed(){
      for (Iterator it=rootPanels.values().iterator(); it.hasNext(); ) {
        RootPanel gwt=(RootPanel)it.next();
        if (gwt.isAttached()) {
          gwt.onDetach();
        }
      }
    }
    public String onWindowClosing(){
      return null;
    }
  }
);
}
