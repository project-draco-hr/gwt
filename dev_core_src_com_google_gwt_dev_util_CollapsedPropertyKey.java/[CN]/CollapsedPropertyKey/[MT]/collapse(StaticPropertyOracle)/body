{
  SortedMap<String,SortedSet<String>> collapsedPropertyMap=new TreeMap<String,SortedSet<String>>();
  for (  StaticPropertyOracle oracle : oracles) {
    for (int i=0, j=oracle.getOrderedProps().length; i < j; i++) {
      BindingProperty prop=oracle.getOrderedProps()[i];
      String value=oracle.getOrderedPropValues()[i];
      boolean isCollapsed=false;
      for (      Set<String> equivalenceSet : prop.getCollapsedValues()) {
        if (equivalenceSet.contains(value)) {
          SortedSet<String> toAdd=collapsedPropertyMap.get(prop.getName());
          if (toAdd == null) {
            toAdd=new TreeSet<String>();
            collapsedPropertyMap.put(prop.getName(),toAdd);
            isCollapsed=true;
          }
          toAdd.addAll(equivalenceSet);
        }
      }
      if (!isCollapsed) {
        collapsedPropertyMap.put(prop.getName(),new TreeSet<String>(Arrays.asList(value)));
      }
    }
  }
  return collapsedPropertyMap.toString();
}
