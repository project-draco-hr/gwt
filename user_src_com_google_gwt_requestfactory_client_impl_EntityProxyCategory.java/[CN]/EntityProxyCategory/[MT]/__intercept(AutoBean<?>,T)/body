{
  AbstractRequestContext context=requestContext(bean);
  if (context == null || context.isLocked()) {
    return returnValue;
  }
  if (returnValue instanceof EntityProxy) {
    @SuppressWarnings("unchecked") T toReturn=(T)context.edit((EntityProxy)returnValue);
    return toReturn;
  }
  AutoBean<T> otherBean=AutoBeanUtils.getAutoBean(returnValue);
  if (otherBean != null) {
    otherBean.setTag(EntityProxyCategory.REQUEST_CONTEXT,bean.getTag(EntityProxyCategory.REQUEST_CONTEXT));
  }
  return returnValue;
}
