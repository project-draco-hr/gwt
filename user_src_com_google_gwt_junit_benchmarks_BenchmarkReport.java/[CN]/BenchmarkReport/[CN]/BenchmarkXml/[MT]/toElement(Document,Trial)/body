{
  Element trialElement=doc.createElement("trial");
  Map<String,String> variables=trial.getVariables();
  for (  Map.Entry<String,String> entry : variables.entrySet()) {
    Object name=entry.getKey();
    Object value=entry.getValue();
    Element variableElement=doc.createElement("variable");
    variableElement.setAttribute("name",name.toString());
    variableElement.setAttribute("value",value.toString());
    trialElement.appendChild(variableElement);
  }
  trialElement.setAttribute("timing",String.valueOf(trial.getRunTimeMillis()));
  Throwable exception=trial.getException();
  if (exception != null) {
    Element exceptionElement=doc.createElement("exception");
    exceptionElement.appendChild(doc.createTextNode(exception.toString()));
    trialElement.appendChild(exceptionElement);
  }
  return trialElement;
}
