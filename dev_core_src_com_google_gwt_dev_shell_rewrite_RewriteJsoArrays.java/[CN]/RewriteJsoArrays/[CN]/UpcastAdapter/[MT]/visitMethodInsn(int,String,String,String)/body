{
switch (opcode) {
case Opcodes.INVOKESPECIAL:
{
      if ("<init>".equals(name)) {
        String[] disambiguator=rewriterOracle.getArrayDisambiguator(desc);
        Method m=upcastMethod(name,desc);
        desc=m == null ? desc : m.getDescriptor();
        if (disambiguator.length != 0) {
          desc=addDisambiguator(desc,disambiguator);
          recordDebugData("Constructor disambiguation " + Arrays.asList(disambiguator));
          for (int i=0, j=disambiguator.length; i < j; i++) {
            super.visitInsn(Opcodes.ACONST_NULL);
          }
          minStack=Math.max(minStack,stack.size());
        }
        break;
      }
    }
case Opcodes.INVOKEINTERFACE:
case Opcodes.INVOKESTATIC:
case Opcodes.INVOKEVIRTUAL:
{
    Method m=upcastMethod(name,desc);
    if (m != null) {
      recordDebugData("Replaced method call " + name + " "+ desc+ " with "+ m.toString());
      name=m.getName();
      desc=m.getDescriptor();
    }
    break;
  }
default :
throw new RuntimeException("Unhandled method instruction " + opcode);
}
super.visitMethodInsn(opcode,owner,name,desc);
}
