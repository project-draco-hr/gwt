{
  int minLocals=0;
  String originalJsniName=name;
  String originalJsniDesc=desc;
  Method upcast=upcastMethod(name,desc);
  if (upcast != null) {
    if ("<init>".equals(name)) {
      String[] disambiguator=rewriterOracle.getArrayDisambiguator(desc);
      desc=upcast.getDescriptor();
      if (disambiguator.length != 0) {
        desc=addDisambiguator(desc,disambiguator);
        minLocals=Type.getArgumentTypes(desc).length + 1;
      }
      originalJsniName="new";
    }
 else {
      name=upcast.getName();
      desc=upcast.getDescriptor();
    }
  }
  MethodVisitor mv=super.visitMethod(access,name,desc,signature,exceptions);
  if (mv != null) {
    if (upcast != null) {
      AnnotationVisitor av=mv.visitAnnotation(ORIGINAL_JSNI_SIGNATURE_DESC,true);
      if (av != null) {
        av.visit("name",originalJsniName);
        av.visit("paramList",originalJsniDesc.substring(0,originalJsniDesc.indexOf(')') + 1));
        av.visitEnd();
      }
    }
    mv=new UpcastAdapter(owner,access,name,desc,mv,minLocals);
  }
  return mv;
}
