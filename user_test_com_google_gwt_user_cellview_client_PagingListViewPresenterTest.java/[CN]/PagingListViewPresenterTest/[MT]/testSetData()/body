{
  PagingListView<String> listView=new MockPagingListView<String>();
  MockView<String> view=new MockView<String>();
  PagingListViewPresenter<String> presenter=new PagingListViewPresenter<String>(listView,view,10);
  presenter.setRange(5,10);
  view.assertLoadingState(LoadingState.LOADING);
  List<String> expectedData=createData(5,10);
  presenter.setData(5,10,createData(5,10));
  assertEquals(10,presenter.getData().size());
  assertEquals(expectedData,presenter.getData());
  view.assertReplaceAllChildrenCalled(true);
  view.assertReplaceChildrenCalled(false);
  view.assertLastHtml("start=5,size=10");
  assertEquals(10,view.getChildCount());
  view.assertLoadingState(LoadingState.LOADED);
  expectedData.set(2,"test 100");
  expectedData.set(3,"test 101");
  presenter.setData(7,2,createData(100,2));
  assertEquals(10,presenter.getData().size());
  assertEquals(expectedData,presenter.getData());
  view.assertReplaceAllChildrenCalled(false);
  view.assertReplaceChildrenCalled(true);
  view.assertLastHtml("start=7,size=2");
  assertEquals(10,view.getChildCount());
  view.assertLoadingState(LoadingState.LOADED);
  expectedData.set(0,"test 202");
  expectedData.set(1,"test 203");
  presenter.setData(3,4,createData(200,4));
  assertEquals(10,presenter.getData().size());
  assertEquals(expectedData,presenter.getData());
  view.assertReplaceAllChildrenCalled(false);
  view.assertReplaceChildrenCalled(true);
  view.assertLastHtml("start=5,size=2");
  assertEquals(10,view.getChildCount());
  view.assertLoadingState(LoadingState.LOADED);
  expectedData.set(8,"test 300");
  expectedData.set(9,"test 301");
  presenter.setData(13,4,createData(300,4));
  assertEquals(10,presenter.getData().size());
  assertEquals(expectedData,presenter.getData());
  view.assertReplaceAllChildrenCalled(false);
  view.assertReplaceChildrenCalled(true);
  view.assertLastHtml("start=13,size=2");
  assertEquals(10,view.getChildCount());
  view.assertLoadingState(LoadingState.LOADED);
  expectedData=createData(400,20).subList(2,12);
  presenter.setData(3,20,createData(400,20));
  assertEquals(10,presenter.getData().size());
  assertEquals(expectedData,presenter.getData());
  view.assertReplaceAllChildrenCalled(true);
  view.assertReplaceChildrenCalled(false);
  view.assertLastHtml("start=5,size=10");
  assertEquals(10,view.getChildCount());
  view.assertLoadingState(LoadingState.LOADED);
}
