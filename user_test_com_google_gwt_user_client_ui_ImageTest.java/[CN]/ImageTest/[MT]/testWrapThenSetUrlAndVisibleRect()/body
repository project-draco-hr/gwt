{
  String uid=Document.get().createUniqueId();
  HTML html=new HTML("<img id='" + uid + "' src='counting-backwards.png' width='16' height='16'>");
  RootPanel.get().add(html);
  final Image image=Image.wrap(Document.get().getElementById(uid));
  delayTestFinish(20000);
  assertEquals(0,image.getOriginLeft());
  assertEquals(0,image.getOriginTop());
  assertEquals(16,image.getWidth());
  assertEquals(16,image.getHeight());
  assertEquals("unclipped",getCurrentImageStateName(image));
  image.setUrlAndVisibleRect("counting-forwards.png",0,16,16,16);
  Timer t=new Timer(){
    public void run(){
      assertEquals(0,image.getOriginLeft());
      assertEquals(16,image.getOriginTop());
      assertEquals(16,image.getWidth());
      assertEquals(16,image.getHeight());
      assertEquals("clipped",getCurrentImageStateName(image));
      finishTest();
    }
  }
;
  t.schedule(1000);
}
