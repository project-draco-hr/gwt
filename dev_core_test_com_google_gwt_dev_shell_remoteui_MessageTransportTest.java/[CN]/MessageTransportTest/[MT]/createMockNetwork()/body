{
  final ServerSocket listenSocket=new ServerSocket(0);
  ExecutorService executorService=Executors.newFixedThreadPool(1);
  Future<Socket> future=executorService.submit(new Callable<Socket>(){
    public Socket call() throws Exception {
      return listenSocket.accept();
    }
  }
);
  Socket clientSocket=new Socket("localhost",listenSocket.getLocalPort());
  Socket serverSocket=future.get();
  return new MockNetwork(clientSocket,serverSocket,listenSocket);
}
