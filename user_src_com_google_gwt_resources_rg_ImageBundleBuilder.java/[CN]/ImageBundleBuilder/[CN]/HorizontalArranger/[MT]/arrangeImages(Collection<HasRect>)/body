{
  int height=1;
  int width=0;
  for (  HasRect rect : rects) {
    rect.setPosition(width,0);
    width+=rect.getWidth();
    height=lcm(height,rect.getHeight());
  }
  List<HasRect> toAdd=new ArrayList<HasRect>();
  for (  HasRect rect : rects) {
    int y=rect.getHeight();
    while (y < height) {
      ImageRect newRect=new ImageRect(rect);
      newRect.setPosition(rect.getLeft(),y);
      y+=rect.getHeight();
      toAdd.add(newRect);
    }
  }
  rects.addAll(toAdd);
  return new Size(width,height);
}
