{
  if (imageNameToImageRectMap.isEmpty()) {
    return null;
  }
  BufferedImage bundledImage=drawBundledImage(arranger);
  byte[] imageBytes;
  try {
    ByteArrayOutputStream byteOutputStream=new ByteArrayOutputStream();
    ImageIO.write(bundledImage,BUNDLE_FILE_TYPE,byteOutputStream);
    imageBytes=byteOutputStream.toByteArray();
  }
 catch (  IOException e) {
    logger.log(TreeLogger.ERROR,"Unable to generate file name for image bundle file",null);
    throw new UnableToCompleteException();
  }
  String bundleFileName=context.deploy(context.getClientBundleType().getQualifiedSourceName() + ".cache." + BUNDLE_FILE_TYPE,BUNDLE_MIME_TYPE,imageBytes,false);
  return bundleFileName;
}
