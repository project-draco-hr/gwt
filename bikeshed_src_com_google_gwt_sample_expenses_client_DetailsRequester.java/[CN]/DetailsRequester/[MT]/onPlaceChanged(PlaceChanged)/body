{
  if (!(event.getNewPlace() instanceof EntityDetailsPlace)) {
    return;
  }
  EntityDetailsPlace newPlace=(EntityDetailsPlace)event.getNewPlace();
  final Values<? extends ExpensesEntityKey<?>> entity=newPlace.getEntity();
  ExpensesEntityKey<?> key=entity.getEntityKey();
  final String title=new StringBuilder("<h1>").append(entityNamer.render(key)).append("</h1>").toString();
  final StringBuilder list=new StringBuilder();
  key.accept(new ExpensesEntityVisitor(){
    @SuppressWarnings("unchecked") public void visit(    EmployeeKey employeeKey){
      Values<EmployeeKey> eValues=(Values<EmployeeKey>)entity;
      String user=eValues.get(EmployeeKey.get().getUserName());
      list.append("<div>");
      list.append("<label>").append("User Name: ").append("</label>");
      list.append("<span>").append(user).append("</span>");
      list.append("</div>");
      list.append("<div>");
      String display=eValues.get(EmployeeKey.get().getDisplayName());
      list.append("<label>").append("Display Name: ").append("</label>");
      list.append("<span>").append(display).append("</span>");
      list.append("</div>");
    }
    @SuppressWarnings("unchecked") public void visit(    ReportKey reportKey){
      Values<ReportKey> rValues=(Values<ReportKey>)entity;
      String purpose=rValues.get(ReportKey.get().getPurpose());
      list.append("<div>");
      list.append("<label>").append("Purpose: ").append("</label>");
      list.append("<span>").append(purpose).append("</span>");
      list.append("</div>");
      list.append("<div>");
      String created=rValues.get(ReportKey.get().getCreated()).toString();
      list.append("<label>").append("Created: ").append("</label>");
      list.append("<span>").append(created).append("</span>");
      list.append("</div>");
    }
  }
);
  detailsView.setHTML(title + list.toString());
  if (detailsView.getParent() == null) {
    panel.clear();
    panel.add(detailsView);
  }
}
