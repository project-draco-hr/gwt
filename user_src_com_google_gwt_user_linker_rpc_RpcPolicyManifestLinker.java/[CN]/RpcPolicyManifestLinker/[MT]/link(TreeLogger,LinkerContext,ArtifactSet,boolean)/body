{
  if (onePermutation) {
    return artifacts;
  }
 else {
    for (    EmittedArtifact art : artifacts.find(EmittedArtifact.class)) {
      if (art.getPartialPath().startsWith(ProxyCreator.MANIFEST_ARTIFACT_DIR)) {
        readOneManifest(logger,art.getContents(logger));
      }
    }
    ArtifactSet toReturn=new ArtifactSet(artifacts);
    SyntheticArtifact manifestArt=emitString(logger,generateManifest(context),MANIFEST_TXT);
    manifestArt.setVisibility(Visibility.LegacyDeploy);
    toReturn.add(manifestArt);
    return toReturn;
  }
}
