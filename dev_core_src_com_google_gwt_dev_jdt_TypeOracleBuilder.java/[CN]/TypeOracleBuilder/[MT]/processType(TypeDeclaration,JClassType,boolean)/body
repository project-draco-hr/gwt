{
  TypeOracle oracle=cacheManager.getTypeOracle();
  SourceTypeBinding binding=typeDecl.binding;
  if (binding.constantPoolName() == null) {
    return;
  }
  String qname=getQualifiedName(binding);
  String className;
  if (binding instanceof LocalTypeBinding) {
    className=qname.substring(qname.lastIndexOf('.') + 1);
  }
 else {
    className=getSimpleName(typeDecl);
  }
  if (oracle.findType(qname) != null) {
    return;
  }
  String jpkgName=getPackage(typeDecl);
  JPackage pkg=oracle.getOrCreatePackage(jpkgName);
  final boolean jclassIsIntf=isInterface(typeDecl);
  boolean jclassIsAnnonation=isAnnotation(typeDecl);
  CompilationUnitProvider cup=getCup(typeDecl);
  int declStart=typeDecl.declarationSourceStart;
  int declEnd=typeDecl.declarationSourceEnd;
  int bodyStart=typeDecl.bodyStart;
  int bodyEnd=typeDecl.bodyEnd;
  JRealClassType jrealClassType;
  if (jclassIsAnnonation) {
    jrealClassType=new JAnnotationType(oracle,cup,pkg,jenclosingType,isLocalType,className,declStart,declEnd,bodyStart,bodyEnd,jclassIsIntf);
  }
 else   if (maybeGeneric(typeDecl,jenclosingType)) {
    JTypeParameter[] jtypeParameters=declareTypeParameters(typeDecl.typeParameters);
    JGenericType jgenericType=new JGenericType(oracle,cup,pkg,jenclosingType,isLocalType,className,declStart,declEnd,bodyStart,bodyEnd,jclassIsIntf,jtypeParameters);
    jrealClassType=jgenericType;
  }
 else   if (binding.isEnum()) {
    jrealClassType=new JEnumType(oracle,cup,pkg,jenclosingType,isLocalType,className,declStart,declEnd,bodyStart,bodyEnd,jclassIsIntf);
  }
 else {
    jrealClassType=new JRealClassType(oracle,cup,pkg,jenclosingType,isLocalType,className,declStart,declEnd,bodyStart,bodyEnd,jclassIsIntf);
  }
  cacheManager.setTypeForBinding(binding,jrealClassType);
}
