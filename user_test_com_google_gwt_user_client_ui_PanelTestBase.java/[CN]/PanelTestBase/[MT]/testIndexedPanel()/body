{
  T panel=createPanel();
  if (!(panel instanceof IndexedPanel)) {
    return;
  }
  assertTrue("Expect all IndexedPanels to implement ForIsWidget",panel instanceof IndexedPanel.ForIsWidget);
  IndexedPanel.ForIsWidget w=(IndexedPanel.ForIsWidget)panel;
  IsWidgetImpl l1=new IsWidgetImpl(new Label("l1"));
  IsWidgetImpl l2=new IsWidgetImpl(new Label("l2"));
  IsWidgetImpl l3=new IsWidgetImpl(new Label("l3"));
  IsWidgetImpl l4=new IsWidgetImpl(new Label("l4"));
  panel.add(l1);
  panel.add(l2);
  panel.add(l3);
  panel.add(l4);
  assertEquals(4,w.getWidgetCount());
  assertEquals(0,w.getWidgetIndex(l1.w));
  assertEquals(0,w.getWidgetIndex(l1));
  assertEquals(1,w.getWidgetIndex(l2));
  assertEquals(2,w.getWidgetIndex(l3));
  assertEquals(3,w.getWidgetIndex(l4));
  assertTrue(w.remove(2));
  assertEquals(3,w.getWidgetCount());
  assertEquals(0,w.getWidgetIndex(l1.w));
  assertEquals(0,w.getWidgetIndex(l1));
  assertEquals(1,w.getWidgetIndex(l2));
  assertEquals(-1,w.getWidgetIndex(l3));
  assertEquals(2,w.getWidgetIndex(l4));
  assertTrue(w.remove(2));
  assertEquals(2,w.getWidgetCount());
  assertEquals(0,w.getWidgetIndex(l1.w));
  assertEquals(0,w.getWidgetIndex(l1));
  assertEquals(1,w.getWidgetIndex(l2));
  assertEquals(-1,w.getWidgetIndex(l3));
  assertEquals(-1,w.getWidgetIndex(l4));
  assertTrue(w.remove(0));
  assertEquals(1,w.getWidgetCount());
  assertEquals(-1,w.getWidgetIndex(l1.w));
  assertEquals(-1,w.getWidgetIndex(l1));
  assertEquals(0,w.getWidgetIndex(l2));
  assertEquals(-1,w.getWidgetIndex(l3));
  assertEquals(-1,w.getWidgetIndex(l4));
  assertTrue(w.remove(0));
  assertEquals(0,w.getWidgetCount());
  assertFalse(panel.iterator().hasNext());
}
