{
  if (url.getProtocol().equals("file")) {
    File f=new File(url.toURI());
    String lowerCaseFileName=f.getName().toLowerCase();
    if (f.isDirectory()) {
      return new DirectoryClassPathEntry(f);
    }
 else     if (f.isFile() && lowerCaseFileName.endsWith(".jar")) {
      return new ZipFileClassPathEntry(new JarFile(f));
    }
 else     if (f.isFile() && lowerCaseFileName.endsWith(".zip")) {
      return new ZipFileClassPathEntry(new ZipFile(f));
    }
 else {
      try {
        return new ZipFileClassPathEntry(new JarFile(f));
      }
 catch (      Exception ignored) {
      }
      try {
        return new ZipFileClassPathEntry(new ZipFile(f));
      }
 catch (      Exception ignored) {
      }
      logger.log(TreeLogger.TRACE,"Unexpected entry in classpath; " + f + " is neither a directory nor an archive (.jar or .zip)");
      return null;
    }
  }
 else {
    logger.log(TreeLogger.WARN,"Unknown URL type for " + url,null);
    return null;
  }
}
