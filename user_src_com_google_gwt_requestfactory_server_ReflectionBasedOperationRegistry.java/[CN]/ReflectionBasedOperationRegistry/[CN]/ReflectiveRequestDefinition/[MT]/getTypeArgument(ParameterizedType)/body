{
  Type[] params=type.getActualTypeArguments();
  Type toExamine;
  if (params.length == 1) {
    toExamine=params[0];
  }
 else   if (InstanceRequest.class.equals(type.getRawType())) {
    toExamine=params[1];
  }
 else {
    return null;
  }
  if (toExamine instanceof ParameterizedType) {
    return getTypeArgument((ParameterizedType)toExamine);
  }
  return (Class<Object>)toExamine;
}
