{
  LogData.Builder logBuilder=LogData.newBuilder().setSummary(msg);
  logBuilder=logBuilder.setLevel(type.getLabel());
  if (caught != null) {
    logBuilder=logBuilder.setDetails(AbstractTreeLogger.getStackTraceAsString(caught));
  }
  if (helpInfo != null) {
    LogData.HelpInfo.Builder helpInfoBuilder=LogData.HelpInfo.newBuilder();
    if (helpInfo.getURL() != null) {
      helpInfoBuilder=helpInfoBuilder.setUrl(helpInfo.getURL().toExternalForm());
    }
    if (helpInfo.getAnchorText() != null) {
      helpInfoBuilder.setText(helpInfo.getAnchorText());
    }
    logBuilder=logBuilder.setHelpInfo(helpInfoBuilder);
  }
  return logBuilder;
}
