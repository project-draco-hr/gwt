{
  GWT.setUncaughtExceptionHandler(new GWT.UncaughtExceptionHandler(){
    public void onUncaughtException(    Throwable e){
      log.log(Level.SEVERE,e.getMessage(),e);
    }
  }
);
  final ExpenseTree expenseTree=shell.getExpenseTree();
  final ExpenseReportList expenseList=shell.getExpenseList();
  final ExpenseReportDetails expenseDetails=shell.getExpenseDetails();
  expenseDetails.getReportsLink().addClickHandler(new ClickHandler(){
    public void onClick(    ClickEvent event){
      placeController.goTo(expenseDetails.getReportListPlace());
    }
  }
);
  new ReloadOnAuthenticationFailure().register(eventBus);
  expenseTree.setListener(new ExpenseTree.Listener(){
    public void onSelection(    String department,    EntityProxyId<EmployeeProxy> employee){
      lastEmployee=employee;
      lastDepartment=department;
      placeController.goTo(new ReportListPlace(employee,department));
    }
  }
);
  expenseList.setListener(new ExpenseReportList.Listener(){
    public void onReportSelected(    ReportProxy report){
      placeController.goTo(new ReportPlace(new ReportListPlace(lastEmployee,lastDepartment),report.stableId()));
    }
  }
);
  activityManager.setDisplay(shell.getPanel());
  placeHistoryHandler.register(placeController,eventBus,ReportListPlace.ALL);
  placeHistoryHandler.handleCurrentHistory();
  root.add(shell);
}
