{
  if (beforeIndex < 0 || beforeIndex > allItems.size()) {
    throw new IndexOutOfBoundsException();
  }
  allItems.add(beforeIndex,item);
  int itemsIndex=0;
  for (int i=0; i < beforeIndex; i++) {
    if (allItems.get(i) instanceof MenuItem) {
      itemsIndex++;
    }
  }
  items.add(itemsIndex,item);
  addItemElement(beforeIndex,item.getElement());
  item.setParentMenu(this);
  item.setSelectionStyle(false);
  updateSubmenuIcon(item);
  return item;
}
