{
  super.onBrowserEvent(event);
  MenuItem item=findItem(DOM.eventGetTarget(event));
switch (DOM.eventGetType(event)) {
case Event.ONCLICK:
{
      FocusPanel.impl.focus(getElement());
      if (item != null) {
        doItemAction(item,true);
      }
      break;
    }
case Event.ONMOUSEOVER:
{
    if (item != null) {
      itemOver(item);
    }
    break;
  }
case Event.ONMOUSEOUT:
{
  if (item != null) {
    itemOver(null);
  }
  break;
}
case Event.ONFOCUS:
{
selectFirstItemIfNoneSelected();
break;
}
case Event.ONKEYDOWN:
{
int keyCode=DOM.eventGetKeyCode(event);
switch (keyCode) {
case KeyboardListener.KEY_LEFT:
moveLeft();
break;
case KeyboardListener.KEY_RIGHT:
moveRight();
break;
case KeyboardListener.KEY_UP:
moveUp();
break;
case KeyboardListener.KEY_DOWN:
moveDown();
break;
case KeyboardListener.KEY_ESCAPE:
closeAllParents();
break;
case KeyboardListener.KEY_ENTER:
if (!selectFirstItemIfNoneSelected()) {
doItemAction(selectedItem,true);
}
break;
}
break;
}
}
}
