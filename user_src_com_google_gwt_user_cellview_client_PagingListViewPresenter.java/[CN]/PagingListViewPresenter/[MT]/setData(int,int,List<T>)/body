{
  int valuesLength=values.size();
  int valuesEnd=start + valuesLength;
  int pageEnd=pageStart + pageSize;
  int boundedStart=Math.max(start,pageStart);
  int boundedEnd=Math.min(valuesEnd,pageEnd);
  if (boundedStart >= boundedEnd) {
    return;
  }
  if (valuesEnd > dataSize) {
    dataSize=valuesEnd;
    onSizeChanged();
  }
  int cacheOffset=Math.max(0,boundedStart - pageStart - data.size());
  for (int i=0; i < cacheOffset; i++) {
    data.add(null);
  }
  for (int i=boundedStart; i < boundedEnd; i++) {
    T value=values.get(i - start);
    int dataIndex=i - pageStart;
    if (dataIndex < data.size()) {
      data.set(dataIndex,value);
    }
 else {
      data.add(value);
    }
    if (selectionModel != null) {
      if (value != null && selectionModel.isSelected(value)) {
        selectedRows.add(i);
      }
 else {
        selectedRows.remove(i);
      }
    }
  }
  boundedStart=pageStartChangedSinceRender ? pageStart : boundedStart;
  boundedStart-=cacheOffset;
  List<T> boundedValues=data.subList(boundedStart - pageStart,boundedEnd - pageStart);
  int boundedSize=boundedValues.size();
  StringBuilder sb=new StringBuilder();
  view.render(sb,boundedValues,boundedStart,selectionModel);
  updateLoadingState();
  int childCount=view.getChildCount();
  if (boundedStart == pageStart && (boundedSize >= childCount || boundedSize >= getCurrentPageSize())) {
    String newContents=sb.toString();
    if (!newContents.equals(lastContents)) {
      lastContents=newContents;
      view.replaceAllChildren(boundedValues,newContents);
    }
  }
 else {
    lastContents=null;
    view.replaceChildren(boundedValues,boundedStart - pageStart,sb.toString());
  }
  view.resetFocus();
  pageStartChangedSinceRender=false;
}
