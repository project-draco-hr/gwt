{
  final ListViewAdapter<String> adapter=new ListViewAdapter<String>();
  final CellTable<String> table=new CellTable<String>();
  adapter.addView(table);
  final SelectionModel<String> selectionModel=new MultiSelectionModel<String>();
  table.setSelectionModel(selectionModel);
  for (int i=0; i < 25; ++i) {
    adapter.getList().add("Item " + i);
  }
  Column<String,Boolean> checkboxCol=new Column<String,Boolean>(new CheckboxCell()){
    @Override public boolean dependsOnSelection(){
      return true;
    }
    @Override public Boolean getValue(    String object){
      return selectionModel.isSelected(object);
    }
  }
;
  table.addColumn(checkboxCol);
  checkboxCol.setFieldUpdater(new FieldUpdater<String,Boolean>(){
    public void update(    int index,    String object,    Boolean value){
      selectionModel.setSelected(object,value);
    }
  }
);
  table.addColumn(new IdentityColumn<String>(new TextCell()),"TextCell","TextCell");
  Column<String,String> buttonCol=new Column<String,String>(new ButtonCell()){
    @Override public boolean dependsOnSelection(){
      return true;
    }
    @Override public String getValue(    String object){
      if (selectionModel.isSelected(object)) {
        return "Unselect";
      }
 else {
        return "Select";
      }
    }
  }
;
  buttonCol.setFieldUpdater(new FieldUpdater<String,String>(){
    public void update(    int index,    String object,    String value){
      selectionModel.setSelected(object,!selectionModel.isSelected(object));
      Window.alert("You clicked: " + object);
    }
  }
);
  table.addColumn(buttonCol,"ButtonCell","ButtonCell");
  SimplePager<String> pager=new SimplePager<String>(table);
  Button addBtn=new Button("Add Data Row",new ClickHandler(){
    public void onClick(    ClickEvent event){
      List<String> list=adapter.getList();
      list.add("item " + list.size());
    }
  }
);
  Button removeBtn=new Button("Remove Data Row",new ClickHandler(){
    public void onClick(    ClickEvent event){
      int size=adapter.getList().size();
      if (size > 0) {
        adapter.getList().remove(size - 1);
      }
    }
  }
);
  FlowPanel fp=new FlowPanel();
  fp.add(table);
  fp.add(pager);
  fp.add(addBtn);
  fp.add(removeBtn);
  return fp;
}
