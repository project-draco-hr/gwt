{
  getStorageEventHandlers().add(handler);
  if (storageEventHandlers.size() == 1) {
    addStorageEventHandler0();
  }
  final Disposable disposeHandler=new Disposable(){
    @Override public void dispose(){
      StorageImpl.this.removeStorageEventHandler(handler);
    }
  }
;
  Impl.scheduleDispose(disposeHandler);
  return new HandlerRegistration(){
    public void removeHandler(){
      Impl.dispose(disposeHandler);
    }
  }
;
}
