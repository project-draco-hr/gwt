{
  HashMap map=new HashMap();
  int pos=url.indexOf("?");
  while (pos >= 0) {
    url=url.substring(pos + 1);
    pos=url.indexOf("?");
    int posAlt=url.indexOf("&");
    if (pos < 0 || (posAlt >= 0 && posAlt < pos)) {
      pos=posAlt;
    }
    String param;
    if (pos >= 0) {
      param=url.substring(0,pos);
    }
 else {
      param=url;
    }
    int equals=param.indexOf("=");
    String value=null;
    if (equals >= 0) {
      value=param.substring(equals + 1);
      param=param.substring(0,equals);
    }
    map.put(param,value);
  }
  return map;
}
