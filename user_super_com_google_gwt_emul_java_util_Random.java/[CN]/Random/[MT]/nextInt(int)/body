{
  checkCriticalArgument(n > 0);
  if ((n & -n) == n) {
    return (int)((n * nextInternal(31)) * twoToTheMinus31);
  }
  double bits, val;
  do {
    bits=nextInternal(31);
    val=bits % n;
  }
 while (bits - val + (n - 1) < 0);
  return (int)val;
}
