{
  srcWriter.println("public static void runAsync(RunAsyncCallback callback) {");
  srcWriter.println(getCallbackListSimpleName() + " newCallback = new " + getCallbackListSimpleName()+ "();");
  srcWriter.println("newCallback.callback = callback;");
  srcWriter.println("if (callbacksTail != null) {");
  srcWriter.println("  callbacksTail.next = newCallback;");
  srcWriter.println("}");
  srcWriter.println("callbacksTail = newCallback;");
  srcWriter.println("if (callbacksHead == null) {");
  srcWriter.println("  callbacksHead = newCallback;");
  srcWriter.println("}");
  srcWriter.println("if (loaded) {");
  srcWriter.println("instance.runCallbacks();");
  srcWriter.println("return;");
  srcWriter.println("}");
  srcWriter.println("if (!loading) {");
  srcWriter.println("loading = true;");
  srcWriter.println("AsyncFragmentLoader.inject(" + entryNumber + ",");
  srcWriter.println("  new AsyncFragmentLoader.LoadErrorHandler() {");
  srcWriter.println("    public void loadFailed(Throwable reason) {");
  srcWriter.println("      loading = false;");
  srcWriter.println("      runCallbackOnFailures(reason);");
  srcWriter.println("    }");
  srcWriter.println("  });");
  srcWriter.println("}");
  srcWriter.println("}");
}
