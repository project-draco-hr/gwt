{
  if ("favicon.ico".equalsIgnoreCase(parts.moduleName)) {
    sendErrorResponse(response,HttpServletResponse.SC_NOT_FOUND,"Icon not available");
    return;
  }
  String msg="The development shell servlet received a request to generate a host page for module '" + parts.moduleName + "' ";
  logger=logger.branch(TreeLogger.TRACE,msg,null);
  try {
    getModuleDef(logger,parts.moduleName);
  }
 catch (  UnableToCompleteException e) {
    sendErrorResponse(response,HttpServletResponse.SC_NOT_FOUND,"Unable to find/load module '" + parts.moduleName + "' (see server log for details)");
    return;
  }
  response.setContentType("text/html");
  PrintWriter writer=response.getWriter();
  writer.println("<html><head>");
  writer.print("<script language='javascript' src='");
  writer.print(parts.moduleName);
  writer.println(".nocache.js'></script>");
  Map params=request.getParameterMap();
  for (Iterator iter=params.entrySet().iterator(); iter.hasNext(); ) {
    Map.Entry entry=(Map.Entry)iter.next();
    String[] values=(String[])entry.getValue();
    if (values.length > 0) {
      writer.print("<meta name='gwt:property' content='");
      writer.print(entry.getKey());
      writer.print("=");
      writer.print(values[values.length - 1]);
      writer.println("'>");
    }
  }
  writer.println("</head><body>");
  writer.println("<iframe src=\"javascript:''\" id='__gwt_historyFrame' " + "style='width:0;height:0;border:0'></iframe>");
  writer.println("</body></html>");
}
