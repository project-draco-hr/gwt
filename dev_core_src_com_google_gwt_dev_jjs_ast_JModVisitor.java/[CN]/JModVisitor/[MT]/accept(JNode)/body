{
  NodeContext ctx=new NodeContext();
  try {
    ctx.node=node;
    node.traverse(this,ctx);
    didChange|=ctx.didChange;
    return ctx.node;
  }
 catch (  Throwable e) {
    throw translateException(node,e);
  }
}
