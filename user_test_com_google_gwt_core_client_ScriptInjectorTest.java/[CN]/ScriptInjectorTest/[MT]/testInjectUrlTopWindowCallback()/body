{
  delayTestFinish(TEST_DELAY);
  final String scriptUrl="script_injector_test7.js";
  assertFalse(nativeTest7Worked());
  JavaScriptObject injectedElement=ScriptInjector.fromUrl(scriptUrl).setRemoveTag(false).setWindow(ScriptInjector.TOP_WINDOW).setCallback(new Callback<Void,Exception>(){
    @Override public void onFailure(    Exception reason){
      assertNotNull(reason);
      fail("Injection failed: " + reason.toString());
    }
    @Override public void onSuccess(    Void result){
      boolean worked=nativeTest7Worked();
      JavaScriptObject scriptElement=findScriptUrlInTopWindow(scriptUrl);
      if (!isIE()) {
        cleanupTopWindow("__ti7_var__",scriptElement);
        assertFalse("cleanup failed",nativeTest7Worked());
      }
      assertTrue("__ti7_var not set in top window",worked);
      assertNotNull("script element 7 not found",scriptElement);
      finishTest();
    }
  }
).inject();
  assertNotNull(injectedElement);
}
