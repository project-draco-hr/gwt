{
  String query=request.getSearchQuery();
  if (query == null | query.length() == 0) {
    query=".*";
  }
  Range searchRange=request.getSearchRange();
  Range favoritesRange=request.getFavoritesRange();
  Result searchResults=query(query,searchRange);
  Result favorites=query(favoritesQuery,favoritesRange);
  return new StockResponse(searchResults.quotes,favorites.quotes,searchResults.numRows,favorites.numRows);
}
