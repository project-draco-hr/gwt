{
  checkDevice();
  boolean events=false;
  events|=runSettings();
  events|=runTimers();
  events|=runEnterExit();
  events|=runPopups();
  events|=runGrabs();
  int[] outEvent=new int[1];
  int status=OS.ReceiveNextEvent(0,null,OS.kEventDurationNoWait,true,outEvent);
  if (status == OS.noErr) {
    events=true;
    int eventClass=OS.GetEventClass(outEvent[0]);
    int eventKind=OS.GetEventKind(outEvent[0]);
    OS.SendEventToEventTarget(outEvent[0],OS.GetEventDispatcherTarget());
    OS.ReleaseEvent(outEvent[0]);
    if (focusCombo != null && !focusCombo.isDisposed()) {
      focusCombo.checkSelection();
    }
    if (eventClass == WAKE_CLASS && eventKind == WAKE_KIND) {
      runAsyncMessages(false);
    }
  }
  events|=runPaint();
  if (events) {
    runDeferredEvents();
    return true;
  }
  return runAsyncMessages(false);
}
