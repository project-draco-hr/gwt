{
  if (!needsPaint)   return false;
  needsPaint=false;
  for (int i=0; i < widgetTable.length; i++) {
    Widget widget=widgetTable[i];
    if (widget != null && widget instanceof Shell) {
      Shell shell=(Shell)widget;
      if (shell.invalRgn != 0) {
        int invalRgn=shell.invalRgn;
        shell.invalRgn=0;
        shell.redrawChildren(OS.HIViewGetRoot(shell.shellHandle),invalRgn);
        OS.DisposeRgn(invalRgn);
      }
    }
  }
  return true;
}
