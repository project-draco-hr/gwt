{
  char Cr='\r';
  char Lf='\n';
  int length=text.length();
  if (length == 0)   return text;
  int i=text.indexOf(Lf,0);
  if (i == -1 || i == 0)   return text;
  if (text.charAt(i - 1) != Cr)   return text;
  i=0;
  StringBuffer result=new StringBuffer();
  while (i < length) {
    int j=text.indexOf(Cr,i);
    if (j == -1)     j=length;
    String s=text.substring(i,j);
    result.append(s);
    i=j + 2;
    result.append(Lf);
  }
  return result.toString();
}
