{
  int id=find(obj);
  if (id >= 0) {
    return id;
  }
  if (nextFree >= 0) {
    id=nextFree;
    nextFree=((Tombstone)objects.get(id)).nextFree;
  }
 else {
    id=nextId++;
  }
  objects.put(id,obj);
  refMap.put(obj,id);
  return id;
}
