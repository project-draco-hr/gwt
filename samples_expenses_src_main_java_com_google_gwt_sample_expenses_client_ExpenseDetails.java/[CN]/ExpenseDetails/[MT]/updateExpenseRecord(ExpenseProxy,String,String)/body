{
  if (Expenses.Approval.APPROVED.is(approval) && !Expenses.Approval.APPROVED.is(record.getApproval())) {
    double amount=record.getAmount();
    if (amount + totalApproved > MAX_COST) {
      syncCommit(record,"The total approved amount for an expense report cannot exceed $" + MAX_COST + ".");
      return;
    }
  }
  Request<Void> editRequest=expensesRequestFactory.expenseRequest().persist(record);
  ExpenseProxy editableRecord=editRequest.edit(record);
  editableRecord.setApproval(approval);
  editableRecord.setReasonDenied(reasonDenied);
  editRequest.fire(new Receiver<Void>(){
    @Override public void onSuccess(    Void ignore){
    }
  }
);
}
