{
  AsyncCreateVisitor visitor=new AsyncCreateVisitor();
  visitor.accept(program);
  setNumEntriesInAsyncFragmentLoader(visitor.entryCount);
  program.setRunAsyncReplacements(runAsyncReplacements);
  new ReplaceRunAsyncResources().accept(program);
  if (errorsFound) {
    throw new UnableToCompleteException();
  }
}
