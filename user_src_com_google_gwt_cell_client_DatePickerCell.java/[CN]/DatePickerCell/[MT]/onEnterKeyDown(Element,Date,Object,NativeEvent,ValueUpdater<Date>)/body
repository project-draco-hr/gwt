{
  this.lastKey=key;
  this.lastParent=parent;
  this.lastValue=value;
  this.valueUpdater=valueUpdater;
  Date viewData=getViewData(key);
  Date date=(viewData == null) ? value : viewData;
  datePicker.setCurrentMonth(date);
  datePicker.setValue(date);
  panel.setPopupPositionAndShow(new PositionCallback(){
    public void setPosition(    int offsetWidth,    int offsetHeight){
      panel.setPopupPosition(parent.getAbsoluteLeft() + offsetX,parent.getAbsoluteTop() + offsetY);
    }
  }
);
}
