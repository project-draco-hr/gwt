{
  if ((beforeIndex < 0) || (beforeIndex > getWidgetCount())) {
    throw new IndexOutOfBoundsException();
  }
  int idx=getWidgetIndex(w);
  if (idx == -1) {
    w.removeFromParent();
  }
 else {
    remove(w);
    if (idx < beforeIndex) {
      beforeIndex--;
    }
  }
  adopt(w,container);
  getChildren().insert(w,beforeIndex);
  return beforeIndex;
}
