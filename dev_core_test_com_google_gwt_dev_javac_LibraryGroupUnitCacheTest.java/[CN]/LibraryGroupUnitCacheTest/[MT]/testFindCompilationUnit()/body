{
  String fooResourcePath=LibraryGroupUnitCache.typeSourceNameToResourcePath(fooCompilationUnit.getTypeName());
  List<MockLibrary> libraries=MockLibrary.createRandomLibraryGraph(4,1);
  libraries.get(0).addCompilationUnit(fooCompilationUnit);
  libraries.get(0).addSuperSourceCompilationUnit(barCompilationUnit);
  libraries.get(3).addCompilationUnit(bazCompilationUnit);
  LibraryGroupUnitCache libraryGroupUnitCache=new LibraryGroupUnitCache(LibraryGroup.fromLibraries(libraries,true));
  assertEquals(fooCompilationUnit,libraryGroupUnitCache.find(fooResourcePath));
  assertEquals(barCompilationUnit,libraryGroupUnitCache.find(new ContentId(barCompilationUnit.getTypeName(),"someHash")));
}
