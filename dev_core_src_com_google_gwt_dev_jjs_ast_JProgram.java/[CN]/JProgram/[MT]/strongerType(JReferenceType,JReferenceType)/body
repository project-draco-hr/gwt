{
  if (type1 == type2) {
    return type1;
  }
  if (type1 instanceof JNullType || type2 instanceof JNullType) {
    return JNullType.INSTANCE;
  }
  if (type1 instanceof JNonNullType != type2 instanceof JNonNullType) {
    return strongerType(getNonNullType(type1),getNonNullType(type2));
  }
  if (typeOracle.canTriviallyCast(type1,type2)) {
    return type1;
  }
  if (typeOracle.canTriviallyCast(type2,type1)) {
    return type2;
  }
  return type1;
}
