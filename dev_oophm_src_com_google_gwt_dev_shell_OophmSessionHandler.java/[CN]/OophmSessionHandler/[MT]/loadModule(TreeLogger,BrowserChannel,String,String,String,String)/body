{
  try {
    BrowserChannelServer serverChannel=(BrowserChannelServer)channel;
    ModuleSpaceHost msh=host.createModuleSpaceHost(logger,moduleName,userAgent,url,sessionKey,channel.getRemoteEndpoint());
    this.logger=logger=msh.getLogger();
    ModuleSpace moduleSpace=new ModuleSpaceOOPHM(msh,moduleName,serverChannel);
    moduleMap.put(serverChannel,moduleSpace);
    moduleSpace.onLoad(logger);
  }
 catch (  Throwable e) {
    logger.log(TreeLogger.ERROR,"Failed to load module '" + moduleName + "' from user agent '"+ userAgent+ "' at "+ channel.getRemoteEndpoint(),e);
  }
  return logger;
}
