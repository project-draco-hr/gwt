{
  HasData<String> listView=new MockHasData<String>();
  final MockView<String> view=new MockView<String>();
  final HasDataPresenter<String> presenter=new HasDataPresenter<String>(listView,view,10,null);
  populatePresenter(presenter);
  assertTrue(presenter.hasPendingState());
  view.assertReplaceChildrenNotCalled();
  delayTestFinish(5000);
  Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand(){
    @Override public void execute(){
      assertFalse(presenter.hasPendingState());
      view.assertReplaceAllChildrenCalled(10);
      finishTest();
    }
  }
);
}
