{
  try {
    String localeName=propertyOracle.getPropertyValue(logger,PROP_LOCALE);
    GwtLocale newCompileLocale=factory.fromString(localeName);
    if (newCompileLocale.equals(compileLocale)) {
      return;
    }
    compileLocale=newCompileLocale;
    allLocales.clear();
    allCompileLocales.clear();
    runtimeLocales.clear();
    String[] localeValues=propertyOracle.getPropertyValueSet(logger,PROP_LOCALE);
    String rtLocaleNames=propertyOracle.getPropertyValue(logger,PROP_RUNTIME_LOCALES);
    for (    String localeValue : localeValues) {
      allCompileLocales.add(factory.fromString(localeValue));
    }
    allLocales.addAll(allCompileLocales);
    if (rtLocaleNames != null && rtLocaleNames.length() > 0) {
      String[] rtLocales=rtLocaleNames.split(",");
      for (      String rtLocale : rtLocales) {
        GwtLocale locale=factory.fromString(rtLocale);
        existingLocales:         for (        GwtLocale existing : allCompileLocales) {
          for (          GwtLocale alias : existing.getAliases()) {
            if (!alias.isDefault() && locale.inheritsFrom(alias) && locale.usesSameScript(alias)) {
              allLocales.add(locale);
              break existingLocales;
            }
          }
        }
        if (!compileLocale.isDefault() && locale.inheritsFrom(compileLocale) && locale.usesSameScript(compileLocale)) {
          runtimeLocales.add(locale);
        }
      }
    }
  }
 catch (  BadPropertyValueException e) {
    logger.log(TreeLogger.TRACE,"Unable to get locale properties, using defaults",e);
    compileLocale=factory.fromString("default");
    allLocales.add(compileLocale);
    return;
  }
}
