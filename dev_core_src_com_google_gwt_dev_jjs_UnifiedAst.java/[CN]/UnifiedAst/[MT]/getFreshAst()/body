{
synchronized (myLockObject) {
    if (initialAst != null) {
      if (!singlePermutation && serializedAst == null) {
        serializeAst();
      }
      AST result=initialAst;
      initialAst=null;
      return result;
    }
 else {
      if (serializedAst == null) {
        throw new IllegalStateException("No serialized AST was cached.");
      }
      return deserializeAst();
    }
  }
}
