{
  try {
    PerfLogger.start("serialize");
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ObjectOutputStream os=new ObjectOutputStream(baos);
    os.writeObject(ast.getJProgram());
    os.writeObject(ast.getJsProgram());
    os.close();
    return baos.toByteArray();
  }
 catch (  IOException e) {
    throw new RuntimeException("Should be impossible for memory based streams",e);
  }
 finally {
    PerfLogger.end();
  }
}
