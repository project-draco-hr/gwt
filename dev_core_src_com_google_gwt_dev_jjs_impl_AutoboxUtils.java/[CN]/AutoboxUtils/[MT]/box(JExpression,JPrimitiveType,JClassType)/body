{
  if (toBox.getType() != primitiveType) {
    toBox=new JCastOperation(program,toBox.getSourceInfo(),primitiveType,toBox);
  }
  JMethod valueOfMethod=null;
  for (  JMethod method : wrapperType.methods) {
    if ("valueOf".equals(method.getName())) {
      if (method.params.size() == 1) {
        JParameter param=method.params.get(0);
        if (param.getType() == primitiveType) {
          valueOfMethod=method;
          break;
        }
      }
    }
  }
  if (valueOfMethod == null || !valueOfMethod.isStatic() || valueOfMethod.getType() != wrapperType) {
    throw new InternalCompilerException(toBox,"Expected to find a method on '" + wrapperType.getName() + "' whose signature matches 'public static "+ wrapperType.getName()+ " valueOf("+ primitiveType.getName()+ ")'",null);
  }
  JMethodCall call=new JMethodCall(program,toBox.getSourceInfo(),null,valueOfMethod);
  call.getArgs().add(toBox);
  return call;
}
