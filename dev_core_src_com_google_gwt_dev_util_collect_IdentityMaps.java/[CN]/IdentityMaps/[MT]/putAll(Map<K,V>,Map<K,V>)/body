{
switch (toAdd.size()) {
case 0:
    return map;
case 1:
{
    K key=toAdd.keySet().iterator().next();
    return put(map,key,toAdd.get(key));
  }
default :
switch (map.size()) {
case 0:
  return new IdentityHashMap<K,V>(toAdd);
case 1:
{
  IdentityHashMap<K,V> result=new IdentityHashMap<K,V>();
  K key=map.keySet().iterator().next();
  result.put(key,map.get(key));
  result.putAll(toAdd);
  return result;
}
default :
map.putAll(toAdd);
return map;
}
}
}
