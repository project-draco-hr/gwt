{
  ExpectedFailure annotation=getExpectedFailureAnnotation(test);
  if (annotation != null) {
    t=normalizeGwtTestException(t);
    return annotation.withType().isAssignableFrom(t.getClass()) && getExceptionMessage(t).contains(annotation.withMessage());
  }
  return false;
}
