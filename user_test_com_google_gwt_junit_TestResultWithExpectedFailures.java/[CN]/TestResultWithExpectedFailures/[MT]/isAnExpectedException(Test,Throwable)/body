{
  ExpectedFailure annotation=getExpectedFailureAnnotation(test);
  if (annotation != null) {
    t=normalizeGwtTestException(t);
    return t.getClass().isAssignableFrom(annotation.withType()) && getExceptionMessage(t).contains(annotation.withMessage());
  }
  return false;
}
