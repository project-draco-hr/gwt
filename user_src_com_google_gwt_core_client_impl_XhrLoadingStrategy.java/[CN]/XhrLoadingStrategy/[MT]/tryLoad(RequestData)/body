{
  final MockableXMLHttpRequest xhr=createXhr();
  xhr.open(HTTP_GET,request.url);
  if (request.retryCount > 0) {
    xhr.setRequestHeader("Cache-Control","no-cache");
  }
  xhr.setOnReadyStateChange(new ReadyStateChangeHandler(){
    public void onReadyStateChange(    XMLHttpRequest ignored){
      if (xhr.getReadyState() == XMLHttpRequest.DONE) {
        xhr.clearOnReadyStateChange();
        if ((xhr.getStatus() == HTTP_STATUS_OK || xhr.getStatus() == HTTP_STATUS_NON_HTTP) && xhr.getResponseText() != null && xhr.getResponseText().length() != 0) {
          try {
            gwtInstallCode(xhr.getResponseText());
          }
 catch (          RuntimeException e) {
            String textIntro=xhr.getResponseText();
            if (textIntro != null && textIntro.length() > MAX_LOG_LENGTH) {
              textIntro=textIntro.substring(0,MAX_LOG_LENGTH) + "...";
            }
            onLoadError(request,new HttpInstallFailure(request.url,textIntro,e),false);
          }
        }
 else {
          onLoadError(request,new HttpDownloadFailure(request.url,xhr.getStatus(),xhr.getStatusText()),true);
        }
      }
    }
  }
);
  xhr.send();
}
