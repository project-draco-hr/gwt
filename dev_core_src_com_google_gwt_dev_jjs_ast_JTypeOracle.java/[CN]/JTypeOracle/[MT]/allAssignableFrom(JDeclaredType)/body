{
  Set<JDeclaredType> toReturn=new IdentityHashSet<JDeclaredType>();
  List<JDeclaredType> q=new LinkedList<JDeclaredType>();
  q.add(type);
  while (!q.isEmpty()) {
    JDeclaredType t=q.remove(0);
    if (toReturn.add(t)) {
      if (t.getSuperClass() != null) {
        q.add(t.getSuperClass());
      }
      q.addAll(t.getImplements());
    }
  }
  return toReturn;
}
