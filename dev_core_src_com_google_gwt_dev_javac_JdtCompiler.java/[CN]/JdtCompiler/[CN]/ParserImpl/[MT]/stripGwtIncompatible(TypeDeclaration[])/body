{
  if (types == null) {
    return types;
  }
  List<TypeDeclaration> newTypeDecls=new ArrayList<TypeDeclaration>();
  for (  TypeDeclaration tyDecl : types) {
    if (!hasGwtIncompatibleAnnotation(tyDecl.annotations)) {
      newTypeDecls.add(tyDecl);
      tyDecl.memberTypes=stripGwtIncompatible(tyDecl.memberTypes);
      stripGwtIncompatibleMethods(tyDecl);
      stripGwtIncompatibleFields(tyDecl);
    }
  }
  if (newTypeDecls.size() != types.length) {
    return newTypeDecls.toArray(new TypeDeclaration[newTypeDecls.size()]);
  }
 else {
    return types;
  }
}
