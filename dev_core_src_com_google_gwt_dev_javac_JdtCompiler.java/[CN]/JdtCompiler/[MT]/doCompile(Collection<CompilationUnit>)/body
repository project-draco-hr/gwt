{
  List<ICompilationUnit> icus=new ArrayList<ICompilationUnit>();
  for (  CompilationUnit unit : units) {
    String packageName=Shared.getPackageName(unit.getTypeName()).replace('.','/');
    addPackages(packageName);
    Set<CompiledClass> compiledClasses=unit.getCompiledClasses();
    if (compiledClasses == null) {
      icus.add(new CompilationUnitAdapter(unit));
    }
 else {
      recordBinaryTypes(compiledClasses);
    }
  }
  if (icus.isEmpty()) {
    return false;
  }
  PerfLogger.start("JdtCompiler.compile");
  new CompilerImpl().compile(icus.toArray(new ICompilationUnit[icus.size()]));
  PerfLogger.end();
  return true;
}
