{
  body.println("var ua = navigator.userAgent.toLowerCase();");
  body.println("var docMode = $doc.documentMode;");
  for (  UserAgent userAgent : UserAgent.values()) {
    if (possibleValues.contains(userAgent.name())) {
      body.println("if ((function() { ");
      body.indentln(userAgent.predicateBlock);
      body.println("})()) return '%s';",userAgent.name());
    }
  }
  if (fallback == null) {
    fallback="unknown";
  }
  body.println("return '" + fallback + "';");
}
