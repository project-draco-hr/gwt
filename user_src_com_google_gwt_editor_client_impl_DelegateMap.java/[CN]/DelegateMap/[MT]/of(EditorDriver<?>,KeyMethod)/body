{
  final DelegateMap toReturn=new DelegateMap(key);
  driver.accept(new EditorVisitor(){
    @Override public <T>void endVisit(    EditorContext<T> ctx){
      toReturn.put(ctx.getAbsolutePath(),ctx.getEditor());
      @SuppressWarnings("unchecked") AbstractEditorDelegate<T,?> delegate=(AbstractEditorDelegate<T,?>)ctx.getEditorDelegate();
      if (delegate != null) {
        toReturn.put(delegate.getObject(),delegate);
      }
    }
  }
);
  return toReturn;
}
