{
  final StringBuffer b=new StringBuffer();
abstract class AppendToStringBuffer {
    int num;
    public AppendToStringBuffer(    int i){
      this.num=i;
    }
    public abstract void act();
  }
  List<AppendToStringBuffer> results=new ArrayList<AppendToStringBuffer>();
  for (int i=0; i < 10; i++) {
    AppendToStringBuffer ap=new AppendToStringBuffer(i){
      public void act(){
        b.append(num);
        testAppend.append(num);
      }
    }
;
    results.add(ap);
  }
  for (  AppendToStringBuffer theAp : results) {
    theAp.act();
  }
  assertEquals("0123456789",b.toString());
  assertEquals("0123456789",testAppend.toString());
}
