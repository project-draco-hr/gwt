{
  if (parent == null) {
    if (RootPanel.isInDetachList(this)) {
      RootPanel.detachNow(this);
    }
  }
 else   if (parent instanceof HasWidgets) {
    ((HasWidgets)parent).remove(this);
  }
 else   if (parent != null) {
    throw new IllegalStateException("This widget's parent does not implement HasWidgets");
  }
}
