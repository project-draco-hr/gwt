{
  StringBuilder detokenated=new StringBuilder();
  int index=0, nextToken=0;
  while ((nextToken=betokened.indexOf(TOKEN,index)) > -1) {
    detokenated.append(betokened.substring(index,nextToken));
    int endToken=betokened.indexOf(TOKEN,nextToken + TOKEN.length());
    String token=betokened.substring(nextToken,endToken + TOKEN.length());
    detokenated.append(resolver.resolveToken(token));
    index=endToken + TOKEN.length();
  }
  detokenated.append(betokened.substring(index));
  return detokenated.toString();
}
