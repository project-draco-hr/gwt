{
  final AutoBean<OtherIntf> other=factory.otherIntf();
  final AutoBean<Intf> intf=factory.intf();
  final AutoBean<HasBoolean> hasBoolean=factory.hasBoolean();
  other.as().setIntf(intf.as());
  other.as().setHasBoolean(hasBoolean.as());
  intf.as().setInt(42);
  hasBoolean.as().setGet(true);
  hasBoolean.as().setHas(true);
  hasBoolean.as().setIs(true);
class Checker extends AutoBeanVisitor {
    boolean seenHasBoolean;
    boolean seenIntf;
    boolean seenOther;
    @Override public void endVisitReferenceProperty(    String propertyName,    AutoBean<?> value,    PropertyContext ctx){
      if ("hasBoolean".equals(propertyName)) {
        assertSame(hasBoolean,value);
        assertEquals(HasBoolean.class,ctx.getType());
      }
 else       if ("intf".equals(propertyName)) {
        assertSame(intf,value);
        assertEquals(Intf.class,ctx.getType());
      }
 else       if ("unreferenced".equals(propertyName)) {
        assertNull(value);
        assertEquals(UnreferencedInFactory.class,ctx.getType());
      }
 else {
        fail("Unexpecetd property " + propertyName);
      }
    }
    @Override public void endVisitValueProperty(    String propertyName,    Object value,    PropertyContext ctx){
      if ("int".equals(propertyName)) {
        assertEquals(42,value);
        assertEquals(int.class,ctx.getType());
      }
 else       if ("string".equals(propertyName)) {
        assertNull(value);
        assertEquals(String.class,ctx.getType());
      }
 else       if ("get".equals(propertyName) || "has".equals(propertyName) || "is".equals(propertyName)) {
        assertEquals(boolean.class,ctx.getType());
        assertTrue((Boolean)value);
      }
 else {
        fail("Unknown value property " + propertyName);
      }
    }
    @Override public boolean visit(    AutoBean<?> bean,    Context ctx){
      if (bean == hasBoolean) {
        seenHasBoolean=true;
      }
 else       if (bean == intf) {
        seenIntf=true;
      }
 else       if (bean == other) {
        seenOther=true;
      }
 else {
        fail("Unknown AutoBean");
      }
      return true;
    }
    void check(){
      assertTrue(seenHasBoolean);
      assertTrue(seenIntf);
      assertTrue(seenOther);
    }
  }
  Checker c=new Checker();
  other.accept(c);
  c.check();
}
