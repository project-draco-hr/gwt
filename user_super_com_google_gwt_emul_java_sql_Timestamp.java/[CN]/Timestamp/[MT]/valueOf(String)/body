{
  String[] components=s.split(" ");
  if (components.length != 2) {
    throw new IllegalArgumentException("Invalid escape format: " + s);
  }
  String[] timeComponents=components[1].split("\\.");
  boolean hasNanos=true;
  int nanos=0;
  if (timeComponents.length == 1) {
    hasNanos=false;
  }
 else   if (timeComponents.length != 2) {
    throw new IllegalArgumentException("Invalid escape format: " + s);
  }
  Date d=Date.valueOf(components[0]);
  Time t=Time.valueOf(timeComponents[0]);
  if (hasNanos) {
    String nanosString=timeComponents[1];
    int len=nanosString.length();
    assert(len > 0);
    if (len > 9) {
      throw new IllegalArgumentException("Invalid escape format: " + s);
    }
    if (len < 9) {
      nanosString+="00000000".substring(len - 1);
    }
    try {
      nanos=Integer.valueOf(nanosString);
    }
 catch (    NumberFormatException e) {
      throw new IllegalArgumentException("Invalid escape format: " + s);
    }
  }
  return new Timestamp(d.getYear(),d.getMonth(),d.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),nanos);
}
