{
  if (LowLevelMoz.isWrappedDispatch(scriptObject,jsval)) {
    DispatchObject dispObj=LowLevelMoz.unwrapDispatch(scriptObject,jsval);
    return dispObj.getTarget();
  }
  int wrapper=0;
  try {
    wrapper=LowLevelMoz.wrapJSObject(scriptObject,jsval);
    return HandleMoz.createHandle(type,wrapper);
  }
  finally {
    if (wrapper != 0) {
      releaseInt(wrapper);
    }
  }
}
