{
  AutoBean<Simple> bean=f.simple();
  Simple simple=bean.as();
  simple.setInt(42);
  simple.setString("Hello World!");
  Splittable split=AutoBeanCodex.encode(bean);
  AutoBean<Simple> decodedBean=AutoBeanCodex.decode(f,Simple.class,split);
  assertTrue(AutoBeanUtils.diff(bean,decodedBean).isEmpty());
  AutoBean<HasSimple> bean2=f.hasSimple();
  bean2.as().setSimple(simple);
  split=AutoBeanCodex.encode(bean2);
  AutoBean<HasSimple> decodedBean2=AutoBeanCodex.decode(f,HasSimple.class,split);
  assertNotNull(decodedBean2.as().getSimple());
  assertTrue(AutoBeanUtils.diff(bean,AutoBeanUtils.getAutoBean(decodedBean2.as().getSimple())).isEmpty());
  AutoBean<HasList> bean3=f.hasList();
  bean3.as().setIntList(Arrays.asList(1,2,3,null,4,5));
  bean3.as().setList(Arrays.asList(simple));
  split=AutoBeanCodex.encode(bean3);
  AutoBean<HasList> decodedBean3=AutoBeanCodex.decode(f,HasList.class,split);
  assertNotNull(decodedBean3.as().getIntList());
  assertEquals(Arrays.asList(1,2,3,null,4,5),decodedBean3.as().getIntList());
  assertNotNull(decodedBean3.as().getList());
  assertEquals(1,decodedBean3.as().getList().size());
  assertTrue(AutoBeanUtils.diff(bean,AutoBeanUtils.getAutoBean(decodedBean3.as().getList().get(0))).isEmpty());
}
