{
  addSnippetImport("com.google.gwt.core.client.JavaScriptObject");
  addSnippetClassDecl("static class Buggy {","  static final class Foo extends com.google.gwt.core.client.JavaScriptObject {","    protected Foo() { };","    void foo() { };","  }","  native void jsniMeth(Object o) /*-{","    new Object().@Buggy.Foo::foo()();","  }-*/;","}");
  assertCompileFails("new Buggy().jsniMeth(null);","JSNI method test.EntryPoint$Buggy.jsniMeth(Ljava/lang/Object;)V  attempts to call " + "non-static method test.EntryPoint$Buggy$Foo.foo()V on an instance which is a " + "subclass of JavaScriptObject. Only static method calls on JavaScriptObject "+ "subclasses are allowed in JSNI.");
}
