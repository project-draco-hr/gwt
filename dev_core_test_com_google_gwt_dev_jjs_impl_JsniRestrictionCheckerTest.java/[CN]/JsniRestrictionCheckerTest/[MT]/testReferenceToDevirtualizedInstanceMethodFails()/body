{
  addSnippetImport("com.google.gwt.core.client.JavaScriptObject");
  addSnippetClassDecl("static class Buggy {","  native void jsniMethod(Object o) /*-{","    var a = new Object().@java.lang.Double::doubleValue();","  }-*/;","}");
  assertCompileFails("new Buggy().jsniMethod(null);","Line 6: Method 'double Double.doubleValue()' is implemented by devirtualized " + "type 'Double' JSO and can only be used in calls within a JSNI method body.");
}
