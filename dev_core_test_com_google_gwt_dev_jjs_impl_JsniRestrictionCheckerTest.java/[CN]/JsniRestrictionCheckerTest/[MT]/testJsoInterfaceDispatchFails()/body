{
  addSnippetImport("com.google.gwt.core.client.JavaScriptObject");
  addSnippetClassDecl("static class Buggy {","  interface IFoo {","    void foo();","  }","  static final class Foo extends JavaScriptObject implements IFoo {","    protected Foo() { };","    public void foo() { };","  }","  native void jsniMethod(Object o) /*-{","    new Object().@Buggy.IFoo::foo()();","  }-*/;","}");
  assertCompileFails("new Buggy().jsniMethod(null);","Line 13: JSNI method test.EntryPoint$Buggy.jsniMethod(Ljava/lang/Object;)V calls " + "method test.EntryPoint$Buggy$IFoo.foo()V on an instance which might be a " + "JavaScriptObject. Such a method call is only allowed in pure Java "+ "(non-JSNI) functions.");
}
