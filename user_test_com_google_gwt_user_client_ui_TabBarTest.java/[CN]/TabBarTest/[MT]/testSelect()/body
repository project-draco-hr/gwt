{
  final TabBar bar=createTabBar();
  bar.addTab("foo");
  bar.addTab("bar");
  bar.addTab("baz");
  bar.selectTab(1);
  assertEquals(1,bar.getSelectedTab());
  bar.selectTab(2);
  assertEquals(2,bar.getSelectedTab());
  bar.selectTab(-1);
  assertEquals(-1,bar.getSelectedTab());
  TabListener listener=new TabListener(){
    @Override public boolean onBeforeTabSelected(    SourcesTabEvents sender,    int tabIndex){
      beforeSelection=tabIndex;
      if (tabIndex == 1) {
        return false;
      }
 else {
        return true;
      }
    }
    @Override public void onTabSelected(    SourcesTabEvents sender,    int tabIndex){
      selected=tabIndex;
    }
  }
;
  bar.addTabListener(listener);
  boolean result=bar.selectTab(-1);
  assertEquals(-1,beforeSelection);
  assertEquals(0,selected);
  assertTrue(result);
  result=bar.selectTab(1);
  assertFalse(result);
  assertEquals(0,selected);
  assertEquals(1,beforeSelection);
  result=bar.selectTab(2);
  assertTrue(result);
  assertEquals(2,selected);
  assertEquals(2,beforeSelection);
}
