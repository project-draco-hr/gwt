{
  ClassLoader ccl;
  if (obj != null) {
    ccl=obj.getClass().getClassLoader();
  }
 else {
    ccl=klass.getClassLoader();
  }
  if (ccl == null || !ccl.getClass().getName().equals("com.google.gwt.dev.shell.CompilingClassLoader")) {
    if (obj != null) {
      throw new RuntimeException("The object, " + obj + ", does not appear to be a JavaScriptObject or an interface "+ "implemented by a JavaScriptObject. GWT could not find a CompilingClassLoader "+ "for it.");
    }
 else {
      throw new RuntimeException("The class, " + klass + ", does not appear to be a JavaScriptObject or an interface "+ "implemented by a JavaScriptObject. GWT could not find a CompilingClassLoader "+ " for it.");
    }
  }
  return ccl;
}
