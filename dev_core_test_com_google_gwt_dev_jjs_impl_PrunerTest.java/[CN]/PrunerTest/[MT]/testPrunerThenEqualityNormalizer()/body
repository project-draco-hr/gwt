{
  runDeadCodeElimination=false;
  addSnippetClassDecl("static int foo(int i) { return i; }");
  addSnippetClassDecl("static class UninstantiatedClass { " + "int field[]; native int method() /*-{ return 1; }-*/; }");
  addSnippetClassDecl("static UninstantiatedClass uninstantiatedField;");
  Result result;
  (result=optimize("int","int i = 0;","if (uninstantiatedField.field[i] == 0) { i = 2; }","return i;")).intoString("int i = 0;","if (null.nullField[i] == 0) {","  i = 2;","}","return i;");
  EqualityNormalizer.exec(result.getOptimizedProgram());
}
