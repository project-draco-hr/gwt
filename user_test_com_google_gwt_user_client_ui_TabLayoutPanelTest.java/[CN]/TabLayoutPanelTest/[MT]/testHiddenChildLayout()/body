{
  final TabLayoutPanel p=new TabLayoutPanel(32,Unit.PX);
  p.setSize("128px","128px");
  RootPanel.get().add(p);
  final Label foo=new Label("foo");
  final Label bar=new Label("bar");
  p.add(foo,new Label("foo"));
  p.add(bar,new Label("bar"));
  delayTestFinish(2000);
  DeferredCommand.addCommand(new Command(){
    @Override public void execute(){
      assertEquals(128,foo.getOffsetWidth());
      assertEquals(128 - 32,foo.getOffsetHeight());
      p.selectTab(1);
      DeferredCommand.addCommand(new Command(){
        @Override public void execute(){
          assertEquals(128,bar.getOffsetWidth());
          assertEquals(128 - 32,bar.getOffsetHeight());
          finishTest();
        }
      }
);
    }
  }
);
}
