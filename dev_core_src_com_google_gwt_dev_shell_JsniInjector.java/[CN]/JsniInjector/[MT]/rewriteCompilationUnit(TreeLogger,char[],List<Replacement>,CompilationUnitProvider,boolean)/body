{
  JClassType[] types=oracle.getTypesInCompilationUnit(cup);
  for (  JClassType type : types) {
    if (!type.getQualifiedSourceName().startsWith("java.")) {
      collectJsniMethods(logger,source,type);
    }
  }
  for (  JClassType type : types) {
    List<JsniMethod> jsniMethods=jsniMethodMap.get(type);
    if (jsniMethods != null && jsniMethods.size() > 0) {
      char[] annotation=genJsniMethodsAnnotation(jsniMethods,pretty);
      int declStart=type.getDeclStart();
      changes.add(new Replacement(declStart,declStart,annotation));
    }
  }
}
