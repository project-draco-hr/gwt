def check(self, m, expected):
    'Verifies that the multiemitter contains the expected contents.\n\n    Expected is a list of (filename, content) pairs, sorted by filename.\n    '
    files = []

    def _Collect(file, contents):
        files.append((file, ''.join(contents)))
    m.Flush(_Collect)
    self.assertEquals(expected, files)
