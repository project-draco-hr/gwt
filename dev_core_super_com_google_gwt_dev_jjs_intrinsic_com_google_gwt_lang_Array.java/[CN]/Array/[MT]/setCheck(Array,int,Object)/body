{
  if (value != null) {
    if (array.queryId > 0 && !Cast.canCastUnsafe(value.typeId,array.queryId)) {
      throw new ArrayStoreException();
    }
    if (array.queryId < 0 && Cast.isJavaObject(value)) {
      throw new ArrayStoreException();
    }
  }
  return set(array,index,value);
}
