{
  if (value != null) {
    if (array.queryId > 0 && !Cast.canCastUnsafe(value,array.queryId)) {
      throw new ArrayStoreException();
    }
 else     if (array.queryId == -1 && Cast.isJavaObject(value)) {
      throw new ArrayStoreException();
    }
 else     if (array.queryId < -1 && !Cast.isJavaScriptObject(value) && !Cast.canCastUnsafe(value,-array.queryId)) {
      throw new ArrayStoreException();
    }
  }
  return set(array,index,value);
}
