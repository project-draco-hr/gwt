{
  if (jsniMemberRef.equals("toString")) {
    jsniMemberRef="@java.lang.Object::toString()";
  }
  JsniRef parsed=JsniRef.parse(jsniMemberRef);
  if (parsed == null) {
    logger.log(TreeLogger.WARN,"Malformed JSNI reference '" + jsniMemberRef + "'; expect subsequent failures",new NoSuchFieldError(jsniMemberRef));
    return -1;
  }
  String className=parsed.className();
  DispatchClassInfo dispClassInfo=getClassInfoFromClassName(className);
  if (dispClassInfo != null) {
    String memberName=parsed.memberSignature();
    if (singleJsoImplTypes.contains(canonicalizeClassName(parsed.className()))) {
      logger.log(TreeLogger.WARN,"Invalid JSNI reference to SingleJsoImpl interface (" + parsed.className() + "); consider using a trampoline. "+ "Expect subsequent failures.",new NoSuchFieldError(jsniMemberRef));
      return -1;
    }
    int memberId=dispClassInfo.getMemberId(memberName);
    if (memberId < 0) {
      logger.log(TreeLogger.WARN,"Member '" + memberName + "' in JSNI reference '"+ jsniMemberRef+ "' could not be found; expect subsequent failures",new NoSuchFieldError(memberName));
    }
    return synthesizeDispId(dispClassInfo.getClassId(),memberId);
  }
  logger.log(TreeLogger.WARN,"Class '" + className + "' in JSNI reference '"+ jsniMemberRef+ "' could not be found; expect subsequent failures",new ClassNotFoundException(className));
  return -1;
}
