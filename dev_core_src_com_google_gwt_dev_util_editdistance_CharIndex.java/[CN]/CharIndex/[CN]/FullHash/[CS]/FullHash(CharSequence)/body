{
  int len=s.length();
  int power=Integer.highestOneBit(len);
  map=new java.util.HashMap<Char,Integer>(power << ((power == len) ? 1 : 2));
  Char test=new Char();
  for (int i=0; i < s.length(); i++) {
    test.c=s.charAt(i);
    if (map.get(test) == null) {
      map.put(test,new Integer(++lastUsed));
      test=new Char();
    }
  }
}
