{
  PersonWithListEditorDriver driver=GWT.create(PersonWithListEditorDriver.class);
  PersonWithList person=new PersonWithList();
  Address a1=new Address();
  a1.city="a1City";
  a1.street="a1Street";
  Address a2=new Address();
  a2.city="a2City";
  a2.street="a2Street";
  person.addresses.add(a1);
  person.addresses.add(a2);
  PersonWithListEditor personEditor=new PersonWithListEditor();
  driver.initialize(personEditor);
  assertEquals(Collections.emptyList(),personEditor.addressesEditor.getEditors());
  driver.edit(person);
  ValueAwareAddressEditor addressEditor=personEditor.addressesEditor.getEditors().get(1);
  assertEquals(1,addressEditor.setValueCalled);
  assertEquals("a2City",addressEditor.city.getValue());
  addressEditor.city.setValue("edited");
  driver.flush();
  assertEquals("edited",person.addresses.get(1).getCity());
  addressEditor.setValueCalled=0;
  driver.edit(person);
  assertSame(addressEditor,personEditor.addressesEditor.getEditors().get(1));
  assertEquals(1,addressEditor.setValueCalled);
  person.addresses=null;
  driver.edit(person);
  assertNull(personEditor.addressesEditor.getList());
  assertEquals(Collections.emptyList(),personEditor.addressesEditor.getEditors());
  driver.flush();
  assertNull(person.addresses);
}
