{
  PersonEditorWithOptionalAddressDriver driver=GWT.create(PersonEditorWithOptionalAddressDriver.class);
  person.address=null;
  AddressEditor delegate=new AddressEditor();
  PersonEditorWithOptionalAddressEditor editor=new PersonEditorWithOptionalAddressEditor(delegate);
  driver.initialize(editor);
  driver.edit(person);
  editor.address.setValue(personAddress);
  assertEquals("City",delegate.city.getValue());
  delegate.city.setValue("Hello");
  driver.flush();
  assertNotNull(person.address);
  assertSame(personAddress,person.address);
  assertEquals("Hello",personAddress.city);
  editor.address.setValue(null);
  driver.flush();
  assertNull(person.address);
}
