{
  if (src == dest) {
    src=nativeArraySlice(src,srcOfs,srcOfs + len);
    srcOfs=0;
  }
  for (int batchStart=srcOfs, end=srcOfs + len; batchStart < end; ) {
    int batchEnd=Math.min(batchStart + ARRAY_PROCESS_BATCH_SIZE,end);
    len=batchEnd - batchStart;
    nativeArraySplice(dest,destOfs,overwrite ? len : 0,nativeArraySlice(src,batchStart,batchEnd));
    batchStart=batchEnd;
    destOfs+=len;
  }
}
