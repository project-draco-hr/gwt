{
  if (forceLaunch || !running) {
    shell.compileForWebMode(moduleName,null);
    String localhost;
    try {
      localhost=InetAddress.getLocalHost().getHostAddress();
    }
 catch (    UnknownHostException e) {
      throw new RuntimeException("Unable to determine my ip address",e);
    }
    String url="http://" + localhost + ":"+ shell.getPort()+ "/"+ getUrlSuffix(moduleName);
    for (int i=0; i < remoteTokens.length; ++i) {
      long callStart=System.currentTimeMillis();
      try {
        int remoteToken=remoteTokens[i];
        BrowserManager mgr=browserManagers[i];
        if (remoteToken != 0) {
          mgr.killBrowser(remoteToken);
        }
        remoteTokens[i]=mgr.launchNewBrowser(url,INITIAL_KEEPALIVE_MS);
      }
 catch (      Exception e) {
        Throwable cause=e.getCause();
        if (cause instanceof SocketTimeoutException) {
          long elapsed=System.currentTimeMillis() - callStart;
          shell.getTopLogger().log(TreeLogger.ERROR,"Timeout: " + elapsed + "ms  launching remote browser at: "+ remoteBmsUrls[i],e.getCause());
          throw new UnableToCompleteException();
        }
        shell.getTopLogger().log(TreeLogger.ERROR,"Error launching remote browser at " + remoteBmsUrls[i],e);
        throw new UnableToCompleteException();
      }
    }
    running=true;
  }
}
