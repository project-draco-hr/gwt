{
  Button button=new Button("test",new ClickHandler(){
    @Override public void onClick(    ClickEvent event){
      throw new IllegalArgumentException("_expected_");
    }
  }
);
  RootPanel.get().add(button);
  final List<String> ret=new ArrayList<String>();
  GWT.setUncaughtExceptionHandler(new UncaughtExceptionHandler(){
    @Override public void onUncaughtException(    Throwable e){
      Event event=DOM.eventGetCurrentEvent();
      if (event == null) {
        ret.add("Event is null");
        return;
      }
      if (event.getTypeInt() != Event.ONCLICK) {
        ret.add("Event is not a click event");
        return;
      }
      ret.add("Success");
    }
  }
);
  NativeEvent clickEvent=Document.get().createClickEvent(0,0,0,0,0,false,false,false,false);
  button.getElement().dispatchEvent(clickEvent);
  assertEquals(1,ret.size());
  assertEquals("Success",ret.get(0));
  RootPanel.get().remove(button);
}
