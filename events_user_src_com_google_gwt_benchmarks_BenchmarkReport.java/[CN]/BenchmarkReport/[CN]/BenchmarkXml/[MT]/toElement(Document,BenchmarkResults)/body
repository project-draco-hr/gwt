{
  Element resultElement=doc.createElement("result");
  resultElement.setAttribute("host",result.getHost());
  resultElement.setAttribute("agent",result.getAgent());
  Throwable exception=result.getException();
  if (exception != null) {
    Element exceptionElement=doc.createElement("exception");
    exceptionElement.appendChild(doc.createTextNode(exception.toString()));
    resultElement.appendChild(exceptionElement);
  }
  List<Trial> trials=result.getTrials();
  for (  Trial trial : trials) {
    Element trialElement=toElement(doc,trial);
    resultElement.appendChild(trialElement);
  }
  return resultElement;
}
