{
  Set<URL> seenEntries=new HashSet<URL>();
  for (; classLoader != null; classLoader=classLoader.getParent()) {
    if (classLoader instanceof URLClassLoader) {
      URLClassLoader urlClassLoader=(URLClassLoader)classLoader;
      URL[] urls=urlClassLoader.getURLs();
      for (      URL url : urls) {
        if (seenEntries.contains(url)) {
          continue;
        }
        seenEntries.add(url);
        Throwable caught;
        try {
          ClassPathEntry entry=createEntryForUrl(logger,url);
          if (entry != null) {
            classPath.add(entry);
          }
          continue;
        }
 catch (        AccessControlException e) {
          logger.log(TreeLogger.DEBUG,"Skipping URL due to access restrictions: " + url);
          continue;
        }
catch (        URISyntaxException e) {
          caught=e;
        }
catch (        IOException e) {
          caught=e;
        }
        logger.log(TreeLogger.WARN,"Error processing classpath URL '" + url + "'",caught);
      }
    }
  }
}
