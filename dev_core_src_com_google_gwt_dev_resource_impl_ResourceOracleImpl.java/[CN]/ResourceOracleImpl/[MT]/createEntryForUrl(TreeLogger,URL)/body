{
  String urlString=url.toString();
  if (url.getProtocol().equals("file")) {
    URI uri=new URI(urlString);
    File f=new File(uri);
    String lowerCaseFileName=f.getName().toLowerCase();
    if (f.isDirectory()) {
      return new DirectoryClassPathEntry(f);
    }
 else     if (f.isFile() && lowerCaseFileName.endsWith(".jar")) {
      return new ZipFileClassPathEntry(new JarFile(f));
    }
 else     if (f.isFile() && lowerCaseFileName.endsWith(".zip")) {
      return new ZipFileClassPathEntry(new ZipFile(f));
    }
 else {
      logger.log(TreeLogger.TRACE,"Unexpected entry in classpath; " + f + " is neither a directory nor an archive (.jar or .zip)");
      return null;
    }
  }
 else {
    logger.log(TreeLogger.WARN,"Unknown URL type for " + urlString,null);
    return null;
  }
}
