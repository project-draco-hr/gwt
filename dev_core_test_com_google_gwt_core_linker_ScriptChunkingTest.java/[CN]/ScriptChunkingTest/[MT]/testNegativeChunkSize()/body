{
  ScriptWithRangesBuilder builder=new ScriptWithRangesBuilder();
  builder.addNonStatement("{");
  builder.addNonStatement("{");
  builder.addStatement("x=1;");
  builder.addStatement("function x(){x = 2}\n");
  builder.addStatement("x=3");
  builder.addNonStatement("}\n{");
  builder.addStatement("x=5");
  builder.addNonStatement("}");
  String split=IFrameLinker.splitPrimaryJavaScript(builder.getRanges(),builder.getJavaScript(),-1);
  assertEquals(builder.getJavaScript(),split);
}
