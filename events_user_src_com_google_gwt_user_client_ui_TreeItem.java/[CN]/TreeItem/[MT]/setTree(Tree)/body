{
  if (tree == newTree) {
    return;
  }
  if (tree != null) {
    if (tree.getSelectedItem() == this) {
      tree.setSelectedItem(null);
    }
    if (widget != null) {
      tree.orphan(widget);
    }
  }
  tree=newTree;
  for (int i=0, n=getChildCount(); i < n; ++i) {
    children.get(i).setTree(newTree);
  }
  updateState(false,true);
  if (newTree != null) {
    if (widget != null) {
      newTree.adopt(widget,this);
    }
  }
}
