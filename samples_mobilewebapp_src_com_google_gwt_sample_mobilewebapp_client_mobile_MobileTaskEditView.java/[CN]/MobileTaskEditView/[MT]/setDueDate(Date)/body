{
  boolean wasNull=(currentDate == null);
  currentDate=date;
  if (date == null) {
    dateButton.setText("Set due date");
    calendarCheckbox.setValue(false);
    calendarCheckbox.setEnabled(false);
  }
 else {
    dateButton.setText(dateFormat.format(date));
    calendarCheckbox.setEnabled(true);
    if (wasNull) {
      calendarCheckbox.setValue(true);
    }
  }
}
