{
  js="function(){ " + js + " }";
  JsParser jsParser=new JsParser();
  JsProgram jsPgm=new JsProgram();
  StringReader r=new StringReader(js);
  try {
    JsStatements stmts=jsParser.parse(jsPgm.getScope(),r,startLine);
    JsFunction fn=(JsFunction)((JsExprStmt)stmts.get(0)).getExpression();
    return fn.getBody();
  }
 catch (  IOException e) {
    logger.log(TreeLogger.ERROR,"Error reading JavaScript source",e);
    throw new UnableToCompleteException();
  }
catch (  JsParserException e) {
    SourceDetail dtl=e.getSourceDetail();
    if (dtl != null) {
      StringBuffer sb=new StringBuffer();
      sb.append(location);
      sb.append("(");
      sb.append(dtl.getLine());
      sb.append(", ");
      sb.append(dtl.getLineOffset());
      sb.append("): ");
      sb.append(e.getMessage());
      logger.log(TreeLogger.ERROR,sb.toString(),e);
      throw new UnableToCompleteException();
    }
 else {
      logger.log(TreeLogger.ERROR,"Error parsing JSNI source",e);
      throw new UnableToCompleteException();
    }
  }
}
