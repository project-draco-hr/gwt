{
  if (directionEstimator == null) {
    isSpanWrapped=false;
    setInnerTextOrHtml(content,isHtml);
    if (textDir != initialElementDir) {
      textDir=initialElementDir;
      BidiUtils.setDirectionOnElement(element,initialElementDir);
    }
  }
 else {
    setTextOrHtml(content,directionEstimator.estimateDirection(content,isHtml),isHtml);
  }
  isDirectionExplicitlySet=false;
}
