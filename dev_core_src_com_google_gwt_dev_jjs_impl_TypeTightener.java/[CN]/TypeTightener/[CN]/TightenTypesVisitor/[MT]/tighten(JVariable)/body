{
  if (!(x.getType() instanceof JReferenceType)) {
    return;
  }
  JReferenceType refType=(JReferenceType)x.getType();
  if (refType == typeNull) {
    return;
  }
  if (!program.typeOracle.isInstantiatedType(refType)) {
    changeList.changeType(x,typeNull);
    return;
  }
  List typeList=new ArrayList();
  if (!(x instanceof JParameter)) {
    typeList.add(typeNull);
  }
  Set myAssignments=(Set)assignments.get(x);
  if (myAssignments != null) {
    for (Iterator iter=myAssignments.iterator(); iter.hasNext(); ) {
      JExpression expr=(JExpression)iter.next();
      JType type=expr.getType();
      if (!(type instanceof JReferenceType)) {
        return;
      }
      typeList.add(type);
    }
  }
  if (x instanceof JParameter) {
    Set myParams=(Set)paramUpRefs.get(x);
    if (myParams != null) {
      for (Iterator iter=myParams.iterator(); iter.hasNext(); ) {
        JParameter param=(JParameter)iter.next();
        typeList.add(param.getType());
      }
    }
  }
  if (typeList.isEmpty()) {
    return;
  }
  JReferenceType resultType=program.generalizeTypes(typeList);
  resultType=program.strongerType(refType,resultType);
  if (refType != resultType) {
    changeList.changeType(x,resultType);
  }
}
