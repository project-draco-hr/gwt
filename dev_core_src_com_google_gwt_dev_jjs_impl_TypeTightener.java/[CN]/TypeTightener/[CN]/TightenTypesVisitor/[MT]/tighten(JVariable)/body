{
  if (!(x.getType() instanceof JReferenceType)) {
    return;
  }
  JReferenceType varType=(JReferenceType)x.getType();
  if (varType.isNullType()) {
    return;
  }
  if (!program.typeOracle.isInstantiatedType(varType)) {
    x.setType(JReferenceType.NULL_TYPE);
    madeChanges();
    return;
  }
  JReferenceType leafType=getSingleConcreteType(varType);
  if (leafType != null) {
    x.setType(leafType);
    madeChanges();
    return;
  }
  Collection<JReferenceType> assignmentTypes=getAssignmentsIfValid(x);
  if (assignmentTypes == null) {
    return;
  }
  JReferenceType strengthenedType=strongerType(varType,Iterables.concat(assignmentTypes,JjsUtils.getExpressionTypes(paramUpRefs.get(x))));
  if (varType != strengthenedType) {
    x.setType(strengthenedType);
    madeChanges();
  }
}
