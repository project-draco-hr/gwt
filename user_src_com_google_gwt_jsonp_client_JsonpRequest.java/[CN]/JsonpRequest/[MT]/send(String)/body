{
  registerCallbacks(CALLBACKS,canHaveMultipleRequestsForSameId);
  StringBuffer uri=new StringBuffer(baseUri);
  uri.append(baseUri.contains("?") ? "&" : "?");
  String prefix=CALLBACKS_NAME + "." + callbackId;
  uri.append(callbackParam).append("=").append(prefix).append(".onSuccess");
  if (failureCallbackParam != null) {
    uri.append("&");
    uri.append(failureCallbackParam).append("=").append(prefix).append(".onFailure");
  }
  ScriptElement script=Document.get().createScriptElement();
  script.setType("text/javascript");
  script.setId(callbackId);
  script.setSrc(uri.toString());
  timer=new Timer(){
    @Override public void run(){
      onFailure(new TimeoutException("Timeout while calling " + baseUri));
    }
  }
;
  timer.schedule(timeout);
  getHeadElement().appendChild(script);
}
