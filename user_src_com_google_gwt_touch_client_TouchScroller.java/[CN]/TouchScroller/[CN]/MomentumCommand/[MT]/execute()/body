{
  if (this != momentumCommand) {
    finish();
    return false;
  }
  int cumulativeElapsedMillis=duration.elapsedMillis();
  state.setElapsedMillis(cumulativeElapsedMillis - lastElapsedMillis);
  lastElapsedMillis=cumulativeElapsedMillis;
  state.setCumulativeElapsedMillis(cumulativeElapsedMillis);
  boolean notDone=momentum.updateState(state);
  if (!notDone) {
    finish();
  }
  setWidgetScrollPosition(state.getPosition());
  return notDone;
}
