{
  EntityProxyIdImpl<?> proxyIdImpl=(EntityProxyIdImpl<?>)proxyId;
  String id=(String)proxyIdImpl.encodedId;
  if (proxyIdImpl.isFuture) {
    String datastoreId=(String)futureToDatastoreMap.get(id);
    if (datastoreId == null) {
      throw new IllegalArgumentException("Cannot call find on a proxyId before persisting");
    }
    id=datastoreId;
  }
  return ProxyImpl.wireFormatId(id,NOT_FUTURE,proxyIdImpl.schema);
}
