{
  Throwable caught=null;
  try {
    StringWriter sw=new StringWriter();
    PrintWriter pw=new PrintWriter(sw);
    writeDocument(pw,doc);
    return sw.toString().getBytes(DEFAULT_ENCODING);
  }
 catch (  UnsupportedEncodingException e) {
    caught=e;
  }
catch (  IOException e) {
    caught=e;
  }
  throw new RuntimeException("Unable to encode xml document object as a string",caught);
}
