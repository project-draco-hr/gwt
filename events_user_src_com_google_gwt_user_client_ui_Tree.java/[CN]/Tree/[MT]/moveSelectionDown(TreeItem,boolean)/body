{
  if (sel == root) {
    return;
  }
  TreeItem topClosedParent=getTopClosedParent(sel);
  if (topClosedParent != null) {
    moveSelectionDown(topClosedParent,false);
    return;
  }
  TreeItem parent=sel.getParentItem();
  if (parent == null) {
    parent=root;
  }
  int idx=parent.getChildIndex(sel);
  if (!dig || !sel.getState()) {
    if (idx < parent.getChildCount() - 1) {
      onSelection(parent.getChild(idx + 1),true,true);
    }
 else {
      moveSelectionDown(parent,false);
    }
  }
 else   if (sel.getChildCount() > 0) {
    onSelection(sel.getChild(0),true,true);
  }
}
