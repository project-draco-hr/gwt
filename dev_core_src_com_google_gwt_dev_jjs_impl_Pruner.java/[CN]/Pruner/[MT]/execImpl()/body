{
  boolean madeChanges=false;
  while (true) {
    ControlFlowAnalyzer livenessAnalyzer=new ControlFlowAnalyzer(program);
    if (saveCodeGenTypes) {
      traverseFromCodeGenTypes(livenessAnalyzer);
    }
    for (    JMethod method : program.getAllEntryMethods()) {
      livenessAnalyzer.traverseFrom(method);
    }
    livenessAnalyzer.traverseFromLeftoversFragmentHasLoaded();
    program.typeOracle.setInstantiatedTypes(livenessAnalyzer.getInstantiatedTypes());
    PruneVisitor pruner=new PruneVisitor(livenessAnalyzer.getReferencedTypes(),livenessAnalyzer.getLiveFieldsAndMethods());
    pruner.accept(program);
    if (!pruner.didChange()) {
      break;
    }
    CleanupRefsVisitor cleaner=new CleanupRefsVisitor(livenessAnalyzer.getLiveFieldsAndMethods(),pruner.getMethodToOriginalParamsMap());
    cleaner.accept(program.getDeclaredTypes());
    madeChanges=true;
  }
  return madeChanges;
}
