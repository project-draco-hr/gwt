{
  boolean madeChanges=false;
  while (true) {
    RescueVisitor rescuer=new RescueVisitor();
    for (int i=0; i < program.specialTypes.size(); ++i) {
      JReferenceType type=(JReferenceType)program.specialTypes.get(i);
      rescuer.rescue(type,true,noSpecialTypes);
    }
    for (int i=0; i < program.entryMethods.size(); ++i) {
      JMethod method=(JMethod)program.entryMethods.get(i);
      rescuer.rescue(method);
    }
    UpRefVisitor upRefer=new UpRefVisitor(rescuer);
    do {
      rescuer.commitInstantiatedTypes();
      upRefer.accept(program);
    }
 while (upRefer.didRescue());
    PruneVisitor pruner=new PruneVisitor();
    pruner.accept(program);
    if (!pruner.didChange()) {
      break;
    }
    CleanupRefsVisitor cleaner=new CleanupRefsVisitor();
    cleaner.accept(program);
    referencedTypes.clear();
    referencedNonTypes.clear();
    madeChanges=true;
  }
  return madeChanges;
}
