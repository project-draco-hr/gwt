{
  pw.println();
  pw.println("function onLoad() {");
  pw.println("  if (!$wnd.__gwt_isHosted) return;");
  if (hasExternalFiles()) {
    pw.println("  injectExternalFiles();");
  }
  pw.println("  if (!$wnd.__gwt_isHosted()) {");
  pw.println("    selectScript();");
  pw.println("  }");
  pw.println("  else {");
  pw.println("    var mcb = $wnd.__gwt_tryGetModuleControlBlock(location.search);");
  pw.println("    if (mcb) {");
  pw.println("      $moduleName = mcb.getName();");
  pw.println("      mcb.compilationLoaded(window);");
  pw.println("    }");
  pw.println("  }");
  pw.println("}");
}
