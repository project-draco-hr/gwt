{
  if (!isRemoveSupported())   return;
  resetEmpty();
  List elements=Arrays.asList(getFullElements());
  List other=Arrays.asList(getOtherElements());
  Set empty=new HashSet();
  assertTrue("Empty retainAll() should return false",!collection.retainAll(empty));
  verify();
  assertTrue("Empty retainAll() should return false",!collection.retainAll(elements));
  verify();
  resetFull();
  assertTrue("Collection should change from retainAll empty",collection.retainAll(empty));
  confirmed.retainAll(empty);
  verify();
  resetFull();
  assertTrue("Collection changed from retainAll other",collection.retainAll(other));
  confirmed.retainAll(other);
  verify();
  resetFull();
  int size=collection.size();
  assertTrue("Collection shouldn't change from retainAll elements",!collection.retainAll(elements));
  verify();
  assertEquals("Collection size shouldn't change",size,collection.size());
  resetFull();
  HashSet set=new HashSet(elements);
  size=collection.size();
  assertTrue("Collection shouldn't change from retainAll without " + "duplicate elements",!collection.retainAll(set));
  verify();
  assertEquals("Collection size didn't change from nonduplicate " + "retainAll",size,collection.size());
}
