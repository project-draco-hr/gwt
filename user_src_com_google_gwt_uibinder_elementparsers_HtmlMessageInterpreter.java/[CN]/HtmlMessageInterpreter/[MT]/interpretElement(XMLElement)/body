{
  MessagesWriter messages=uiWriter.getMessages();
  if (messages.isMessage(elem)) {
    if (!elem.hasChildNodes()) {
      uiWriter.die("Empty message: " + elem);
    }
    MessageWriter message=messages.newMessage(elem);
    message.setDefaultMessage(elem.consumeInnerHtml(phiProvider.get(message)));
    return uiWriter.tokenForExpression(messages.declareMessage(message));
  }
  return null;
}
