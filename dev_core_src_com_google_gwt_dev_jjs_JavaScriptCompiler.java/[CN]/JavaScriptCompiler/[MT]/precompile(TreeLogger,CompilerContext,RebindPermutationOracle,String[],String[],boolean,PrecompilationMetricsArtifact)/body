{
  boolean compileMonolithic=compilerContext.shouldCompileMonolithic();
  JavaToJavaScriptCompiler javaToJavaScriptCompiler=compileMonolithic ? new MonolithicJavaToJavaScriptCompiler(logger,compilerContext) : new LibraryJavaToJavaScriptCompiler(logger,compilerContext);
  return javaToJavaScriptCompiler.precompile(rpo,declEntryPts,additionalRootTypes,singlePermutation,precompilationMetrics);
}
