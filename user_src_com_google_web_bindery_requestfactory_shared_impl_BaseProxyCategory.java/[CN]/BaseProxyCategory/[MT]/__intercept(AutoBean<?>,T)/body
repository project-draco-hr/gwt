{
  AbstractRequestContext context=requestContext(bean);
  if (context == null || context.isLocked() || context.isDiffing()) {
    return returnValue;
  }
  if (returnValue instanceof BaseProxy) {
    @SuppressWarnings("unchecked") T toReturn=(T)context.editProxy((BaseProxy)returnValue);
    return toReturn;
  }
  if (returnValue instanceof Poser<?>) {
    ((Poser<?>)returnValue).setFrozen(false);
  }
  AutoBean<T> otherBean=AutoBeanUtils.getAutoBean(returnValue);
  if (otherBean != null) {
    otherBean.setTag(REQUEST_CONTEXT_STATE,bean.getTag(REQUEST_CONTEXT_STATE));
  }
  return returnValue;
}
