{
  Collection<Object> collection;
  if (List.class.equals(type)) {
    collection=new ArrayList<Object>();
  }
 else   if (Set.class.equals(type)) {
    collection=new HashSet<Object>();
  }
 else {
    throw new RuntimeException(type.getName());
  }
  for (int i=0, j=data.size(); i < j; i++) {
    Object element=data.isNull(i) ? null : elementDecoder.decode(data.get(i));
    collection.add(element);
  }
  return collection;
}
