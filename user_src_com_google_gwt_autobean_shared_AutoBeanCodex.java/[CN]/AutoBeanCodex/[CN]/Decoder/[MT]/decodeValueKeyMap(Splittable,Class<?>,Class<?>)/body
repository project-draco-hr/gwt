{
  Map<Object,Object> toReturn=new HashMap<Object,Object>();
  boolean isEncodedValue=Splittable.class.equals(valueType);
  boolean isValueValue=ValueCodex.canDecode(valueType);
  for (  String encodedKey : map.getPropertyKeys()) {
    Object key=decodeValue(keyType,encodedKey);
    Object value;
    if (map.isNull(encodedKey)) {
      value=null;
    }
 else     if (isEncodedValue) {
      value=map.get(encodedKey);
    }
 else     if (isValueValue) {
      value=decodeValue(valueType,map.get(encodedKey));
    }
 else {
      value=decode(map.get(encodedKey),valueType).as();
    }
    toReturn.put(key,value);
  }
  return toReturn;
}
