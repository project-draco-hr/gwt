{
  push(new StringBuilder());
  if (value == null) {
    return false;
  }
  Collection<?> collection=value.as();
  if (collection.isEmpty()) {
    sb.append("[]");
    return false;
  }
  if (ValueCodex.canDecode(ctx.getElementType())) {
    for (    Object element : collection) {
      sb.append(",").append(ValueCodex.encode(element).getPayload());
    }
  }
 else {
    boolean isEncoded=Splittable.class.equals(ctx.getElementType());
    for (    Object element : collection) {
      sb.append(",");
      if (element == null) {
        sb.append("null");
      }
 else       if (isEncoded) {
        sb.append(((Splittable)element).getPayload());
      }
 else {
        encodeToStringBuilder(sb,element);
      }
    }
  }
  sb.setCharAt(0,'[');
  sb.append("]");
  return false;
}
