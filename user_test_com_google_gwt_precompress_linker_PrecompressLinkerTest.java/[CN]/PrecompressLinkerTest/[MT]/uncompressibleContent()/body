{
  try {
    byte[] content=fooFileContents().getBytes("UTF-8");
    while (true) {
      byte[] updated=compress(content);
      if (updated.length >= content.length) {
        return content;
      }
      content=updated;
    }
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException(e.getMessage());
  }
}
