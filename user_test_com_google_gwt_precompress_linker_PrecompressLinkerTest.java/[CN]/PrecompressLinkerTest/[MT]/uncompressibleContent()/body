{
  byte[] content=fooFileContents().getBytes(UTF_8);
  while (true) {
    byte[] updated=compress(content);
    if (updated.length >= content.length) {
      return content;
    }
    content=updated;
  }
}
