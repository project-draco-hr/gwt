{
  String path=createTempOutFilename();
  OutputStream os1=genCtx.tryCreateResource(mockLogger,path);
  os1.write("going to call commit twice after this...".getBytes(Util.DEFAULT_ENCODING));
  genCtx.commitResource(mockLogger,os1);
  File createdFile=new File(tempOutDir,path);
  assertTrue(createdFile.exists());
  rememberToDelete(createdFile);
  OutputStream os2=genCtx.tryCreateResource(mockLogger,path);
  assertNull(os2);
}
