{
  Class<T> clazz=new Class<T>();
  if (clazz.isClassMetadataEnabled()) {
    clazz.packageName=packageName;
    clazz.compoundName=compoundClassName;
  }
 else {
    synthesizeClassNamesFromTypeId(clazz,typeId);
  }
  maybeSetClassLiteral(typeId,clazz);
  clazz.modifiers=(enumConstantsFunc != null) ? ENUM : 0;
  clazz.superclass=clazz.enumSuperclass=superclass;
  clazz.enumConstantsFunc=enumConstantsFunc;
  clazz.enumValueOfFunc=enumValueOfFunc;
  return clazz;
}
