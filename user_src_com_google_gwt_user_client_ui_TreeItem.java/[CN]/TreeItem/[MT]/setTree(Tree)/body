{
  if (this.tree == tree) {
    return;
  }
  if (this.tree != null) {
    if (this.tree.getSelectedItem() == this) {
      this.tree.setSelectedItem(null);
    }
    if (widget != null) {
      this.tree.disown(widget);
    }
  }
  this.tree=tree;
  for (int i=0, n=children.size(); i < n; ++i) {
    ((TreeItem)children.get(i)).setTree(tree);
  }
  updateState();
  if (tree != null) {
    if (widget != null) {
      tree.adopt(widget,contentElem);
    }
  }
}
