{
  if ((item.getParentItem() != null) || (item.getTree() != null)) {
    item.remove();
  }
  int childCount=getChildCount();
  if (beforeIndex < 0 || beforeIndex > childCount) {
    throw new IndexOutOfBoundsException();
  }
  if (children == null) {
    initChildren();
  }
  if (LocaleInfo.getCurrentLocale().isRTL()) {
    item.getElement().getStyle().setMarginRight(16.0,Unit.PX);
  }
 else {
    item.getElement().getStyle().setMarginLeft(16.0,Unit.PX);
  }
  if (beforeIndex == childCount) {
    childSpanElem.appendChild(item.getElement());
  }
 else {
    Element beforeElem=getChild(beforeIndex).getElement();
    childSpanElem.insertBefore(item.getElement(),beforeElem);
  }
  item.setParentItem(this);
  children.add(item);
  item.setTree(tree);
  if (children.size() == 1) {
    updateState(false,false);
  }
}
