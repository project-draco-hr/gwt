{
  srcWriter.println("private static JavaScriptObject createMethodMap() {");
  int n=types.size();
  srcWriter.indent();
  srcWriter.println("JavaScriptObject map = JavaScriptObject.createObject();");
  for (int i=0; i < n; i+=shardSize) {
    srcWriter.println("createMethodMap_" + i + "(map);");
  }
  srcWriter.println("return map;");
  srcWriter.outdent();
  srcWriter.println("}");
  srcWriter.println();
  for (int outerIndex=0; outerIndex < n; outerIndex+=shardSize) {
    srcWriter.println("@SuppressWarnings(\"restriction\")");
    srcWriter.println("private static native void createMethodMap_" + outerIndex + "(JavaScriptObject map) /*-"+ '{');
    srcWriter.indent();
    int last=outerIndex + shardSize;
    if (last > n) {
      last=n;
    }
    for (int i=outerIndex; i < last; ++i) {
      JType type=types.get(i);
      String typeString=getTypeString(type);
      srcWriter.print("map[\"" + typeString + "\"]=[");
      writeTypeMethods(type);
      srcWriter.println("];");
    }
    srcWriter.outdent();
    srcWriter.println("}-*/;");
    srcWriter.println();
  }
}
