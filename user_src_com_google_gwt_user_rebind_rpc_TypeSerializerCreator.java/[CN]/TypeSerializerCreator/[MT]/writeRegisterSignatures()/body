{
  srcWriter.println("private static native void registerSignatures() /*-{");
  srcWriter.indent();
  int index=0;
  boolean shard=shardSize > 0 && getSerializableTypes().length > shardSize;
  int shardCount=0;
  if (shard) {
    srcWriter.println("(function() {");
  }
  for (  JType type : getSerializableTypes()) {
    String typeString;
    if (elideTypeNames) {
      typeString=Integer.toString(++index,Character.MAX_RADIX);
    }
 else {
      typeString=getTypeString(type);
    }
    typeStrings.put(type,typeString);
    if (!serializationOracle.maybeInstantiated(type) && !deserializationOracle.maybeInstantiated(type)) {
      continue;
    }
    String jsniTypeRef;
    jsniTypeRef=TypeOracleMediator.computeBinaryClassName(type.getLeafType());
    while (type.isArray() != null) {
      jsniTypeRef+="[]";
      type=type.isArray().getComponentType();
    }
    if (shard && ++shardCount % shardSize == 0) {
      srcWriter.println("})();");
      srcWriter.println("(function() {");
    }
    srcWriter.println("@com.google.gwt.user.client.rpc.impl.SerializerBase" + "::registerSignature(" + "Lcom/google/gwt/core/client/JsArrayString;"+ "Ljava/lang/Class;"+ "Ljava/lang/String;)(");
    srcWriter.indent();
    srcWriter.println("@" + typeSerializerClassName + "::signatureMap,");
    srcWriter.println("@" + jsniTypeRef + "::class,");
    srcWriter.println("\"" + typeString + "\");");
    srcWriter.outdent();
    srcWriter.println();
  }
  if (shard) {
    srcWriter.println("})();");
  }
  srcWriter.outdent();
  srcWriter.println("}-*/;");
  srcWriter.println();
}
