{
  ArtifactSet toReturn=new ArtifactSet(artifacts);
  for (  CompilationResult compilation : toReturn.find(CompilationResult.class)) {
    toReturn.addAll(doEmitCompilation(logger,context,compilation));
  }
  toReturn.add(emitSelectionScript(logger,context,artifacts));
  return toReturn;
}
