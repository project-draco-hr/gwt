{
  DefaultTextOutput text=new DefaultTextOutput(true);
  JsReportGenerationVisitor generator=new JsReportGenerationVisitor(text,JavaToJavaScriptMap.EMPTY);
  generator.accept(program);
  String actual=dumpMappings(text.toString(),generator.getSourceInfoMap());
  String expected=expectedLines.length == 0 ? "" : Joiner.on("\n").join(expectedLines) + "\n";
  assertEquals("Mappings:\n" + expected,actual);
}
