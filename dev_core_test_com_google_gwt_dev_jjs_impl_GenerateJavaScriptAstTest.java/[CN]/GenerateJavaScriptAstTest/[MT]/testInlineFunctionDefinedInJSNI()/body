{
  String code=Joiner.on('\n').join("package test;","import com.google.gwt.core.client.GWT;","import com.google.gwt.core.client.RunAsyncCallback;","public class EntryPoint {","  public static native void inlinableJSNI() /*-{ (function () { return $wnd;})(); }-*/;","  public static void functionA() { onModuleLoad(); }","  public static void onModuleLoad() {","    inlinableJSNI();","  }","}");
  Set<JsNode> functionForJsInlining=compileSnippetToJS(code.toString()).getRight();
  assertContainsAll(functionForJsInlining,"onModuleLoad","inlinableJSNI","function(){ return $wnd; }");
  assertDoesNotContainsAny(functionForJsInlining,"functionA");
}
