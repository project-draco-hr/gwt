{
  StringBuffer code=new StringBuffer();
  code.append("package test;\n");
  code.append("import com.google.gwt.core.client.GWT;\n");
  code.append("import com.google.gwt.core.client.RunAsyncCallback;\n");
  code.append("public class EntryPoint {\n");
  code.append("  public static native void inlinableJSNI() /*-{ $wnd; }-*/; ");
  code.append("  public static void functionA() { main(); }\n");
  code.append("  public static void main() {\n");
  code.append("    inlinableJSNI();");
  code.append("  }\n");
  code.append("}\n");
  Set<JsNode> functionForJsInlining=compileSnippet(code.toString()).getRight();
  assertContainsAll(functionForJsInlining,"main","inlinableJSNI");
  assertDoesNotContainsAny(functionForJsInlining,"functionA");
}
