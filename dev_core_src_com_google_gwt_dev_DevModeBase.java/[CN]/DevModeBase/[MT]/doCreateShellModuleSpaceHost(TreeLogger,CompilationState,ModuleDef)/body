{
  File shellBaseWorkDir=options.getShellBaseWorkDir(moduleDef);
  File sessionWorkDir=new File(shellBaseWorkDir,String.valueOf(uniqueId.getAndIncrement()));
  Util.recursiveDelete(sessionWorkDir,false);
  ArtifactAcceptor artifactAcceptor=createArtifactAcceptor(logger,moduleDef);
  return new ShellModuleSpaceHost(logger,compilationState,moduleDef,options.getGenDir(),new File(sessionWorkDir,"gen"),artifactAcceptor);
}
