{
  DevModeUI newUI=null;
  SpeedTracerLogger.start(DevModeEventType.CREATE_UI);
  if (headlessMode) {
    newUI=new HeadlessUI(options);
  }
 else {
    if (options.useRemoteUI()) {
      try {
        newUI=new RemoteUI(options.getRemoteUIHost(),options.getRemoteUIHostPort(),options.getClientId());
        baseLogLevelForUI=TreeLogger.Type.TRACE;
      }
 catch (      Throwable t) {
        System.err.println("Could not connect to remote UI listening at " + options.getRemoteUIHost() + ":"+ options.getRemoteUIHostPort()+ ". Using default UI instead.");
      }
    }
  }
  if (newUI == null) {
    newUI=new SwingUI(options);
  }
  if (baseLogLevelForUI == null) {
    baseLogLevelForUI=TreeLogger.Type.INFO;
  }
  SpeedTracerLogger.end(DevModeEventType.CREATE_UI);
  return newUI;
}
