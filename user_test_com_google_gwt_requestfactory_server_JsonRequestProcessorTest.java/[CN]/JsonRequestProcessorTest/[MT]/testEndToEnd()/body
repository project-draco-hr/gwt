{
  com.google.gwt.requestfactory.server.SimpleFoo.reset();
  JSONObject foo=fetchVerifyAndGetInitialObject();
  foo.put("intId",45);
  foo.put("userName","JSC");
  foo.put("longField","" + 9L);
  foo.put("enumField",SimpleEnum.BAR.ordinal());
  foo.put("boolField",false);
  Date now=new Date();
  foo.put("created","" + now.getTime());
  JSONObject result=getResultFromServer(foo);
  SimpleFoo fooResult=SimpleFoo.getSingleton();
  JSONArray updateArray=result.getJSONObject("sideEffects").getJSONArray("UPDATE");
  assertEquals(1,updateArray.length());
  assertEquals(1,updateArray.getJSONObject(0).length());
  assertTrue(updateArray.getJSONObject(0).has(RequestData.ENCODED_ID_PROPERTY));
  assertFalse(updateArray.getJSONObject(0).has("violations"));
  assertEquals(45,(int)fooResult.getIntId());
  assertEquals("JSC",fooResult.getUserName());
  assertEquals(now,fooResult.getCreated());
  assertEquals(9L,(long)fooResult.getLongField());
  assertEquals(com.google.gwt.requestfactory.shared.SimpleEnum.BAR,fooResult.getEnumField());
  assertEquals(false,(boolean)fooResult.getBoolField());
}
