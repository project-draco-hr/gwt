{
  box.addKeyboardListener(new KeyboardListenerAdapter(){
    @Override public void onKeyDown(    Widget sender,    char keyCode,    int modifiers){
      if (suggestionPopup.isAttached()) {
switch (keyCode) {
case KeyboardListener.KEY_DOWN:
          suggestionMenu.selectItem(suggestionMenu.getSelectedItemIndex() + 1);
        break;
case KeyboardListener.KEY_UP:
      suggestionMenu.selectItem(suggestionMenu.getSelectedItemIndex() - 1);
    break;
case KeyboardListener.KEY_ENTER:
case KeyboardListener.KEY_TAB:
  suggestionMenu.doSelectedItemAction();
break;
}
}
}
@Override public void onKeyUp(Widget sender,char keyCode,int modifiers){
refreshSuggestions();
}
private void refreshSuggestions(){
String text=box.getText();
if (text.equals(currentText)) {
return;
}
 else {
currentText=text;
}
if (text.length() == 0) {
suggestionPopup.hide();
suggestionMenu.clearItems();
}
 else {
showSuggestions(text);
}
}
}
);
}
