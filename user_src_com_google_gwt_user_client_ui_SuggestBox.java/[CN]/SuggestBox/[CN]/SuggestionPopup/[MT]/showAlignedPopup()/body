{
  setPopupPositionAndShow(new PositionCallback(){
    public void setPosition(    int offsetWidth,    int offsetHeight){
      int left=box.getAbsoluteLeft();
      int offsetWidthDiff=offsetWidth - box.getOffsetWidth();
      if (offsetWidthDiff > 0) {
        int windowRight=Window.getClientWidth() + Window.getScrollLeft();
        int windowLeft=Window.getScrollLeft();
        int distanceToWindowRight=windowRight - left;
        int distanceFromWindowLeft=left - windowLeft;
        if (distanceToWindowRight < offsetWidth && distanceFromWindowLeft >= (offsetWidth - box.getOffsetWidth())) {
          left-=offsetWidthDiff;
        }
      }
      int top=box.getAbsoluteTop();
      int windowTop=Window.getScrollTop();
      int windowBottom=Window.getScrollTop() + Window.getClientHeight();
      int distanceFromWindowTop=top - windowTop;
      int distanceToWindowBottom=windowBottom - (top + box.getOffsetHeight());
      if (distanceToWindowBottom < offsetHeight && distanceFromWindowTop >= offsetHeight) {
        top-=offsetHeight;
      }
 else {
        top+=box.getOffsetHeight();
      }
      setPopupPosition(left,top);
    }
  }
);
}
