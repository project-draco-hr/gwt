{
  MinimalRebuildCache minimalRebuildCache=compilerContext.getMinimalRebuildCache();
  validateCompilationState();
  assertEquals(minimalRebuildCache.getAllCompilationUnitNames(),getNamesOf(oracle.getResources()));
  assertFalse(minimalRebuildCache.getModifiedCompilationUnitNames().contains("test.Foo"));
  addGeneratedUnits(JavaResourceBase.FOO);
  validateCompilationState(Shared.getTypeName(JavaResourceBase.FOO));
  assertTrue(minimalRebuildCache.getModifiedCompilationUnitNames().contains("test.Foo"));
  rebuildCompilationState();
  validateCompilationState();
}
