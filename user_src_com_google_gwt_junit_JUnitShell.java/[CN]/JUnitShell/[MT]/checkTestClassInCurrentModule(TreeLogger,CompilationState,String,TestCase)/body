{
  TypeOracle typeOracle=compilationState.getTypeOracle();
  String typeName=testCase.getClass().getName();
  typeName=typeName.replace('$','.');
  JClassType foundType=typeOracle.findType(typeName);
  if (foundType != null) {
    return null;
  }
  Map<String,CompilationUnit> unitMap=compilationState.getCompilationUnitMap();
  CompilationUnit unit=unitMap.get(typeName);
  String errMsg;
  if (unit == null) {
    errMsg="The test class '" + typeName + "' was not found in module '"+ moduleName+ "'; no compilation unit for that type was seen";
  }
 else {
    CompilationProblemReporter.logErrorTrace(logger,TreeLogger.ERROR,compilationState.getCompilerContext(),typeName,true);
    errMsg="The test class '" + typeName + "' had compile errors; check log for details";
  }
  return new JUnitFatalLaunchException(errMsg);
}
