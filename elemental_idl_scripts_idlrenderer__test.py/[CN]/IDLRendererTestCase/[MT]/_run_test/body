def _run_test(self, input_text, expected_text):
    'Parses input, renders it and compares the results'
    parser = idlparser.IDLParser(idlparser.FREMONTCUT_SYNTAX)
    idl_file = idlnode.IDLFile(parser.parse(input_text))
    output_text = idlrenderer.render(idl_file)
    if (output_text != expected_text):
        msg = ('\nEXPECTED:\n%s\nACTUAL  :\n%s\n' % (expected_text, output_text))
        self.fail(msg)
