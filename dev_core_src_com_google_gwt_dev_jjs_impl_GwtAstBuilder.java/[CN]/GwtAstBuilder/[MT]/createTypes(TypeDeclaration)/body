{
  SourceInfo info=makeSourceInfo(x);
  try {
    SourceTypeBinding binding=x.binding;
    String name;
    if (binding instanceof LocalTypeBinding) {
      char[] localName=binding.constantPoolName();
      name=new String(localName).replace('/','.');
    }
 else {
      name=JdtUtil.asDottedString(binding.compoundName);
    }
    name=intern(name);
    JDeclaredType type;
    if (binding.isClass()) {
      type=new JClassType(info,name,binding.isAbstract(),binding.isFinal());
      JsInteropUtil.maybeSetJsPrototypeFlag(x,(JClassType)type);
    }
 else     if (binding.isInterface() || binding.isAnnotationType()) {
      String jsPrototype="";
      JInterfaceType.JsInteropType interopType=JInterfaceType.JsInteropType.NONE;
      jsPrototype=JsInteropUtil.maybeGetJsInterfacePrototype(x,jsPrototype);
      interopType=JsInteropUtil.maybeGetJsInterfaceType(x,jsPrototype,interopType);
      type=new JInterfaceType(info,name,interopType,jsPrototype);
    }
 else     if (binding.isEnum()) {
      if (binding.isAnonymousType()) {
        type=new JClassType(info,name,false,true);
      }
 else {
        type=new JEnumType(info,name,binding.isAbstract());
      }
    }
 else {
      throw new InternalCompilerException("ReferenceBinding is not a class, interface, or enum.");
    }
    typeMap.setSourceType(binding,type);
    newTypes.add(type);
    if (x.memberTypes != null) {
      for (      TypeDeclaration memberType : x.memberTypes) {
        createTypes(memberType);
      }
    }
  }
 catch (  Throwable e) {
    InternalCompilerException ice=translateException(null,e);
    StringBuffer sb=new StringBuffer();
    x.printHeader(0,sb);
    ice.addNode(x.getClass().getName(),sb.toString(),info);
    throw ice;
  }
}
