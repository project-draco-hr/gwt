{
  if (fromType == TypeBinding.VOID || toType == TypeBinding.VOID) {
    return expr;
  }
  if (fromType.isBaseType() && !toType.isBaseType()) {
    int implicitConversion=(fromType.id & TypeIds.IMPLICIT_CONVERSION_MASK) << 4;
    implicitConversion=implicitConversion | TypeIds.BOXING;
    return box(expr,implicitConversion);
  }
  if (!fromType.isBaseType() && toType.isBaseType()) {
    int implicitConversion=(toType.id & TypeIds.IMPLICIT_CONVERSION_MASK) << 4;
    implicitConversion=implicitConversion | TypeIds.UNBOXING;
    return unbox(expr,implicitConversion);
  }
  TypeBinding castToType=fromType.genericCast(toType);
  if (castToType == null) {
    return expr;
  }
  return new JCastOperation(expr.getSourceInfo(),typeMap.get(castToType),expr);
}
